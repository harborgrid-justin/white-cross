{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/identity-access/actions/auth.actions.ts"],"sourcesContent":["/**\r\n * @fileoverview Authentication Server Actions - Barrel Export File\r\n * @module lib/actions/auth.actions\r\n *\r\n * Central export point for all authentication-related server actions.\r\n * This file re-exports functionality from specialized modules:\r\n * - auth.types: TypeScript types\r\n * - auth.constants: Constants and validation schemas\r\n * - auth.login: Login operations and session creation (marked with 'use server')\r\n * - auth.password: Password change and reset operations (marked with 'use server')\r\n * - auth.session: Session verification and logout (marked with 'use server')\r\n *\r\n * Features:\r\n * - HIPAA-compliant server actions\r\n * - Next.js cache integration with revalidateTag/revalidatePath\r\n * - Comprehensive audit logging\r\n * - Type-safe operations\r\n * - Form data handling for UI integration\r\n *\r\n * NOTE: This file does NOT have 'use server' at the file level to allow imports\r\n * from both Client and Server Components. Individual modules have their own\r\n * 'use server' directives to mark functions as server actions.\r\n *\r\n * Usage:\r\n * ```typescript\r\n * // Import server actions and types\r\n * import { loginAction, logoutAction, type User } from '@/lib/actions/auth.actions';\r\n * \r\n * // Import constants and schemas separately for client components\r\n * import { AUTH_CACHE_TAGS, loginSchema } from '@/lib/actions/auth.constants';\r\n * ```\r\n */\r\n\r\n// ==========================================\r\n// TYPE EXPORTS\r\n// ==========================================\r\n\r\nexport type {\r\n  ActionResult,\r\n  User,\r\n  AuthResponse,\r\n  LoginFormState,\r\n  ChangePasswordFormState,\r\n} from './auth.types';\r\n\r\n// NOTE: Constants and schemas are NOT re-exported to avoid \"use server\" restrictions.\r\n// Import directly from './auth.constants' when needed:\r\n// import { AUTH_CACHE_TAGS, loginSchema, changePasswordSchema } from '@/lib/actions/auth.constants';\r\n\r\n// ==========================================\r\n// LOGIN EXPORTS\r\n// ==========================================\r\n\r\nexport {\r\n  loginAction,\r\n  handleLoginSubmission,\r\n  clearLoginForm,\r\n} from './auth.login';\r\n\r\n// ==========================================\r\n// PASSWORD MANAGEMENT EXPORTS\r\n// ==========================================\r\n\r\nexport {\r\n  changePasswordAction,\r\n  requestPasswordResetAction,\r\n} from './auth.password';\r\n\r\n// ==========================================\r\n// SESSION MANAGEMENT EXPORTS\r\n// ==========================================\r\n\r\nexport {\r\n  logoutAction,\r\n  verifySessionAction,\r\n} from './auth.session';\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+BC,GAED,6CAA6C;AAC7C,eAAe;AACf,6CAA6C","debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/identity-access/actions/auth.login.ts"],"sourcesContent":["/**\r\n * @fileoverview Authentication Login Operations\r\n * @module lib/actions/auth.login\r\n *\r\n * Server actions for login and authentication operations.\r\n *\r\n * Features:\r\n * - Login form validation and processing\r\n * - Session creation and cookie management\r\n * - HIPAA audit logging for login events\r\n * - Rate limiting (IP and email based)\r\n * - Input sanitization and CSRF protection\r\n * - Standardized error handling\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath } from 'next/cache';\r\nimport { cookies, headers } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\n\r\n// API integration\r\nimport { serverPost, NextApiClientError } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { auditLog, AUDIT_ACTIONS, extractIPAddress, extractUserAgent } from '@/lib/audit';\r\n\r\n// Security helpers\r\nimport { checkRateLimit, RATE_LIMITS } from '../lib/helpers/rate-limit';\r\nimport { safeFormDataEmail, safeFormDataPassword } from '../lib/helpers/input-sanitization';\r\nimport {\r\n  actionError,\r\n  actionRateLimitError,\r\n  actionValidationError,\r\n  toLoginFormState\r\n} from '../lib/helpers/action-result';\r\nimport { formatZodErrors } from '../lib/helpers/zod-errors';\r\n\r\n// Cookie configuration\r\nimport {\r\n  COOKIE_NAMES,\r\n  getAccessTokenCookieOptions,\r\n  getRefreshTokenCookieOptions\r\n} from '@/identity-access/lib/config/cookies';\r\n\r\n// Types and schemas\r\nimport type { AuthResponse, LoginFormState } from './auth.types';\r\nimport { AUTH_CACHE_TAGS, loginSchema } from './auth.constants';\r\n\r\n// ==========================================\r\n// LOGIN ACTIONS\r\n// ==========================================\r\n\r\n/**\r\n * Login action with comprehensive security features\r\n *\r\n * Security features:\r\n * - Rate limiting (IP-based: 5/15min, Email-based: 3/15min)\r\n * - Input sanitization\r\n * - Zod validation\r\n * - HIPAA audit logging\r\n * - Secure cookie management\r\n *\r\n * @param _prevState - Previous form state (unused, for useActionState)\r\n * @param formData - Form data containing email and password\r\n * @returns Standardized login form state\r\n */\r\nexport async function loginAction(\r\n  _prevState: LoginFormState,\r\n  formData: FormData\r\n): Promise<LoginFormState> {\r\n  // Extract IP address for rate limiting\r\n  const headersList = await headers();\r\n  const mockRequest = {\r\n    headers: {\r\n      get: (name: string) => headersList.get(name)\r\n    }\r\n  } as Request;\r\n  const ipAddress = extractIPAddress(mockRequest);\r\n\r\n  // Sanitize inputs before validation\r\n  const email = safeFormDataEmail(formData, 'email');\r\n  const password = safeFormDataPassword(formData, 'password');\r\n\r\n  // Rate limiting: IP-based (prevents brute force from single IP)\r\n  const ipRateLimit = checkRateLimit('login-ip', ipAddress, RATE_LIMITS.LOGIN_IP);\r\n  if (ipRateLimit.limited) {\r\n    // Audit rate limit violation\r\n    await auditLog({\r\n      userId: email || 'unknown',\r\n      action: AUDIT_ACTIONS.LOGIN_FAILED,\r\n      resource: 'Authentication',\r\n      details: `Rate limit exceeded from IP ${ipAddress}`,\r\n      ipAddress,\r\n      userAgent: extractUserAgent(mockRequest),\r\n      success: false,\r\n      errorMessage: 'Rate limit exceeded'\r\n    });\r\n\r\n    return toLoginFormState(actionRateLimitError(ipRateLimit.resetIn!));\r\n  }\r\n\r\n  // Rate limiting: Email-based (prevents targeted attacks on specific accounts)\r\n  if (email) {\r\n    const emailRateLimit = checkRateLimit('login-email', email, RATE_LIMITS.LOGIN_EMAIL);\r\n    if (emailRateLimit.limited) {\r\n      // Audit rate limit violation\r\n      await auditLog({\r\n        userId: email,\r\n        action: AUDIT_ACTIONS.LOGIN_FAILED,\r\n        resource: 'Authentication',\r\n        details: `Rate limit exceeded for email ${email}`,\r\n        ipAddress,\r\n        userAgent: extractUserAgent(mockRequest),\r\n        success: false,\r\n        errorMessage: 'Rate limit exceeded'\r\n      });\r\n\r\n      return toLoginFormState(actionRateLimitError(emailRateLimit.resetIn!));\r\n    }\r\n  }\r\n\r\n  // Validate form data with Zod\r\n  const validatedFields = loginSchema.safeParse({\r\n    email,\r\n    password,\r\n  });\r\n\r\n  if (!validatedFields.success) {\r\n    return toLoginFormState(\r\n      actionValidationError(formatZodErrors(validatedFields.error))\r\n    );\r\n  }\r\n\r\n  try {\r\n    const { email: validatedEmail, password: validatedPassword } = validatedFields.data;\r\n\r\n    // Call backend authentication endpoint\r\n    const wrappedResponse = await serverPost<any>(\r\n      API_ENDPOINTS.AUTH.LOGIN,\r\n      { email: validatedEmail, password: validatedPassword },\r\n      {\r\n        cache: 'no-store',\r\n        requiresAuth: false,\r\n        next: { tags: [AUTH_CACHE_TAGS.AUTH] }\r\n      }\r\n    );\r\n\r\n    console.log('[Login Action] Response received:', {\r\n      hasResponse: !!wrappedResponse,\r\n      hasData: !!wrappedResponse?.data,\r\n      responseKeys: wrappedResponse ? Object.keys(wrappedResponse) : [],\r\n    });\r\n\r\n    // Backend wraps response in ApiResponse format - extract data\r\n    const response: AuthResponse = wrappedResponse?.data || wrappedResponse;\r\n\r\n    console.log('[Login Action] Extracted auth data:', {\r\n      hasAccessToken: !!response?.accessToken,\r\n      hasRefreshToken: !!response?.refreshToken,\r\n      hasUser: !!response?.user,\r\n    });\r\n\r\n    // Check if we have valid authentication data\r\n    if (!response || !response.accessToken) {\r\n      // Audit failed login attempt\r\n      await auditLog({\r\n        userId: validatedEmail,\r\n        action: AUDIT_ACTIONS.LOGIN_FAILED,\r\n        resource: 'Authentication',\r\n        details: `Failed login attempt for ${validatedEmail}`,\r\n        ipAddress,\r\n        userAgent: extractUserAgent(mockRequest),\r\n        success: false,\r\n        errorMessage: 'Invalid credentials'\r\n      });\r\n\r\n      return toLoginFormState(\r\n        actionError(['Invalid credentials'])\r\n      );\r\n    }\r\n\r\n    // Extract data from successful response\r\n    const { accessToken: token, refreshToken, user } = response;\r\n\r\n    // Set HTTP-only cookies using centralized configuration\r\n    const cookieStore = await cookies();\r\n\r\n    console.log('[Login Action] Setting auth token:', {\r\n      tokenLength: token?.length,\r\n      tokenStart: token?.substring(0, 20),\r\n      cookieName: COOKIE_NAMES.ACCESS_TOKEN\r\n    });\r\n\r\n    // Use centralized cookie configuration for consistent, secure settings\r\n    cookieStore.set(\r\n      COOKIE_NAMES.ACCESS_TOKEN,\r\n      token,\r\n      getAccessTokenCookieOptions()\r\n    );\r\n\r\n    console.log('[Login Action] Auth token cookie set, verifying:', {\r\n      cookieExists: !!cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN),\r\n      cookieValue: cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN)?.value?.substring(0, 20)\r\n    });\r\n\r\n    if (refreshToken) {\r\n      cookieStore.set(\r\n        COOKIE_NAMES.REFRESH_TOKEN,\r\n        refreshToken,\r\n        getRefreshTokenCookieOptions()\r\n      );\r\n    }\r\n\r\n    // Audit successful login\r\n    await auditLog({\r\n      userId: user.id,\r\n      action: AUDIT_ACTIONS.LOGIN,\r\n      resource: 'Authentication',\r\n      details: `User ${validatedEmail} logged in successfully`,\r\n      ipAddress,\r\n      userAgent: extractUserAgent(mockRequest),\r\n      success: true\r\n    });\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('[Login Action] Error:', error);\r\n\r\n    // Handle NextApiClientError with more specific messaging\r\n    if (error instanceof NextApiClientError) {\r\n      const errorMessage = error.message || 'Authentication failed. Please check your credentials.';\r\n\r\n      // Audit API error\r\n      await auditLog({\r\n        userId: email || 'unknown',\r\n        action: AUDIT_ACTIONS.LOGIN_FAILED,\r\n        resource: 'Authentication',\r\n        details: `Login error: ${errorMessage}`,\r\n        ipAddress,\r\n        userAgent: extractUserAgent(mockRequest),\r\n        success: false,\r\n        errorMessage\r\n      });\r\n\r\n      return toLoginFormState(actionError([errorMessage]));\r\n    }\r\n\r\n    // Audit unexpected error\r\n    await auditLog({\r\n      userId: email || 'unknown',\r\n      action: AUDIT_ACTIONS.LOGIN_FAILED,\r\n      resource: 'Authentication',\r\n      details: 'Unexpected error during login',\r\n      ipAddress,\r\n      userAgent: extractUserAgent(mockRequest),\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error'\r\n    });\r\n\r\n    return toLoginFormState(\r\n      actionError(['An unexpected error occurred. Please try again.'])\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Handle login form submission from login page\r\n *\r\n * Delegates to centralized loginAction and handles redirect.\r\n * This is the action that should be used in login forms.\r\n *\r\n * @param prevState - Previous form state\r\n * @param formData - Form data containing credentials\r\n * @returns Login form state or redirects to dashboard\r\n */\r\nexport async function handleLoginSubmission(\r\n  prevState: LoginFormState,\r\n  formData: FormData\r\n): Promise<LoginFormState> {\r\n  const result = await loginAction(prevState, formData);\r\n\r\n  if (result.success) {\r\n    // Successful login - revalidate and redirect to dashboard\r\n    revalidatePath('/dashboard', 'page');\r\n    redirect('/dashboard');\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Clear login form state\r\n *\r\n * Utility action for resetting form state.\r\n *\r\n * @returns Empty form state\r\n */\r\nexport async function clearLoginForm(): Promise<LoginFormState> {\r\n  return {\r\n    success: false,\r\n    errors: undefined\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAmRsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/login/page.tsx"],"sourcesContent":["/**\r\n * @fileoverview Login Page - Primary Authentication Interface using Server Actions\r\n *\r\n * This page implements the main authentication interface for White Cross Healthcare Platform\r\n * using Next.js server actions for secure server-side authentication. It provides secure \r\n * credential-based login with JWT token management, comprehensive error handling, and \r\n * follows HIPAA security requirements and WCAG 2.1 AA accessibility standards.\r\n *\r\n * @module app/login/page\r\n * @category Authentication\r\n * @subcategory Pages\r\n *\r\n * @route /login - Primary authentication endpoint\r\n * @route /login?redirect=/path - Login with redirect after success\r\n * @route /login?error=session_expired - Login with error context\r\n *\r\n * @requires react\r\n * @requires next/navigation\r\n * @requires handleLoginSubmission - Server action for form processing\r\n *\r\n * @security\r\n * - Server-side JWT token authentication with secure HttpOnly cookies\r\n * - Password visibility toggle for user convenience\r\n * - CSRF protection through Next.js server actions\r\n * - Rate limiting on authentication attempts (server-side)\r\n * - No password storage in client state or localStorage\r\n * - Server actions handle all authentication logic\r\n *\r\n * @compliance HIPAA\r\n * - User authentication required before PHI access\r\n * - Session timeout enforcement (server-side)\r\n * - Audit logging of authentication events (server-side)\r\n * - Complies with HIPAA Security Rule ยง 164.312(a)(2)(i) - Unique User Identification\r\n * - Complies with HIPAA Security Rule ยง 164.312(d) - Person or Entity Authentication\r\n *\r\n * @accessibility WCAG 2.1 AA\r\n * - Keyboard navigation support for all interactive elements\r\n * - Screen reader compatible with proper ARIA labels\r\n * - Error messages announced via aria-live regions\r\n * - High contrast mode support\r\n * - Focus management for form validation errors\r\n *\r\n * @since 1.0.0\r\n */\r\n\r\n'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { useActionState } from 'react';\r\nimport { useFormStatus } from 'react-dom';\r\nimport Link from 'next/link';\r\nimport { handleLoginSubmission } from '@/identity-access/actions/auth.actions';\r\n\r\n/**\r\n * Submit Button Component with loading state\r\n * Uses React 19 useFormStatus hook to show loading state during server action execution\r\n */\r\nfunction SubmitButton() {\r\n  const { pending } = useFormStatus();\r\n  \r\n  return (\r\n    <button\r\n      type=\"submit\"\r\n      disabled={pending}\r\n      className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n      aria-busy={pending}\r\n    >\r\n      {pending ? (\r\n        <>\r\n          <svg\r\n            className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <circle\r\n              className=\"opacity-25\"\r\n              cx=\"12\"\r\n              cy=\"12\"\r\n              r=\"10\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"4\"\r\n            />\r\n            <path\r\n              className=\"opacity-75\"\r\n              fill=\"currentColor\"\r\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n            />\r\n          </svg>\r\n          Signing in...\r\n        </>\r\n      ) : (\r\n        'Sign in'\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\n/**\r\n * Login Page Component using Server Actions\r\n *\r\n * Implements a comprehensive authentication interface with email/password credentials\r\n * using Next.js server actions for secure server-side processing. The component manages \r\n * form state through useFormState and handles authentication flow while maintaining \r\n * security best practices.\r\n *\r\n * **Authentication Flow:**\r\n * 1. User enters email and password\r\n * 2. Form submitted via server action\r\n * 3. Server action validates credentials and generates JWT tokens\r\n * 4. Tokens stored in HttpOnly cookies (server-side)\r\n * 5. User redirected to dashboard on success\r\n * 6. Errors displayed in form state\r\n *\r\n * **State Management:**\r\n * - Form state: Managed by useFormState with server actions\r\n * - Show password: Client-side toggle for password visibility\r\n * - URL error parameters: Handled via useSearchParams\r\n * - Server errors: Returned from server action and displayed\r\n *\r\n * **Error Handling:**\r\n * - URL error parameters (session_expired, unauthorized, invalid_token)\r\n * - Server action errors (invalid credentials, validation errors)\r\n * - All errors displayed in accessible alert component\r\n *\r\n * **Security Features:**\r\n * - All authentication logic handled server-side\r\n * - Password never stored in client state\r\n * - Server actions provide CSRF protection\r\n * - Error messages don't expose system details\r\n * - HttpOnly cookies prevent XSS attacks\r\n *\r\n * @returns {JSX.Element} The login page with server action form\r\n */\r\nexport default function LoginPage() {\r\n  const searchParams = useSearchParams();\r\n  const [formState, formAction] = useActionState(handleLoginSubmission, { success: false });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  /**\r\n   * Extract error context from URL query parameters\r\n   */\r\n  const errorParam = searchParams.get('error');\r\n\r\n  /**\r\n   * Process URL error parameters into user-friendly error messages\r\n   * Using useMemo to avoid the eslint warning about setState in useEffect\r\n   */\r\n  const urlError = useMemo(() => {\r\n    if (!errorParam) return '';\r\n    \r\n    switch (errorParam) {\r\n      case 'invalid_token':\r\n        return 'Your session has expired. Please log in again.';\r\n      case 'session_expired':\r\n        return 'Your session has expired due to inactivity. Please log in again.';\r\n      case 'unauthorized':\r\n        return 'You need to log in to access that page.';\r\n      default:\r\n        return 'An error occurred. Please try logging in again.';\r\n    }\r\n  }, [errorParam]);\r\n\r\n  /**\r\n   * Get the error message to display\r\n   * Priority: URL errors > Server action form errors\r\n   */\r\n  const getErrorMessage = () => {\r\n    if (urlError) return urlError;\r\n    if (formState.errors?._form?.[0]) return formState.errors._form[0];\r\n    if (formState.errors?.email?.[0]) return formState.errors.email[0];\r\n    if (formState.errors?.password?.[0]) return formState.errors.password[0];\r\n    return '';\r\n  };\r\n\r\n  const errorMessage = getErrorMessage();\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        {/* Header */}\r\n        <div>\r\n          <h1 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Sign in to White Cross\r\n          </h1>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            School Health Management System\r\n          </p>\r\n        </div>\r\n\r\n        {/* Error Alert */}\r\n        {errorMessage && (\r\n          <div\r\n            className=\"rounded-md bg-red-50 p-4\"\r\n            role=\"alert\"\r\n            aria-live=\"assertive\"\r\n          >\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg\r\n                  className=\"h-5 w-5 text-red-400\"\r\n                  viewBox=\"0 0 20 20\"\r\n                  fill=\"currentColor\"\r\n                  aria-hidden=\"true\"\r\n                >\r\n                  <path\r\n                    fillRule=\"evenodd\"\r\n                    d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z\"\r\n                    clipRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-sm font-medium text-red-800\">{errorMessage}</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Success Message */}\r\n        {formState.success && (\r\n          <div\r\n            className=\"rounded-md bg-green-50 p-4\"\r\n            role=\"alert\"\r\n            aria-live=\"polite\"\r\n          >\r\n            <div className=\"flex\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg\r\n                  className=\"h-5 w-5 text-green-400\"\r\n                  viewBox=\"0 0 20 20\"\r\n                  fill=\"currentColor\"\r\n                  aria-hidden=\"true\"\r\n                >\r\n                  <path\r\n                    fillRule=\"evenodd\"\r\n                    d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.236 4.53L7.53 10.23a.75.75 0 00-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z\"\r\n                    clipRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-sm font-medium text-green-800\">Login successful! Redirecting...</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Login Form with Server Action */}\r\n        <form className=\"mt-8 space-y-6\" action={formAction} noValidate>\r\n          <div className=\"rounded-md shadow-sm -space-y-px\">\r\n            {/* Email Field */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"sr-only\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                required\r\n                className={`appearance-none rounded-none relative block w-full px-3 py-2 border ${\r\n                  formState.errors?.email ? 'border-red-500' : 'border-gray-300'\r\n                } placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}\r\n                placeholder=\"Email address\"\r\n                aria-required=\"true\"\r\n                aria-invalid={formState.errors?.email ? true : false}\r\n                aria-describedby={formState.errors?.email ? 'email-error' : undefined}\r\n              />\r\n              {formState.errors?.email && (\r\n                <p id=\"email-error\" className=\"mt-1 text-sm text-red-600\" role=\"alert\">\r\n                  {formState.errors.email[0]}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Password Field */}\r\n            <div className=\"relative\">\r\n              <label htmlFor=\"password\" className=\"sr-only\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type={showPassword ? 'text' : 'password'}\r\n                autoComplete=\"current-password\"\r\n                required\r\n                className={`appearance-none rounded-none relative block w-full px-3 py-2 pr-10 border ${\r\n                  formState.errors?.password ? 'border-red-500' : 'border-gray-300'\r\n                } placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}\r\n                placeholder=\"Password\"\r\n                aria-required=\"true\"\r\n                aria-invalid={formState.errors?.password ? true : false}\r\n                aria-describedby={formState.errors?.password ? 'password-error' : undefined}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                aria-label={showPassword ? 'Hide password' : 'Show password'}\r\n              >\r\n                {showPassword ? (\r\n                  <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n              {formState.errors?.password && (\r\n                <p id=\"password-error\" className=\"mt-1 text-sm text-red-600\" role=\"alert\">\r\n                  {formState.errors.password[0]}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Remember Me and Forgot Password */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                id=\"remember-me\"\r\n                name=\"remember-me\"\r\n                type=\"checkbox\"\r\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\r\n                Remember me\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"text-sm\">\r\n              <Link\r\n                href=\"/forgot-password\"\r\n                className=\"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n              >\r\n                Forgot your password?\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <div>\r\n            <SubmitButton />\r\n          </div>\r\n\r\n          {/* Divider */}\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-gray-300\" />\r\n            </div>\r\n            <div className=\"relative flex justify-center text-sm\">\r\n              <span className=\"px-2 bg-gray-50 text-gray-500\">Or continue with</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* OAuth Buttons */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n                <path\r\n                  d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\r\n                  fill=\"#4285F4\"\r\n                />\r\n                <path\r\n                  d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\r\n                  fill=\"#34A853\"\r\n                />\r\n                <path\r\n                  d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\r\n                  fill=\"#FBBC05\"\r\n                />\r\n                <path\r\n                  d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\r\n                  fill=\"#EA4335\"\r\n                />\r\n              </svg>\r\n              <span className=\"ml-2\">Google</span>\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"#00A4EF\" aria-hidden=\"true\">\r\n                <path d=\"M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zm12.6 0H12.6V0H24v11.4z\" />\r\n              </svg>\r\n              <span className=\"ml-2\">Microsoft</span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Registration Link */}\r\n        <div className=\"text-center\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            Don&apos;t have an account?{' '}\r\n            <Link\r\n              href=\"/register\"\r\n              className=\"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              Create one\r\n            </Link>\r\n          </p>\r\n        </div>\r\n\r\n        {/* Help Text */}\r\n        <div className=\"text-center\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            Need help? Contact your system administrator.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}