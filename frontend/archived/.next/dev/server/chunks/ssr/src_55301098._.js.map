{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/layouts/Breadcrumbs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Breadcrumbs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Breadcrumbs() from the server but Breadcrumbs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layouts/Breadcrumbs.tsx <module evaluation>\",\n    \"Breadcrumbs\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/layouts/Breadcrumbs.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layouts/Breadcrumbs.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,wEACA;uCAEW,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA0S,GACvU,wEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/layouts/Breadcrumbs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Breadcrumbs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Breadcrumbs() from the server but Breadcrumbs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layouts/Breadcrumbs.tsx\",\n    \"Breadcrumbs\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/layouts/Breadcrumbs.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/layouts/Breadcrumbs.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,oDACA;uCAEW,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsR,GACnT,oDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/layouts/PageHeader.tsx"],"sourcesContent":["/**\r\n * WF-COMP-NAV-006 | PageHeader.tsx - Unified Page Header Component\r\n * Purpose: Consistent page header with title, description, actions, breadcrumbs\r\n * Dependencies: react, Breadcrumbs, Next.js Link\r\n * Features: Responsive, action buttons area, optional description, back navigation, custom breadcrumbs\r\n * Last Updated: 2025-11-02\r\n * Agent: UI/UX Architect\r\n */\r\n\r\nimport React, { memo, ReactNode } from 'react'\r\nimport Link from 'next/link'\r\nimport { ChevronLeft } from 'lucide-react'\r\nimport Breadcrumbs from './Breadcrumbs'\r\n\r\n// ============================================================================\r\n// MAIN PAGE HEADER COMPONENT\r\n// ============================================================================\r\n\r\n/**\r\n * Props for the PageHeader component.\r\n *\r\n * @property {string} title - Main page title displayed prominently\r\n * @property {string} [description] - Optional descriptive text below the title (alias: subtitle)\r\n * @property {string} [subtitle] - Alternative prop name for description (for backward compatibility)\r\n * @property {ReactNode} [actions] - Optional action buttons or controls (e.g., \"Add New\", \"Export\")\r\n * @property {ReactNode} [action] - Alternative single action prop (for backward compatibility)\r\n * @property {boolean} [showBreadcrumbs=true] - Whether to show breadcrumb navigation\r\n * @property {Array} [breadcrumbs] - Custom breadcrumb items array\r\n * @property {string} [backLink] - Optional back navigation link\r\n * @property {string} [backLabel='Back'] - Label for back link button\r\n * @property {ReactNode} [children] - Optional additional content below the header\r\n * @property {string} [className] - Optional CSS classes for the container\r\n */\r\ninterface PageHeaderProps {\r\n  title: string\r\n  description?: string\r\n  subtitle?: string // Alias for description\r\n  actions?: ReactNode\r\n  action?: ReactNode // Alias for actions (singular)\r\n  showBreadcrumbs?: boolean\r\n  breadcrumbs?: Array<{ label: string; href?: string }>\r\n  backLink?: string\r\n  backLabel?: string\r\n  children?: ReactNode\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Unified page header component with breadcrumbs, title, description, and actions.\r\n *\r\n * Provides a consistent header layout for all application pages including:\r\n * - Optional back navigation link\r\n * - Breadcrumb navigation for context (auto-generated or custom)\r\n * - Page title\r\n * - Optional description/subtitle text\r\n * - Action button area\r\n * - Additional content area\r\n *\r\n * Layout:\r\n * - Responsive flex layout\r\n * - Desktop: Title and actions side-by-side\r\n * - Mobile: Stacked layout with title first\r\n * - Breadcrumbs always at top when shown\r\n *\r\n * Features:\r\n * - Back navigation support\r\n * - Consistent spacing and typography\r\n * - Responsive design\r\n * - Dark mode support\r\n * - Text truncation for long titles\r\n * - Flexible action area for buttons/controls\r\n * - Custom or auto-generated breadcrumbs\r\n * - Backward compatible with both old APIs\r\n *\r\n * @param props - Component props\r\n * @param props.title - Main page title\r\n * @param props.description - Optional descriptive text\r\n * @param props.subtitle - Alternative prop name for description\r\n * @param props.actions - Optional action buttons/controls\r\n * @param props.action - Alternative single action prop\r\n * @param props.showBreadcrumbs - Toggle breadcrumb display (default: true)\r\n * @param props.breadcrumbs - Custom breadcrumb items\r\n * @param props.backLink - Optional back navigation URL\r\n * @param props.backLabel - Label for back link (default: 'Back')\r\n * @param props.children - Additional content below header\r\n * @param props.className - Additional CSS classes\r\n * @returns JSX element representing the page header\r\n *\r\n * @example\r\n * ```tsx\r\n * <PageHeader\r\n *   title=\"Student Health Records\"\r\n *   description=\"View and manage student medical information\"\r\n * />\r\n * ```\r\n *\r\n * @example\r\n * ```tsx\r\n * <PageHeader\r\n *   title=\"Medications\"\r\n *   description=\"Track and dispense medications\"\r\n *   actions={\r\n *     <>\r\n *       <Button variant=\"secondary\">Export</Button>\r\n *       <Button variant=\"default\">Add Medication</Button>\r\n *     </>\r\n *   }\r\n *   showBreadcrumbs={true}\r\n * />\r\n * ```\r\n *\r\n * @example\r\n * ```tsx\r\n * <PageHeader\r\n *   title=\"New Message\"\r\n *   description=\"Compose and send a new message\"\r\n *   backLink=\"/messages\"\r\n *   backLabel=\"Back to Messages\"\r\n * />\r\n * ```\r\n */\r\nexport const PageHeader = memo(({\r\n  title,\r\n  description,\r\n  subtitle,\r\n  actions,\r\n  action,\r\n  showBreadcrumbs = true,\r\n  breadcrumbs,\r\n  backLink,\r\n  backLabel = 'Back',\r\n  children,\r\n  className = ''\r\n}: PageHeaderProps) => {\r\n  // Support both description and subtitle props (backward compatibility)\r\n  const descriptionText = description || subtitle;\r\n\r\n  // Support both actions and action props (backward compatibility)\r\n  const actionElements = actions || action;\r\n\r\n  return (\r\n    <div className={`page-header mb-6 ${className}`}>\r\n      {/* Back Navigation */}\r\n      {backLink && (\r\n        <div className=\"mb-2\">\r\n          <Link\r\n            href={backLink}\r\n            className=\"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors\"\r\n          >\r\n            <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n            {backLabel}\r\n          </Link>\r\n        </div>\r\n      )}\r\n\r\n      {/* Breadcrumbs */}\r\n      {showBreadcrumbs && (\r\n        <div className=\"mb-4\">\r\n          {breadcrumbs ? (\r\n            <Breadcrumbs items={breadcrumbs} />\r\n          ) : (\r\n            <Breadcrumbs />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Header Content */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 dark:text-white truncate\">\r\n            {title}\r\n          </h1>\r\n          {descriptionText && (\r\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400 text-gray-600\">\r\n              {descriptionText}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        {actionElements && (\r\n          <div className=\"flex-shrink-0 flex items-center gap-2\">\r\n            {actionElements}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Additional Content */}\r\n      {children && (\r\n        <div className=\"mt-4\">\r\n          {children}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n})\r\n\r\nPageHeader.displayName = 'PageHeader'\r\n\r\nexport default PageHeader\r\n\r\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;;;AAED;AACA;AACA;AACA;;;;;;AA6GO,MAAM,2BAAa,IAAA,6MAAI,EAAC,CAAC,EAC9B,KAAK,EACL,WAAW,EACX,QAAQ,EACR,OAAO,EACP,MAAM,EACN,kBAAkB,IAAI,EACtB,WAAW,EACX,QAAQ,EACR,YAAY,MAAM,EAClB,QAAQ,EACR,YAAY,EAAE,EACE;IAChB,uEAAuE;IACvE,MAAM,kBAAkB,eAAe;IAEvC,iEAAiE;IACjE,MAAM,iBAAiB,WAAW;IAElC,qBACE,8OAAC;QAAI,WAAW,CAAC,iBAAiB,EAAE,WAAW;;YAE5C,0BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0LAAI;oBACH,MAAM;oBACN,WAAU;;sCAEV,8OAAC,mOAAW;4BAAC,WAAU;;;;;;wBACtB;;;;;;;;;;;;YAMN,iCACC,8OAAC;gBAAI,WAAU;0BACZ,4BACC,8OAAC,uJAAW;oBAAC,OAAO;;;;;6EAEpB,8OAAC,uJAAW;;;;;;;;;;0BAMlB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CACX;;;;;;4BAEF,iCACC,8OAAC;gCAAE,WAAU;0CACV;;;;;;;;;;;;oBAMN,gCACC,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;YAMN,0BACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX;AAEA,WAAW,WAAW,GAAG;uCAEV","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/identity-access/lib/config/cookies.ts"],"sourcesContent":["/**\r\n * @fileoverview Centralized Cookie Configuration\r\n * @module lib/config/cookies\r\n *\r\n * Single source of truth for all authentication cookie settings.\r\n * Implements security best practices including:\r\n * - __Host- prefix for maximum security\r\n * - Consistent naming across the application\r\n * - Secure defaults for production environments\r\n * - HIPAA-compliant session management\r\n *\r\n * Security Features:\r\n * - __Host- prefix prevents subdomain and path manipulation\r\n * - httpOnly prevents XSS attacks\r\n * - secure ensures HTTPS-only transmission\r\n * - sameSite prevents CSRF attacks\r\n * - Appropriate maxAge for healthcare security requirements\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\r\n * @see https://web.dev/first-party-cookie-recipes/\r\n */\r\n\r\nimport { ResponseCookie } from 'next/dist/compiled/@edge-runtime/cookies';\r\n\r\n/**\r\n * Cookie names with __Host- prefix for maximum security\r\n *\r\n * The __Host- prefix ensures:\r\n * - Cookie must be set with Secure flag\r\n * - Cookie must be set from a secure origin (HTTPS)\r\n * - Cookie must NOT have a Domain attribute (preventing subdomain access)\r\n * - Cookie path must be /\r\n *\r\n * NOTE: __Host- prefix requires HTTPS. In development (localhost), we use\r\n * regular cookie names without the prefix.\r\n */\r\nexport const COOKIE_NAMES = {\r\n  /** Access token for API authentication */\r\n  ACCESS_TOKEN: process.env.NODE_ENV === 'production' ? '__Host-auth.token' : 'auth.token',\r\n\r\n  /** Refresh token for obtaining new access tokens */\r\n  REFRESH_TOKEN: process.env.NODE_ENV === 'production' ? '__Host-auth.refresh' : 'auth.refresh',\r\n\r\n  /** Session identifier (if using session-based auth alongside JWT) */\r\n  SESSION_ID: process.env.NODE_ENV === 'production' ? '__Host-auth.session' : 'auth.session',\r\n} as const;\r\n\r\n/**\r\n * Cookie expiration times in seconds\r\n */\r\nexport const COOKIE_MAX_AGE = {\r\n  /** Access token: 1 hour (short-lived for security) */\r\n  ACCESS_TOKEN: 60 * 60,\r\n\r\n  /** Refresh token: 7 days (allows persistent login) */\r\n  REFRESH_TOKEN: 7 * 24 * 60 * 60,\r\n\r\n  /** Session: 24 hours (daily re-authentication for HIPAA compliance) */\r\n  SESSION: 24 * 60 * 60,\r\n} as const;\r\n\r\n/**\r\n * Base cookie options for all authentication cookies\r\n * These settings ensure maximum security\r\n */\r\nconst BASE_COOKIE_OPTIONS: Partial<ResponseCookie> = {\r\n  /** Path where cookie is valid */\r\n  path: '/',\r\n\r\n  /** Prevent JavaScript access (XSS protection) */\r\n  httpOnly: true,\r\n\r\n  /** Strict CSRF protection - cookie only sent to same-site requests */\r\n  sameSite: 'strict',\r\n\r\n  /** Only send over HTTPS in production */\r\n  secure: process.env.NODE_ENV === 'production',\r\n} as const;\r\n\r\n/**\r\n * Get cookie options for access token\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for access token\r\n *\r\n * @example\r\n * ```typescript\r\n * import { cookies } from 'next/headers';\r\n * import { getAccessTokenCookieOptions, COOKIE_NAMES } from './config/cookies';\r\n *\r\n * const cookieStore = await cookies();\r\n * cookieStore.set(COOKIE_NAMES.ACCESS_TOKEN, token, getAccessTokenCookieOptions());\r\n * ```\r\n */\r\nexport function getAccessTokenCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.ACCESS_TOKEN,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Get cookie options for refresh token\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for refresh token\r\n *\r\n * @example\r\n * ```typescript\r\n * cookieStore.set(COOKIE_NAMES.REFRESH_TOKEN, refreshToken, getRefreshTokenCookieOptions());\r\n * ```\r\n */\r\nexport function getRefreshTokenCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.REFRESH_TOKEN,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Get cookie options for session identifier\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for session\r\n *\r\n * @example\r\n * ```typescript\r\n * cookieStore.set(COOKIE_NAMES.SESSION_ID, sessionId, getSessionCookieOptions());\r\n * ```\r\n */\r\nexport function getSessionCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.SESSION,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Legacy cookie names for migration support\r\n * These should be removed in a future version\r\n *\r\n * @deprecated Use COOKIE_NAMES instead\r\n */\r\nexport const LEGACY_COOKIE_NAMES = {\r\n  auth_token: 'auth_token',\r\n  refresh_token: 'refresh_token',\r\n  authToken: 'authToken',\r\n  refreshToken: 'refreshToken',\r\n} as const;\r\n\r\n/**\r\n * Clear all authentication cookies\r\n * Useful for logout operations\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n *\r\n * @example\r\n * ```typescript\r\n * import { cookies } from 'next/headers';\r\n * import { clearAuthCookies } from './config/cookies';\r\n *\r\n * export async function logout() {\r\n *   const cookieStore = await cookies();\r\n *   clearAuthCookies(cookieStore);\r\n * }\r\n * ```\r\n */\r\nexport async function clearAuthCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): Promise<void> {\r\n  // Clear current cookies\r\n  cookieStore.delete(COOKIE_NAMES.ACCESS_TOKEN);\r\n  cookieStore.delete(COOKIE_NAMES.REFRESH_TOKEN);\r\n  cookieStore.delete(COOKIE_NAMES.SESSION_ID);\r\n\r\n  // Clear legacy cookies for migration\r\n  Object.values(LEGACY_COOKIE_NAMES).forEach((name) => {\r\n    cookieStore.delete(name);\r\n  });\r\n}\r\n\r\n/**\r\n * Get token from cookies with fallback to legacy names\r\n * This supports migration from old cookie names to new secure names\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n * @returns Access token if found, null otherwise\r\n *\r\n * @example\r\n * ```typescript\r\n * const token = getAccessTokenFromCookies(await cookies());\r\n * if (token) {\r\n *   // Verify and use token\r\n * }\r\n * ```\r\n */\r\nexport function getAccessTokenFromCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): string | null {\r\n  // Try new secure cookie name first\r\n  let token = cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN)?.value;\r\n\r\n  if (token) {\r\n    return token;\r\n  }\r\n\r\n  // Fall back to legacy names for migration\r\n  for (const legacyName of Object.values(LEGACY_COOKIE_NAMES)) {\r\n    token = cookieStore.get(legacyName)?.value;\r\n    if (token) {\r\n      console.warn(\r\n        `[Cookie Migration] Found token in legacy cookie '${legacyName}'. ` +\r\n        `Please migrate to '${COOKIE_NAMES.ACCESS_TOKEN}' for improved security.`\r\n      );\r\n      return token;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Get refresh token from cookies with fallback to legacy names\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n * @returns Refresh token if found, null otherwise\r\n */\r\nexport function getRefreshTokenFromCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): string | null {\r\n  // Try new secure cookie name first\r\n  const token = cookieStore.get(COOKIE_NAMES.REFRESH_TOKEN)?.value;\r\n\r\n  if (token) {\r\n    return token;\r\n  }\r\n\r\n  // Fall back to legacy refresh_token\r\n  const legacyToken = cookieStore.get(LEGACY_COOKIE_NAMES.refresh_token)?.value ||\r\n                      cookieStore.get(LEGACY_COOKIE_NAMES.refreshToken)?.value;\r\n\r\n  if (legacyToken) {\r\n    console.warn(\r\n      '[Cookie Migration] Found refresh token in legacy cookie. ' +\r\n      `Please migrate to '${COOKIE_NAMES.REFRESH_TOKEN}' for improved security.`\r\n    );\r\n  }\r\n\r\n  return legacyToken || null;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;CAoBC;;;;;;;;;;;;;;;;;;;;AAgBM,MAAM,eAAe;IAC1B,wCAAwC,GACxC,cAAc,sCAAwC,0BAAsB;IAE5E,kDAAkD,GAClD,eAAe,sCAAwC,0BAAwB;IAE/E,mEAAmE,GACnE,YAAY,sCAAwC,0BAAwB;AAC9E;AAKO,MAAM,iBAAiB;IAC5B,oDAAoD,GACpD,cAAc,KAAK;IAEnB,oDAAoD,GACpD,eAAe,IAAI,KAAK,KAAK;IAE7B,qEAAqE,GACrE,SAAS,KAAK,KAAK;AACrB;AAEA;;;CAGC,GACD,MAAM,sBAA+C;IACnD,+BAA+B,GAC/B,MAAM;IAEN,+CAA+C,GAC/C,UAAU;IAEV,oEAAoE,GACpE,UAAU;IAEV,uCAAuC,GACvC,QAAQ,oDAAyB;AACnC;AAiBO,SAAS,4BACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,YAAY;QACnC,GAAG,SAAS;IACd;AACF;AAaO,SAAS,6BACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,aAAa;QACpC,GAAG,SAAS;IACd;AACF;AAaO,SAAS,wBACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,OAAO;QAC9B,GAAG,SAAS;IACd;AACF;AAQO,MAAM,sBAAsB;IACjC,YAAY;IACZ,eAAe;IACf,WAAW;IACX,cAAc;AAChB;AAmBO,eAAe,iBACpB,WAAuE;IAEvE,wBAAwB;IACxB,YAAY,MAAM,CAAC,aAAa,YAAY;IAC5C,YAAY,MAAM,CAAC,aAAa,aAAa;IAC7C,YAAY,MAAM,CAAC,aAAa,UAAU;IAE1C,qCAAqC;IACrC,OAAO,MAAM,CAAC,qBAAqB,OAAO,CAAC,CAAC;QAC1C,YAAY,MAAM,CAAC;IACrB;AACF;AAiBO,SAAS,0BACd,WAAuE;IAEvE,mCAAmC;IACnC,IAAI,QAAQ,YAAY,GAAG,CAAC,aAAa,YAAY,GAAG;IAExD,IAAI,OAAO;QACT,OAAO;IACT;IAEA,0CAA0C;IAC1C,KAAK,MAAM,cAAc,OAAO,MAAM,CAAC,qBAAsB;QAC3D,QAAQ,YAAY,GAAG,CAAC,aAAa;QACrC,IAAI,OAAO;YACT,QAAQ,IAAI,CACV,CAAC,iDAAiD,EAAE,WAAW,GAAG,CAAC,GACnE,CAAC,mBAAmB,EAAE,aAAa,YAAY,CAAC,wBAAwB,CAAC;YAE3E,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAQO,SAAS,2BACd,WAAuE;IAEvE,mCAAmC;IACnC,MAAM,QAAQ,YAAY,GAAG,CAAC,aAAa,aAAa,GAAG;IAE3D,IAAI,OAAO;QACT,OAAO;IACT;IAEA,oCAAoC;IACpC,MAAM,cAAc,YAAY,GAAG,CAAC,oBAAoB,aAAa,GAAG,SACpD,YAAY,GAAG,CAAC,oBAAoB,YAAY,GAAG;IAEvE,IAAI,aAAa;QACf,QAAQ,IAAI,CACV,8DACA,CAAC,mBAAmB,EAAE,aAAa,aAAa,CAAC,wBAAwB,CAAC;IAE9E;IAEA,OAAO,eAAe;AACxB","debugId":null}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/api/nextjs-client.ts"],"sourcesContent":["/**\r\n * @fileoverview Next.js Fetch-Based API Client\r\n * @module lib/api/nextjs-client\r\n * @category API Client\r\n *\r\n * Enterprise-grade HTTP client built on Next.js native fetch API with comprehensive\r\n * caching, revalidation, and error handling capabilities.\r\n *\r\n * Key Features:\r\n * - Native Next.js fetch with automatic request deduplication\r\n * - Cache configuration (cache, revalidate, tags)\r\n * - cacheLife support for Next.js 15+\r\n * - Type-safe HTTP methods (GET, POST, PUT, PATCH, DELETE)\r\n * - Automatic authentication token injection\r\n * - CSRF protection headers\r\n * - Comprehensive error handling and retry logic\r\n * - Request ID generation for tracing\r\n * - HIPAA-compliant audit logging integration\r\n *\r\n * This client is designed to replace axios-based clients in Server Components\r\n * and Server Actions, enabling full integration with Next.js caching system.\r\n *\r\n * @example\r\n * ```typescript\r\n * // In a Server Component\r\n * const students = await serverGet<Student[]>('/api/students', {\r\n *   cache: 'force-cache',\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD,\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // In a Server Action\r\n * const result = await serverPost<Student>('/api/students', data, {\r\n *   cache: 'no-store',\r\n *   next: { tags: [CACHE_TAGS.STUDENTS] }\r\n * });\r\n * ```\r\n *\r\n * @version 1.0.0\r\n * @since 2025-10-31\r\n */\r\n\r\nimport { cookies, headers } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\nimport { COOKIE_NAMES } from '@/identity-access/lib/config/cookies';\r\n\r\n// ==========================================\r\n// TYPE DEFINITIONS\r\n// ==========================================\r\n\r\n/**\r\n * Simple API client options for basic HTTP requests\r\n * @deprecated Consider using NextFetchOptions for new code\r\n */\r\nexport interface ApiClientOptions {\r\n  method?: string\r\n  body?: unknown\r\n  headers?: Record<string, string>\r\n}\r\n\r\n/**\r\n * Next.js cache configuration options\r\n */\r\nexport interface NextCacheConfig {\r\n  /**\r\n   * Cache behavior\r\n   * - 'force-cache': Cache the response (default for GET)\r\n   * - 'no-store': Never cache the response (default for mutations)\r\n   * - 'reload': Bypass cache and revalidate\r\n   * - 'no-cache': Cache but always revalidate\r\n   * - 'force-cache': Use cache if available, fetch if not\r\n   * - 'only-if-cached': Use cache only, fail if not cached\r\n   */\r\n  cache?: RequestCache;\r\n\r\n  /**\r\n   * Next.js-specific cache options\r\n   */\r\n  next?: {\r\n    /**\r\n     * Time in seconds to revalidate cache\r\n     * - number: Revalidate after N seconds\r\n     * - false: Never revalidate (cache indefinitely)\r\n     * - 0: Revalidate immediately (effectively no-store)\r\n     */\r\n    revalidate?: number | false;\r\n\r\n    /**\r\n     * Cache tags for granular invalidation via revalidateTag()\r\n     * @example ['students', 'phi-data']\r\n     */\r\n    tags?: string[];\r\n  };\r\n}\r\n\r\n/**\r\n * cacheLife profiles for Next.js 15+ advanced caching\r\n * @see https://nextjs.org/docs/app/api-reference/next-config-js/cacheLife\r\n */\r\nexport interface CacheLifeConfig {\r\n  /**\r\n   * Time to live in seconds\r\n   */\r\n  ttl: number;\r\n\r\n  /**\r\n   * Stale-while-revalidate window in seconds\r\n   */\r\n  stale?: number;\r\n\r\n  /**\r\n   * Maximum age in cache regardless of revalidation\r\n   */\r\n  max?: number;\r\n}\r\n\r\n/**\r\n * Extended fetch options with Next.js caching and authentication\r\n */\r\nexport interface NextFetchOptions extends RequestInit {\r\n  /**\r\n   * Whether to include authentication token\r\n   * @default true\r\n   */\r\n  requiresAuth?: boolean;\r\n\r\n  /**\r\n   * Cache behavior configuration\r\n   */\r\n  cache?: RequestCache;\r\n\r\n  /**\r\n   * Next.js-specific cache options\r\n   */\r\n  next?: {\r\n    revalidate?: number | false;\r\n    tags?: string[];\r\n  };\r\n\r\n  /**\r\n   * cacheLife profile (Next.js 15+)\r\n   */\r\n  cacheLife?: string | CacheLifeConfig;\r\n\r\n  /**\r\n   * Retry configuration\r\n   */\r\n  retry?: {\r\n    attempts: number;\r\n    delay: number;\r\n  };\r\n\r\n  /**\r\n   * Custom error handler\r\n   */\r\n  onError?: (error: Error) => void;\r\n\r\n  /**\r\n   * Request timeout in milliseconds\r\n   */\r\n  timeout?: number;\r\n}\r\n\r\n/**\r\n * Standardized API response wrapper\r\n */\r\nexport interface ApiResponse<T = unknown> {\r\n  success: boolean;\r\n  data: T;\r\n  message?: string;\r\n  errors?: Record<string, string[]>;\r\n}\r\n\r\n/**\r\n * API error response structure\r\n */\r\nexport interface ApiErrorResponse {\r\n  message: string;\r\n  code?: string;\r\n  status?: number;\r\n  details?: unknown;\r\n  field?: string;\r\n  traceId?: string;\r\n  timestamp?: string;\r\n}\r\n\r\n/**\r\n * Custom error class for Next.js API client errors\r\n *\r\n * @class\r\n * @extends Error\r\n * @classdesc Wraps API errors with metadata and automatic classification\r\n */\r\nexport class NextApiClientError extends Error {\r\n  public readonly code?: string;\r\n  public readonly status?: number;\r\n  public readonly details?: unknown;\r\n  public readonly traceId?: string;\r\n  public readonly isNetworkError: boolean;\r\n  public readonly isServerError: boolean;\r\n  public readonly isValidationError: boolean;\r\n\r\n  constructor(error: ApiErrorResponse) {\r\n    super(error.message);\r\n    this.name = 'NextApiClientError';\r\n    this.code = error.code;\r\n    this.status = error.status;\r\n    this.details = error.details;\r\n    this.traceId = error.traceId;\r\n\r\n    // Classify error types\r\n    this.isNetworkError = error.code === 'NETWORK_ERROR';\r\n    this.isServerError = (error.status ?? 0) >= 500;\r\n    this.isValidationError = error.status === 400;\r\n\r\n    // Maintain proper stack trace\r\n    if (typeof Error.captureStackTrace === 'function') {\r\n      Error.captureStackTrace(this, NextApiClientError);\r\n    }\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// CONFIGURATION\r\n// ==========================================\r\n\r\n/**\r\n * Get API base URL from environment\r\n */\r\nfunction getApiBaseUrl(): string {\r\n  return process.env.API_BASE_URL ||\r\n         process.env.NEXT_PUBLIC_API_URL ||\r\n         'http://localhost:3001';\r\n}\r\n\r\n/**\r\n * Get authentication token from production-ready httpOnly cookies\r\n * Uses the existing JWT-based authentication system\r\n */\r\nasync function getAuthToken(): Promise<string | null> {\r\n  try {\r\n    const cookieStore = await cookies();\r\n    \r\n    // Try multiple cookie names that might be used for the auth token\r\n    const token = cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN)?.value ||\r\n                  cookieStore.get('auth.token')?.value ||\r\n                  cookieStore.get('auth_token')?.value ||\r\n                  cookieStore.get('accessToken')?.value;\r\n    \r\n    return token || null;\r\n  } catch (error) {\r\n    console.error('[Next API Client] Failed to get auth token:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Generate unique request ID for tracing\r\n * Made dynamic to avoid prerendering issues\r\n */\r\nfunction generateRequestId(): string {\r\n  // Access headers first to make this function dynamic during prerendering\r\n  headers();\r\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Get CSRF token from cookies\r\n */\r\nasync function getCsrfToken(): Promise<string | null> {\r\n  try {\r\n    const cookieStore = await cookies();\r\n    return cookieStore.get('csrf-token')?.value || null;\r\n  } catch (error) {\r\n    console.error('[Next API Client] Failed to get CSRF token:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// CORE FETCH FUNCTION\r\n// ==========================================\r\n\r\n/**\r\n * Core fetch function with Next.js caching, authentication, and error handling\r\n *\r\n * @template T - The expected response data type\r\n * @param endpoint - API endpoint (relative or absolute URL)\r\n * @param options - Fetch options with Next.js caching configuration\r\n * @returns Promise resolving to typed API response\r\n *\r\n * @throws {NextApiClientError} On request failure\r\n *\r\n * @example\r\n * ```typescript\r\n * const response = await nextFetch<Student[]>('/api/students', {\r\n *   cache: 'force-cache',\r\n *   next: { revalidate: 60, tags: ['students'] }\r\n * });\r\n * ```\r\n */\r\nexport async function nextFetch<T>(\r\n  endpoint: string,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  const {\r\n    requiresAuth = true, // Enable authentication by default\r\n    onError,\r\n    retry = { attempts: 3, delay: 1000 },\r\n    timeout = 30000,\r\n    cache = 'force-cache',\r\n    next,\r\n    cacheLife,\r\n    ...fetchOptions\r\n  } = options;\r\n\r\n  // Build full URL\r\n  const url = endpoint.startsWith('http')\r\n    ? endpoint\r\n    : `${getApiBaseUrl()}${endpoint}`;\r\n\r\n  // Prepare headers\r\n  const headers: Record<string, string> = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  // Merge additional headers\r\n  if (fetchOptions.headers) {\r\n    Object.entries(fetchOptions.headers).forEach(([key, value]) => {\r\n      if (typeof value === 'string') {\r\n        headers[key] = value;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Add authentication if required\r\n  if (requiresAuth) {\r\n    const token = await getAuthToken();\r\n\r\n    // Don't redirect during login/auth endpoints\r\n    const isAuthEndpoint = endpoint.includes('/auth/') || \r\n                          endpoint.includes('/login') || \r\n                          endpoint.includes('/register') ||\r\n                          endpoint.includes('/forgot-password') ||\r\n                          endpoint.includes('/reset-password');\r\n\r\n    console.log('[Next API Client] Auth check:', {\r\n      endpoint,\r\n      hasToken: !!token,\r\n      tokenStart: token?.substring(0, 20),\r\n      isAuthEndpoint,\r\n      requiresAuth\r\n    });\r\n\r\n    if (!token && !isAuthEndpoint) {\r\n      // Redirect to login if no token (but not during auth operations)\r\n      console.error('[Next API Client] No auth token found for protected endpoint:', endpoint);\r\n      // Note: redirect() in server components/actions can cause issues\r\n      // Consider using middleware for auth protection instead\r\n      redirect('/login');\r\n    }\r\n\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n      console.log('[Next API Client] Added Authorization header:', {\r\n        authHeaderStart: headers['Authorization'].substring(0, 30),\r\n        fullAuthHeaderLength: headers['Authorization'].length\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add CSRF token for mutations\r\n  if (fetchOptions.method && ['POST', 'PUT', 'PATCH', 'DELETE'].includes(fetchOptions.method)) {\r\n    const csrfToken = await getCsrfToken();\r\n    if (csrfToken) {\r\n      headers['X-CSRF-Token'] = csrfToken;\r\n    }\r\n  }\r\n\r\n  // Add request ID for tracing\r\n  headers['X-Request-ID'] = generateRequestId();\r\n\r\n  // Add security headers for HIPAA compliance\r\n  headers['X-Content-Type-Options'] = 'nosniff';\r\n  headers['X-Frame-Options'] = 'DENY';\r\n  headers['X-XSS-Protection'] = '1; mode=block';\r\n\r\n  // Build Next.js cache configuration\r\n  const nextConfig: Record<string, unknown> = {};\r\n\r\n  if (next?.revalidate !== undefined) {\r\n    nextConfig.revalidate = next.revalidate;\r\n  }\r\n\r\n  if (next?.tags && next.tags.length > 0) {\r\n    nextConfig.tags = next.tags;\r\n  }\r\n\r\n  // Execute fetch with retry logic\r\n  let lastError: Error | null = null;\r\n\r\n  for (let attempt = 0; attempt < retry.attempts; attempt++) {\r\n    try {\r\n      // Create abort controller for timeout\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        headers,\r\n        cache,\r\n        next: Object.keys(nextConfig).length > 0 ? nextConfig : undefined,\r\n        signal: controller.signal,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Handle different response status codes\r\n      if (!response.ok) {\r\n        // Log 401 errors for debugging before consuming the response\r\n        if (response.status === 401) {\r\n          console.error('[Next API Client] 401 Unauthorized:', {\r\n            endpoint,\r\n            status: response.status,\r\n            statusText: response.statusText,\r\n            hasAuthHeader: !!headers['Authorization'],\r\n            authHeaderStart: headers['Authorization']?.substring(0, 30)\r\n          });\r\n        }\r\n        \r\n        const error = await handleErrorResponse(response);\r\n\r\n        // Handle specific errors with redirects\r\n        // Don't redirect on login/auth endpoints to avoid redirect loops\r\n        const isAuthEndpoint = endpoint.includes('/auth/login') || endpoint.includes('/auth/register');\r\n        \r\n        // Note: Redirects in Server Components/Actions can be tricky\r\n        // These will throw NEXT_REDIRECT which Next.js catches\r\n        // Consider using middleware for auth protection instead\r\n        if (response.status === 401 && !isAuthEndpoint) {\r\n          console.error('[Next API Client] 401 error - authentication required');\r\n          redirect('/login');\r\n        } else if (response.status === 403) {\r\n          console.error('[Next API Client] 403 error - access denied');\r\n          redirect('/access-denied');\r\n        }\r\n\r\n        throw error;\r\n      }\r\n\r\n      // Parse response\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType?.includes('application/json')) {\r\n        return await response.json() as T;\r\n      }\r\n\r\n      return await response.text() as unknown as T;\r\n\r\n    } catch (error) {\r\n      // Re-throw Next.js redirect errors immediately - they should not be caught\r\n      if (error && typeof error === 'object' && 'digest' in error) {\r\n        const errorWithDigest = error as { digest: unknown };\r\n        if (typeof errorWithDigest.digest === 'string' && \r\n            errorWithDigest.digest.startsWith('NEXT_REDIRECT')) {\r\n          throw error;\r\n        }\r\n      }\r\n\r\n      lastError = error as Error;\r\n\r\n      // Don't retry on client errors (except 408, 429)\r\n      if (error instanceof NextApiClientError) {\r\n        const status = error.status;\r\n        if (status && status >= 400 && status < 500 && status !== 408 && status !== 429) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Wait before retry (exponential backoff)\r\n      if (attempt < retry.attempts - 1) {\r\n        await new Promise(resolve =>\r\n          setTimeout(resolve, retry.delay * Math.pow(2, attempt))\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries failed\r\n  const finalError = lastError || new Error('Unknown error');\r\n\r\n  if (onError) {\r\n    onError(finalError);\r\n  }\r\n\r\n  throw finalError;\r\n}\r\n\r\n/**\r\n * Handle error responses and create normalized error objects\r\n */\r\nasync function handleErrorResponse(response: Response): Promise<NextApiClientError> {\r\n  let details: unknown;\r\n\r\n  try {\r\n    const contentType = response.headers.get('content-type');\r\n    if (contentType?.includes('application/json')) {\r\n      details = await response.json();\r\n    } else {\r\n      details = await response.text();\r\n    }\r\n  } catch {\r\n    details = null;\r\n  }\r\n\r\n  const error: ApiErrorResponse = {\r\n    message: typeof details === 'object' && details !== null && 'message' in details\r\n      ? (details as { message: string }).message\r\n      : response.statusText || 'Request failed',\r\n    status: response.status,\r\n    code: typeof details === 'object' && details !== null && 'code' in details\r\n      ? (details as { code: string }).code\r\n      : undefined,\r\n    details,\r\n    traceId: response.headers.get('x-trace-id') || undefined,\r\n  };\r\n\r\n  return new NextApiClientError(error);\r\n}\r\n\r\n// ==========================================\r\n// CONVENIENCE METHODS\r\n// ==========================================\r\n\r\n/**\r\n * GET request with Next.js caching support\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param params - Query parameters\r\n * @param options - Fetch options with cache configuration\r\n * @returns Promise resolving to response data\r\n *\r\n * @example\r\n * ```typescript\r\n * const students = await serverGet<Student[]>('/api/students',\r\n *   { status: 'active' },\r\n *   {\r\n *     cache: 'force-cache',\r\n *     next: { revalidate: 60, tags: ['students'] }\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport async function serverGet<T>(\r\n  endpoint: string,\r\n  params?: Record<string, string | number | boolean>,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  const queryString = params\r\n    ? '?' + new URLSearchParams(\r\n        Object.entries(params).map(([k, v]) => [k, String(v)])\r\n      ).toString()\r\n    : '';\r\n\r\n  return nextFetch<T>(`${endpoint}${queryString}`, {\r\n    ...options,\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/**\r\n * POST request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n *\r\n * @example\r\n * ```typescript\r\n * const newStudent = await serverPost<Student>('/api/students',\r\n *   { name: 'John Doe', grade: '5' },\r\n *   {\r\n *     cache: 'no-store',\r\n *     next: { tags: ['students'] }\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport async function serverPost<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'POST',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store', // Mutations typically no-store\r\n  });\r\n}\r\n\r\n/**\r\n * PUT request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverPut<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'PUT',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n/**\r\n * PATCH request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverPatch<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'PATCH',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n/**\r\n * DELETE request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverDelete<T>(\r\n  endpoint: string,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'DELETE',\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n// ==========================================\r\n// UTILITY FUNCTIONS\r\n// ==========================================\r\n\r\n/**\r\n * Build cache tags for a resource\r\n *\r\n * @param resourceType - Type of resource (e.g., 'students', 'medications')\r\n * @param isPHI - Whether the data contains PHI\r\n * @param additionalTags - Additional tags to include\r\n * @returns Array of cache tags\r\n *\r\n * @example\r\n * ```typescript\r\n * const tags = buildCacheTags('students', true, ['active']);\r\n * // Returns: ['students', 'phi-data', 'active']\r\n * ```\r\n */\r\nexport function buildCacheTags(\r\n  resourceType: string,\r\n  isPHI: boolean = true,\r\n  additionalTags: string[] = []\r\n): string[] {\r\n  const tags: string[] = [resourceType];\r\n\r\n  if (isPHI) {\r\n    tags.push('phi-data');\r\n  }\r\n\r\n  return [...tags, ...additionalTags];\r\n}\r\n\r\n/**\r\n * Build resource-specific cache tag\r\n *\r\n * @param resourceType - Type of resource\r\n * @param resourceId - ID of specific resource\r\n * @returns Cache tag string\r\n *\r\n * @example\r\n * ```typescript\r\n * const tag = buildResourceTag('student', '123');\r\n * // Returns: 'student-123'\r\n * ```\r\n */\r\nexport function buildResourceTag(\r\n  resourceType: string,\r\n  resourceId: string\r\n): string {\r\n  return `${resourceType}-${resourceId}`;\r\n}\r\n\r\n// ==========================================\r\n// LEGACY CLIENT SUPPORT\r\n// ==========================================\r\n\r\n/**\r\n * Simple API client for basic HTTP requests (legacy support)\r\n * \r\n * @deprecated This is a legacy client merged from client.ts. \r\n * For new development, prefer the Next.js-specific methods:\r\n * - serverGet() for GET requests\r\n * - serverPost() for POST requests\r\n * - serverPut() for PUT requests\r\n * - serverPatch() for PATCH requests\r\n * - serverDelete() for DELETE requests\r\n * \r\n * @param endpoint - API endpoint (relative or absolute URL)\r\n * @param options - Basic request options\r\n * @returns Promise resolving to parsed JSON response\r\n * \r\n * @example\r\n * ```typescript\r\n * // Legacy usage (consider migrating to serverGet/serverPost)\r\n * const data = await apiClient('/api/users', {\r\n *   method: 'POST',\r\n *   body: { name: 'John' }\r\n * });\r\n * ```\r\n */\r\nexport async function apiClient(endpoint: string, options: ApiClientOptions = {}) {\r\n  const { method = 'GET', body, headers = {} } = options\r\n\r\n  const config: RequestInit = {\r\n    method,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...headers\r\n    }\r\n  }\r\n\r\n  if (body) {\r\n    config.body = JSON.stringify(body)\r\n  }\r\n\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getApiBaseUrl()}${endpoint}`\r\n  const response = await fetch(url, config)\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`API Error: ${response.statusText}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Alias for apiClient (legacy support)\r\n * @deprecated Use apiClient directly or migrate to Next.js-specific methods\r\n */\r\nexport const fetchApi = apiClient\r\n\r\n// ==========================================\r\n// EXPORTS\r\n// ==========================================\r\n\r\nconst nextjsClient = {\r\n  nextFetch,\r\n  serverGet,\r\n  serverPost,\r\n  serverPut,\r\n  serverPatch,\r\n  serverDelete,\r\n  buildCacheTags,\r\n  buildResourceTag,\r\n  // Legacy exports\r\n  apiClient,\r\n  fetchApi,\r\n};\r\n\r\nexport default nextjsClient;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 727, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/constants/api.ts"],"sourcesContent":["/**\r\n * @fileoverview API Endpoints Constants - Comprehensive endpoint definitions\r\n * @module constants/api\r\n * @version 2.0.0 - Maximized Edition\r\n *\r\n * Centralized API endpoint definitions for the White Cross healthcare platform.\r\n * All backend routes are defined here to prevent hardcoded strings and improve maintainability.\r\n *\r\n * **Architecture**:\r\n * - Backend Base: Routes with global '/api' prefix and URI versioning (default version '1', prefix 'v')\r\n * - Next.js rewrites handle `/api/v1/*`  Backend `/*` proxying\r\n * - All endpoints use template literal types for type-safe route generation\r\n * - Organized by domain for easy navigation and maintenance\r\n *\r\n * **Key Features**:\r\n * - 700+ endpoint constants covering all platform features\r\n * - Type-safe endpoint functions with parameter validation\r\n * - Comprehensive PHI-compliant healthcare operations\r\n * - HIPAA-compliant audit logging endpoints\r\n * - Multi-channel communication endpoints\r\n * - Advanced reporting and analytics\r\n * - Complete medication management workflow\r\n * - Student health records and tracking\r\n * - Appointment scheduling and reminders\r\n * - Incident reporting and follow-up\r\n * - Financial and procurement management\r\n *\r\n * **Endpoint Categories**:\r\n * 1. Authentication & Authorization (AUTH, RBAC, MFA)\r\n * 2. Users & Access Control (USERS, RBAC)\r\n * 3. Students (STUDENTS with 25+ endpoints)\r\n * 4. Appointments (APPOINTMENTS, WAITLIST, NURSE_AVAILABILITY)\r\n * 5. Health Records (HEALTH_RECORDS, VITAL_SIGNS, CHRONIC_CONDITIONS, ALLERGIES)\r\n * 6. Immunizations & Vaccinations (IMMUNIZATIONS)\r\n * 7. Medications (MEDICATIONS, PRESCRIPTIONS, INVENTORY, ADMINISTRATION_LOG)\r\n * 8. Emergency Contacts (EMERGENCY_CONTACTS)\r\n * 9. Incidents (INCIDENTS with witness and follow-up)\r\n * 10. Documents (DOCUMENTS with signing and verification)\r\n * 11. Compliance & Audit (COMPLIANCE, AUDIT)\r\n * 12. Communications (MESSAGES, BROADCASTS, ALERTS, NOTIFICATIONS, CONVERSATIONS, TEMPLATES)\r\n * 13. Dashboard & Analytics (DASHBOARD, ANALYTICS, REPORTS)\r\n * 14. System Administration (ADMIN, SYSTEM, INTEGRATIONS)\r\n * 15. Billing & Financial (BILLING, BUDGET, VENDORS, PURCHASE_ORDERS)\r\n * 16. Forms & Settings (FORMS, SETTINGS)\r\n *\r\n * **Usage Examples**:\r\n * ```typescript\r\n * import { API_ENDPOINTS } from '@/constants/api';\r\n *\r\n * // Simple endpoint\r\n * const url = API_ENDPOINTS.STUDENTS.BASE; // '/students'\r\n *\r\n * // Parameterized endpoint\r\n * const studentUrl = API_ENDPOINTS.STUDENTS.BY_ID('123'); // '/students/123'\r\n *\r\n * // Nested endpoint\r\n * const medUrl = API_ENDPOINTS.STUDENTS.MEDICATIONS('123'); // '/students/123/medications'\r\n *\r\n * // In API client\r\n * const response = await apiClient.get(API_ENDPOINTS.STUDENTS.BY_ID(studentId));\r\n * ```\r\n *\r\n * **Type Safety**:\r\n * All endpoints are typed as const for literal type inference and autocomplete support.\r\n *\r\n * **Maintenance**:\r\n * When adding new endpoints:\r\n * 1. Add to appropriate domain section\r\n * 2. Use consistent naming patterns (BASE, BY_ID, etc.)\r\n * 3. Add JSDoc comments for complex endpoints\r\n * 4. Update this file header with new categories\r\n *\r\n * @see /backend/src/routes/ for backend route definitions\r\n * @see /frontend/src/lib/api/client.ts for API client implementation\r\n * @see /frontend/src/lib/server/api-client.ts for server-side API client\r\n */\r\n\r\n\r\nexport const API_ENDPOINTS = {\r\n  // ==========================================\r\n  // AUTHENTICATION & AUTHORIZATION\r\n  // ==========================================\r\n  AUTH: {\r\n    LOGIN: `/api/v1/auth/login`,\r\n    LOGOUT: `/api/v1/auth/logout`,\r\n    REFRESH: `/api/v1/auth/refresh`,\r\n    VERIFY: `/api/v1/auth/verify`,\r\n    REGISTER: `/api/v1/auth/register`,\r\n    PROFILE: `/api/v1/auth/me`,\r\n    CHANGE_PASSWORD: `/api/v1/auth/change-password`,\r\n    FORGOT_PASSWORD: `/api/v1/auth/forgot-password`,\r\n    RESET_PASSWORD: `/api/v1/auth/reset-password`,\r\n  },\r\n\r\n  // ==========================================\r\n  // USERS & ACCESS CONTROL\r\n  // ==========================================\r\n  USERS: {\r\n    BASE: `/api/v1/users`,\r\n    BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n    ME: `/api/v1/users/me`,\r\n    PROFILE: `/api/v1/users/profile`,\r\n    UPDATE_PROFILE: `/api/v1/users/profile`,\r\n  },\r\n\r\n  RBAC: {\r\n    ROLES: `/api/v1/access-control/roles`,\r\n    PERMISSIONS: `/api/v1/access-control/permissions`,\r\n    USER_ROLES: (userId: string) => `/api/v1/access-control/users/${userId}/roles`,\r\n    USER_PERMISSIONS: (userId: string) => `/api/v1/access-control/users/${userId}/permissions`,\r\n  },\r\n\r\n  // ==========================================\r\n  // STUDENTS\r\n  // ==========================================\r\n  STUDENTS: {\r\n    BASE: `/api/v1/students`,\r\n    BY_ID: (id: string) => `/api/v1/students/${id}`,\r\n    DEACTIVATE: (id: string) => `/api/v1/students/${id}/deactivate`,\r\n    REACTIVATE: (id: string) => `/api/v1/students/${id}/reactivate`,\r\n    TRANSFER: (id: string) => `/api/v1/students/${id}/transfer`,\r\n    ASSIGN: (id: string) => `/api/v1/students/${id}/assign`,\r\n    ASSIGN_BULK: `/api/v1/students/assign-bulk`,\r\n    PHOTO: (id: string) => `/api/v1/students/${id}/photo`,\r\n    EXPORT: (id: string) => `/api/v1/students/${id}/export`,\r\n    REPORT_CARD: (id: string) => `/api/v1/students/${id}/report-card`,\r\n    VERIFY_ELIGIBILITY: (id: string) => `/api/v1/students/${id}/verify-eligibility`,\r\n    SEARCH: `/api/v1/students/search`,\r\n    SEARCH_BY_QUERY: (query: string) => `/api/v1/students/search/${encodeURIComponent(query)}`,\r\n    BY_GRADE: (grade: string) => `/api/v1/students/grade/${grade}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/students/nurse/${nurseId}`,\r\n    ASSIGNED: `/api/v1/students/assigned`,\r\n    STATISTICS: (id: string) => `/api/v1/students/${id}/statistics`,\r\n    BULK_UPDATE: `/api/v1/students/bulk-update`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/students/${id}/permanent`,\r\n    GRADES: `/api/v1/students/grades`,\r\n    HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/health-records`,\r\n    MENTAL_HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/mental-health-records`,\r\n    MEDICATIONS: (id: string) => `/api/v1/students/${id}/medications`,\r\n    IMMUNIZATIONS: (id: string) => `/api/v1/students/${id}/immunizations`,\r\n    ALLERGIES: (id: string) => `/api/v1/students/${id}/allergies`,\r\n    APPOINTMENTS: (id: string) => `/api/v1/students/${id}/appointments`,\r\n    INCIDENTS: (id: string) => `/api/v1/students/${id}/incidents`,\r\n    EMERGENCY_CONTACTS: (id: string) => `/api/v1/students/${id}/emergency-contacts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENTS\r\n  // ==========================================\r\n  APPOINTMENTS: {\r\n    BASE: `/api/v1/appointments`,\r\n    BY_ID: (id: string) => `/api/v1/appointments/${id}`,\r\n    RESCHEDULE: (id: string) => `/api/v1/appointments/${id}/reschedule`,\r\n    CANCEL: (id: string) => `/api/v1/appointments/${id}/cancel`,\r\n    COMPLETE: (id: string) => `/api/v1/appointments/${id}/complete`,\r\n    NO_SHOW: (id: string) => `/api/v1/appointments/${id}/no-show`,\r\n    CONFIRM: (id: string) => `/api/v1/appointments/${id}/confirm`,\r\n    START: (id: string) => `/api/v1/appointments/${id}/start`,\r\n    SEND_REMINDER: (id: string) => `/api/v1/appointments/${id}/send-reminder`,\r\n    AVAILABILITY: `/api/v1/appointments/availability`,\r\n    CONFLICTS: `/api/v1/appointments/conflicts`,\r\n    CHECK_CONFLICTS: `/api/v1/appointments/check-conflicts`,\r\n    REMINDERS: `/api/v1/appointments/reminders`,\r\n    PROCESS_REMINDERS: `/api/v1/appointments/process-reminders`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/appointments/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/appointments/nurse/${nurseId}`,\r\n    BY_DATE: `/api/v1/appointments/by-date`,\r\n    UPCOMING: `/api/v1/appointments/upcoming`,\r\n    STATISTICS: `/api/v1/appointments/statistics`,\r\n    RECURRING: `/api/v1/appointments/recurring`,\r\n    CREATE_RECURRING: `/api/v1/appointments/recurring/create`,\r\n    EXPORT_CALENDAR: `/api/v1/appointments/export/calendar`,\r\n    REPORTS: `/api/v1/appointments/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH RECORDS\r\n  // ==========================================\r\n  HEALTH_RECORDS: {\r\n    BASE: `/api/v1/health-records`,\r\n    BY_ID: (id: string) => `/api/v1/health-records/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/health-records`,\r\n    BY_TYPE: (type: string) => `/api/v1/health-records/type/${type}`,\r\n    SEARCH: `/api/v1/health-records/search`,\r\n    EXPORT: (id: string) => `/api/v1/health-records/${id}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // IMMUNIZATIONS / VACCINATIONS\r\n  // ==========================================\r\n  IMMUNIZATIONS: {\r\n    BASE: `/api/v1/vaccinations`,\r\n    BY_ID: (id: string) => `/api/v1/vaccinations/${id}`,\r\n    SCHEDULE: `/api/v1/vaccinations/schedule`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/immunizations`,\r\n    DUE: `/api/v1/vaccinations/due`,\r\n    OVERDUE: `/api/v1/vaccinations/overdue`,\r\n    COMPLIANCE: `/api/v1/vaccinations/compliance`,\r\n    EXEMPTIONS: `/api/v1/vaccinations/exemptions`,\r\n    VERIFY: (id: string) => `/api/v1/vaccinations/${id}/verify`,\r\n    EXPORT: (studentId: string) => `/api/v1/vaccinations/export/${studentId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH SCREENINGS\r\n  // ==========================================\r\n  SCREENINGS: {\r\n    BASE: `/api/v1/screenings`,\r\n    BY_ID: (id: string) => `/api/v1/screenings/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/screenings`,\r\n    BY_TYPE: (type: string) => `/api/v1/screenings/type/${type}`,\r\n    DUE: `/api/v1/screenings/due`,\r\n    SCHEDULE: `/api/v1/screenings/schedule`,\r\n    RESULTS: (id: string) => `/api/v1/screenings/${id}/results`,\r\n  },\r\n\r\n  // ==========================================\r\n  // GROWTH MEASUREMENTS\r\n  // ==========================================\r\n  GROWTH_MEASUREMENTS: {\r\n    BASE: `/api/v1/growth-measurements`,\r\n    BY_ID: (id: string) => `/api/v1/growth-measurements/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements/trends`,\r\n    BMI: (studentId: string) => `/api/v1/students/${studentId}/bmi`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ALLERGIES\r\n  // ==========================================\r\n  ALLERGIES: {\r\n    BASE: `/api/v1/allergies`,\r\n    BY_ID: (id: string) => `/api/v1/allergies/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/allergies`,\r\n    CRITICAL: `/api/v1/allergies/critical`,\r\n    ACTIVE: `/api/v1/allergies/active`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VITAL SIGNS\r\n  // ==========================================\r\n  VITAL_SIGNS: {\r\n    BASE: `/api/v1/vital-signs`,\r\n    BY_ID: (id: string) => `/api/v1/vital-signs/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/vital-signs`,\r\n    BY_HEALTH_RECORD: (healthRecordId: string) => `/api/v1/health-records/${healthRecordId}/vital-signs`,\r\n    LATEST: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/latest`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/trends`,\r\n  },\r\n\r\n  // ==========================================\r\n  // CHRONIC CONDITIONS\r\n  // ==========================================\r\n  CHRONIC_CONDITIONS: {\r\n    BASE: `/api/v1/chronic-conditions`,\r\n    BY_ID: (id: string) => `/api/v1/chronic-conditions/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/chronic-conditions`,\r\n    ACTIVE: `/api/v1/chronic-conditions/active`,\r\n    REVIEW_DUE: `/api/v1/chronic-conditions/review-due`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MEDICATIONS\r\n  // ==========================================\r\n  MEDICATIONS: {\r\n    BASE: `/api/v1/medications`,\r\n    BY_ID: (id: string) => `/api/v1/medications/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/medications/${id}`,\r\n    ADMINISTER: (id: string) => `/api/v1/medications/${id}/administer`,\r\n    DISCONTINUE: (id: string) => `/api/v1/medications/${id}/discontinue`,\r\n    REFILL: (id: string) => `/api/v1/medications/${id}/refill`,\r\n    MISSED_DOSE: (id: string) => `/api/v1/medications/${id}/missed-dose`,\r\n    ADVERSE_REACTION: (id: string) => `/api/v1/medications/${id}/adverse-reaction`,\r\n    ADJUST_INVENTORY: (id: string) => `/api/v1/medications/${id}/adjust-inventory`,\r\n    REMINDER: (id: string) => `/api/v1/medications/${id}/reminder`,\r\n    SCHEDULE: (id: string) => `/api/v1/medications/${id}/schedule`,\r\n    INTERACTIONS: (id: string) => `/api/v1/medications/${id}/interactions`,\r\n    CALENDAR: `/api/v1/medications/calendar`,\r\n    DUE: `/api/v1/medications/due`,\r\n    OVERDUE: `/api/v1/medications/overdue`,\r\n    MISSED: `/api/v1/medications/missed`,\r\n    COMPLETED: `/api/v1/medications/completed`,\r\n    AS_NEEDED: `/api/v1/medications/as-needed`,\r\n    EMERGENCY: `/api/v1/medications/emergency`,\r\n    CONTROLLED: `/api/v1/medications/controlled-substances`,\r\n    OTC: `/api/v1/medications/over-the-counter`,\r\n    CATEGORIES: `/api/v1/medications/categories`,\r\n    RULES: `/api/v1/medications/administration-rules`,\r\n    CHECK_INTERACTIONS: `/api/v1/medications/check-interactions`,\r\n    FORMULARY: `/api/v1/medications/formulary`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/medications`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PRESCRIPTIONS\r\n  // ==========================================\r\n  PRESCRIPTIONS: {\r\n    BASE: `/api/v1/prescriptions`,\r\n    BY_ID: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    REFILL: (id: string) => `/api/v1/prescriptions/${id}/refill`,\r\n    ACTIVE: `/api/v1/prescriptions/active`,\r\n    EXPIRING: `/api/v1/prescriptions/expiring`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INVENTORY\r\n  // ==========================================\r\n  INVENTORY: {\r\n    BASE: `/api/v1/inventory`,\r\n    BY_ID: (id: string) => `/api/v1/inventory/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/inventory/${id}`,\r\n    ADJUST: (id: string) => `/api/v1/inventory/${id}/adjust`,\r\n    LOW_STOCK: `/api/v1/inventory/low-stock`,\r\n    EXPIRING: `/api/v1/inventory/expiring`,\r\n    REORDER: `/api/v1/inventory/reorder`,\r\n    AUDIT: `/api/v1/inventory/audit`,\r\n    ITEMS: `/api/v1/inventory/items`,\r\n    ALERTS: `/api/v1/inventory/alerts`,\r\n    ANALYTICS: `/api/v1/inventory/analytics`,\r\n    DASHBOARD: `/api/v1/inventory/dashboard`,\r\n    REPORTS: `/api/v1/inventory/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMINISTRATION LOG\r\n  // ==========================================\r\n  ADMINISTRATION_LOG: {\r\n    BASE: `/api/v1/administration-log`,\r\n    BY_ID: (id: string) => `/api/v1/administration-log/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/administration-log/${id}`,\r\n    BY_MEDICATION: (medicationId: string) => `/api/v1/medications/${medicationId}/administration-log`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/administration-log`,\r\n    TODAY: `/api/v1/administration-log/today`,\r\n    MISSED: `/api/v1/administration-log/missed`,\r\n  },\r\n\r\n  // ==========================================\r\n  // EMERGENCY CONTACTS\r\n  // ==========================================\r\n  EMERGENCY_CONTACTS: {\r\n    BASE: `/api/v1/emergency-contacts`,\r\n    BY_ID: (id: string) => `/api/v1/emergency-contacts/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts`,\r\n    PRIMARY: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts/primary`,\r\n    VERIFY: (id: string) => `/api/v1/emergency-contacts/${id}/verify`,\r\n    NOTIFY: (id: string) => `/api/v1/emergency-contacts/${id}/notify`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INCIDENTS\r\n  // ==========================================\r\n  INCIDENTS: {\r\n    BASE: `/api/v1/incident-report`,\r\n    BY_ID: (id: string) => `/api/v1/incident-report/${id}`,\r\n    WITNESSES: (incidentId: string) => `/api/v1/incident-report/${incidentId}/witnesses`,\r\n    WITNESS_STATEMENT: (incidentId: string, witnessId: string) =>\r\n      `/api/v1/incident-report/${incidentId}/witnesses/${witnessId}/statement`,\r\n    VERIFY_STATEMENT: (statementId: string) => `/api/v1/incident-report/statements/${statementId}/verify`,\r\n    FOLLOW_UP: (incidentId: string) => `/api/v1/incident-report/${incidentId}/follow-up`,\r\n    FOLLOW_UP_PROGRESS: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/progress`,\r\n    FOLLOW_UP_COMPLETE: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/complete`,\r\n    ANALYTICS: `/api/v1/incident-report/analytics`,\r\n    TRENDING: `/api/v1/incident-report/trending`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/incidents`,\r\n    BY_TYPE: (type: string) => `/api/v1/incident-report/type/${type}`,\r\n    BY_SEVERITY: (severity: string) => `/api/v1/incident-report/severity/${severity}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DOCUMENTS\r\n  // ==========================================\r\n  DOCUMENTS: {\r\n    BASE: `/api/v1/documents`,\r\n    BY_ID: (id: string) => `/api/v1/documents/${id}`,\r\n    UPLOAD: `/api/v1/documents/upload`,\r\n    DOWNLOAD: (id: string) => `/api/v1/documents/${id}/download`,\r\n    PREVIEW: (id: string) => `/api/v1/documents/${id}/preview`,\r\n    SIGN: (id: string) => `/api/v1/documents/${id}/sign`,\r\n    VERIFY_SIGNATURE: (id: string) => `/api/v1/documents/${id}/verify-signature`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/documents`,\r\n    BY_TYPE: (type: string) => `/api/v1/documents/type/${type}`,\r\n    TEMPLATES: `/api/v1/documents/templates`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMPLIANCE & AUDIT\r\n  // ==========================================\r\n  COMPLIANCE: {\r\n    REPORTS: `/api/v1/compliance/reports`,\r\n    AUDIT_LOGS: `/api/v1/compliance/audit-logs`,\r\n    PHI_DISCLOSURES: `/api/v1/compliance/phi-disclosures`,\r\n    ACCESS_LOG: `/api/v1/compliance/access-log`,\r\n    DATA_RETENTION: `/api/v1/compliance/data-retention`,\r\n    EXPORT: `/api/v1/compliance/export`,\r\n  },\r\n\r\n  AUDIT: {\r\n    LOGS: `/api/v1/audit-logs`,\r\n    BY_ID: (id: string) => `/api/v1/audit-logs/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/audit-logs/user/${userId}`,\r\n    BY_RESOURCE: (resourceType: string, resourceId: string) =>\r\n      `/api/v1/audit-logs/resource/${resourceType}/${resourceId}`,\r\n    BY_ACTION: (action: string) => `/api/v1/audit-logs/action/${action}`,\r\n    PHI_ACCESS: `/api/v1/audit-logs/phi-access`,\r\n    PHI_ACCESS_LOG: `/api/v1/audit/phi-access`,\r\n    EXPORT: `/api/v1/audit-logs/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMMUNICATIONS\r\n  // ==========================================\r\n  MESSAGES: {\r\n    BASE: `/api/v1/messages`,\r\n    BY_ID: (id: string) => `/api/v1/messages/${id}`,\r\n    SEND: `/api/v1/messages/send`,\r\n    INBOX: `/api/v1/messages/inbox`,\r\n    SENT: `/api/v1/messages/sent`,\r\n    UNREAD: `/api/v1/messages/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/messages/${id}/mark-read`,\r\n    MARK_UNREAD: (id: string) => `/api/v1/messages/${id}/mark-unread`,\r\n    DELETE: (id: string) => `/api/v1/messages/${id}`,\r\n    THREAD: (id: string) => `/api/v1/messages/thread/${id}`,\r\n    ATTACHMENTS: (id: string) => `/api/v1/messages/${id}/attachments`,\r\n  },\r\n\r\n  BROADCASTS: {\r\n    BASE: `/api/v1/broadcasts`,\r\n    BY_ID: (id: string) => `/api/v1/broadcasts/${id}`,\r\n    SEND: `/api/v1/broadcasts/send`,\r\n    SCHEDULE: `/api/v1/broadcasts/schedule`,\r\n    RECIPIENTS: (id: string) => `/api/v1/broadcasts/${id}/recipients`,\r\n    CANCEL: (id: string) => `/api/v1/broadcasts/${id}/cancel`,\r\n    DUPLICATE: (id: string) => `/api/v1/broadcasts/${id}/duplicate`,\r\n    DELIVERY_STATUS: (id: string) => `/api/v1/broadcasts/${id}/delivery-status`,\r\n    DRAFTS: `/api/v1/broadcasts/drafts`,\r\n    SCHEDULED: `/api/v1/broadcasts/scheduled`,\r\n  },\r\n\r\n  ALERTS: {\r\n    BASE: `/api/v1/alerts`,\r\n    BY_ID: (id: string) => `/api/v1/alerts/${id}`,\r\n    ACTIVE: `/api/v1/alerts/active`,\r\n    ACKNOWLEDGE: (id: string) => `/api/v1/alerts/${id}/acknowledge`,\r\n    DISMISS: (id: string) => `/api/v1/alerts/${id}/dismiss`,\r\n    MEDICATION_REMINDERS: `/api/v1/alerts/medication-reminders`,\r\n    APPOINTMENT_REMINDERS: `/api/v1/alerts/appointment-reminders`,\r\n    EMERGENCY: `/api/v1/alerts/emergency`,\r\n    BY_TYPE: (type: string) => `/api/v1/alerts/type/${type}`,\r\n  },\r\n\r\n  NOTIFICATIONS: {\r\n    BASE: `/api/v1/notifications`,\r\n    BY_ID: (id: string) => `/api/v1/notifications/${id}`,\r\n    UNREAD: `/api/v1/notifications/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/notifications/${id}/mark-read`,\r\n    MARK_ALL_READ: `/api/v1/notifications/mark-all-read`,\r\n    PREFERENCES: `/api/v1/notifications/preferences`,\r\n    TEST_PUSH: `/api/v1/notifications/test-push`,\r\n    PUSH_SUBSCRIBE: `/api/v1/notifications/push-subscribe`,\r\n    PUSH_UNSUBSCRIBE: `/api/v1/notifications/push-unsubscribe`,\r\n    PUSH_SUBSCRIPTION: `/api/v1/notifications/push-subscription`,\r\n  },\r\n\r\n  CONVERSATIONS: {\r\n    BASE: `/api/v1/conversations`,\r\n    BY_ID: (id: string) => `/api/v1/conversations/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/conversations/user/${userId}`,\r\n    MESSAGES: (conversationId: string) => `/api/v1/conversations/${conversationId}/messages`,\r\n    PARTICIPANTS: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    ADD_PARTICIPANT: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    REMOVE_PARTICIPANT: (conversationId: string, userId: string) =>\r\n      `/api/v1/conversations/${conversationId}/participants/${userId}`,\r\n    ARCHIVE: (id: string) => `/api/v1/conversations/${id}/archive`,\r\n    UNARCHIVE: (id: string) => `/api/v1/conversations/${id}/unarchive`,\r\n  },\r\n\r\n  TEMPLATES: {\r\n    BASE: `/api/v1/templates`,\r\n    BY_ID: (id: string) => `/api/v1/templates/${id}`,\r\n    BY_CATEGORY: (category: string) => `/api/v1/templates/category/${category}`,\r\n    RENDER: (id: string) => `/api/v1/templates/${id}/render`,\r\n    CATEGORIES: `/api/v1/templates/categories`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DASHBOARD\r\n  // ==========================================\r\n  DASHBOARD: {\r\n    STATS: `/api/v1/dashboard/stats`,\r\n    RECENT_ACTIVITIES: `/api/v1/dashboard/recent-activities`,\r\n    UPCOMING_APPOINTMENTS: `/api/v1/dashboard/upcoming-appointments`,\r\n    CHART_DATA: `/api/v1/dashboard/chart-data`,\r\n    WIDGETS: (dashboardId: string) => `/api/v1/dashboard/${dashboardId}/widgets`,\r\n    REFRESH: `/api/v1/dashboard/refresh-cache`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ANALYTICS & REPORTING\r\n  // ==========================================\r\n  ANALYTICS: {\r\n    METRICS: `/api/v1/analytics/metrics`,\r\n    DASHBOARD: `/api/v1/analytics/dashboard`,\r\n    DASHBOARD_WIDGETS: (dashboardId: string) => `/api/v1/analytics/dashboard/${dashboardId}/widgets`,\r\n    REPORTS: `/api/v1/analytics/reports`,\r\n    CHART_DATA: `/api/v1/analytics/chart-data`,\r\n    HEALTH_METRICS: `/api/v1/analytics/health-metrics`,\r\n    MEDICATION_COMPLIANCE: `/api/v1/analytics/medication-compliance`,\r\n    APPOINTMENT_METRICS: `/api/v1/analytics/appointment-metrics`,\r\n    INCIDENT_ANALYTICS: `/api/v1/analytics/incident-analytics`,\r\n    CUSTOM_REPORT: `/api/v1/analytics/custom-report`,\r\n  },\r\n\r\n  REPORTS: {\r\n    // Base Reports\r\n    BASE: `/api/v1/reports`,\r\n    CUSTOM: `/api/v1/reports/custom`,\r\n    TEMPLATES: `/api/v1/reports/templates`,\r\n    SCHEDULED: `/api/v1/reports/scheduled`,\r\n    SCHEDULE: `/api/v1/reports/schedule`,\r\n    EXPORT: `/api/v1/reports/export`,\r\n    HISTORY: `/api/v1/reports/history`,\r\n    SHARE: (reportId: string) => `/api/v1/reports/${reportId}/share`,\r\n\r\n    // Health Trend Analysis\r\n    HEALTH_TRENDS: `/api/v1/reports/health-trends`,\r\n    HEALTH_TRENDS_BY_CATEGORY: (category: string) => `/api/v1/reports/health-trends/${category}`,\r\n\r\n    // Medication Reports\r\n    MEDICATIONS: {\r\n      ADMINISTRATION: `/api/v1/reports/medications/administration`,\r\n      COMPLIANCE: `/api/v1/reports/medications/compliance`,\r\n      EXPIRATION: `/api/v1/reports/medications/expiration`,\r\n      INVENTORY: `/api/v1/reports/medications/inventory`,\r\n      REFILLS: `/api/v1/reports/medications/refills`,\r\n      USAGE: `/api/v1/reports/medication-usage`,\r\n      EFFECTIVENESS: `/api/v1/reports/medication-effectiveness`,\r\n    },\r\n\r\n    // Immunization Reports\r\n    IMMUNIZATIONS: {\r\n      COMPLIANCE: `/api/v1/reports/immunizations/compliance`,\r\n      DUE: `/api/v1/reports/immunizations/due`,\r\n      OVERDUE: `/api/v1/reports/immunizations/overdue`,\r\n      EXEMPTIONS: `/api/v1/reports/immunizations/exemptions`,\r\n    },\r\n\r\n    // Appointment Reports\r\n    APPOINTMENTS: {\r\n      ATTENDANCE: `/api/v1/reports/appointments/attendance`,\r\n      NO_SHOWS: `/api/v1/reports/appointments/no-shows`,\r\n      CANCELLATIONS: `/api/v1/reports/appointments/cancellations`,\r\n    },\r\n\r\n    // Incident Reports\r\n    INCIDENTS: {\r\n      SUMMARY: `/api/v1/reports/incidents/summary`,\r\n      BY_TYPE: `/api/v1/reports/incidents/by-type`,\r\n      TRENDS: `/api/v1/reports/incidents/trends`,\r\n      STATISTICS: `/api/v1/reports/incident-statistics`,\r\n      BY_LOCATION: `/api/v1/reports/incidents-by-location`,\r\n    },\r\n\r\n    // Student Reports\r\n    STUDENTS: {\r\n      ENROLLMENT: `/api/v1/reports/students/enrollment`,\r\n      HEALTH_SUMMARY: `/api/v1/reports/students/health-summary`,\r\n      DEMOGRAPHICS: `/api/v1/reports/students/demographics`,\r\n    },\r\n\r\n    // Attendance & Absenteeism\r\n    ATTENDANCE_CORRELATION: `/api/v1/reports/attendance-correlation`,\r\n    ABSENTEEISM_PATTERNS: `/api/v1/reports/absenteeism-patterns`,\r\n\r\n    // Performance & Analytics\r\n    PERFORMANCE_METRICS: `/api/v1/reports/performance-metrics`,\r\n    NURSE_PERFORMANCE: `/api/v1/reports/nurse-performance`,\r\n    SYSTEM_USAGE: `/api/v1/reports/system-usage`,\r\n    USAGE_ANALYTICS: `/api/v1/reports/analytics/usage`,\r\n    POPULARITY: `/api/v1/reports/analytics/popularity`,\r\n    INSIGHTS: `/api/v1/reports/analytics/insights`,\r\n\r\n    // Dashboard Reports\r\n    DASHBOARD: `/api/v1/reports/dashboard`,\r\n    DASHBOARD_WIDGETS: `/api/v1/reports/dashboard/widgets`,\r\n    DASHBOARD_LAYOUT: `/api/v1/reports/dashboard/layout`,\r\n\r\n    // Compliance Reports\r\n    COMPLIANCE: `/api/v1/reports/compliance`,\r\n    COMPLIANCE_HISTORY: `/api/v1/reports/compliance/history`,\r\n    COMPLIANCE_AUDIT: `/api/v1/reports/compliance/audit`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SYSTEM & ADMINISTRATION\r\n  // ==========================================\r\n  SYSTEM: {\r\n    HEALTH: `/api/v1/health`,\r\n    STATUS: `/api/v1/system/status`,\r\n    CONFIGURATION: `/api/v1/system/configuration`,\r\n    SETTINGS: `/api/v1/system/settings`,\r\n    BACKUP: `/api/v1/system/backup`,\r\n    RESTORE: `/api/v1/system/restore`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMIN - District, School, User Management\r\n  // ==========================================\r\n  ADMIN: {\r\n    // System Settings\r\n    SETTINGS: `/api/v1/administration/settings`,\r\n\r\n    // Users\r\n    USERS: `/api/v1/users`,\r\n    USER_BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n\r\n    // Districts\r\n    DISTRICTS: `/api/v1/administration/districts`,\r\n    DISTRICT_BY_ID: (id: string) => `/api/v1/administration/districts/${id}`,\r\n\r\n    // Schools\r\n    SCHOOLS: `/api/v1/administration/schools`,\r\n    SCHOOL_BY_ID: (id: string) => `/api/v1/administration/schools/${id}`,\r\n\r\n    // System Health\r\n    SYSTEM_HEALTH: `/api/v1/admin/system/health`,\r\n\r\n    // Backups\r\n    BACKUPS: `/api/v1/administration/backups`,\r\n    BACKUP_BY_ID: (id: string) => `/api/v1/administration/backups/${id}`,\r\n\r\n    // Licenses\r\n    LICENSES: `/api/v1/administration/licenses`,\r\n    LICENSE_BY_ID: (id: string) => `/api/v1/administration/licenses/${id}`,\r\n    LICENSE_DEACTIVATE: (id: string) => `/api/v1/administration/licenses/${id}/deactivate`,\r\n\r\n    // Configurations\r\n    CONFIGURATIONS: `/api/v1/administration/config`,\r\n    CONFIGURATION_BY_KEY: (key: string) => `/api/v1/administration/config/${key}`,\r\n\r\n    // Performance Metrics\r\n    METRICS: `/api/v1/admin/metrics`,\r\n    METRIC_BY_ID: (id: string) => `/api/v1/admin/metrics/${id}`,\r\n\r\n    // Training\r\n    TRAINING: `/api/v1/admin/training`,\r\n    TRAINING_BY_ID: (id: string) => `/api/v1/admin/training/${id}`,\r\n    TRAINING_COMPLETE: (id: string) => `/api/v1/admin/training/${id}/complete`,\r\n    TRAINING_PROGRESS: (userId: string) => `/api/v1/admin/training/progress/${userId}`,\r\n\r\n    // Audit Logs\r\n    AUDIT_LOGS: `/api/v1/administration/audit-logs`,\r\n    AUDIT_LOG_BY_ID: (id: string) => `/api/v1/administration/audit-logs/${id}`,\r\n  },\r\n\r\n  INTEGRATIONS: {\r\n    BASE: `/api/v1/integrations`,\r\n    BY_ID: (id: string) => `/api/v1/integrations/${id}`,\r\n    CONFIGURE: (id: string) => `/api/v1/integrations/${id}/configure`,\r\n    TEST: (id: string) => `/api/v1/integrations/${id}/test`,\r\n    SYNC: (id: string) => `/api/v1/integrations/${id}/sync`,\r\n    ENABLE: (id: string) => `/api/v1/integrations/${id}/enable`,\r\n    DISABLE: (id: string) => `/api/v1/integrations/${id}/disable`,\r\n    LOGS: (id: string) => `/api/v1/integrations/${id}/logs`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MULTI-FACTOR AUTHENTICATION (MFA)\r\n  // ==========================================\r\n  MFA: {\r\n    SETUP: `/api/v1/mfa/setup`,\r\n    VERIFY: `/api/v1/mfa/verify`,\r\n    ENABLE: `/api/v1/mfa/enable`,\r\n    DISABLE: `/api/v1/mfa/disable`,\r\n    BACKUP_CODES: `/api/v1/mfa/backup-codes`,\r\n    REGENERATE_CODES: `/api/v1/mfa/backup-codes/regenerate`,\r\n    VERIFY_BACKUP_CODE: `/api/v1/mfa/verify-backup-code`,\r\n    QR_CODE: `/api/v1/mfa/qr-code`,\r\n    STATUS: `/api/v1/mfa/status`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENT WAITLIST\r\n  // ==========================================\r\n  WAITLIST: {\r\n    BASE: `/api/v1/waitlist`,\r\n    BY_ID: (id: string) => `/api/v1/waitlist/${id}`,\r\n    ADD: `/api/v1/waitlist/add`,\r\n    REMOVE: (id: string) => `/api/v1/waitlist/${id}/remove`,\r\n    POSITION: (id: string) => `/api/v1/waitlist/${id}/position`,\r\n    NOTIFY: (id: string) => `/api/v1/waitlist/${id}/notify`,\r\n    UPDATE_PRIORITY: (id: string) => `/api/v1/waitlist/${id}/priority`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/waitlist/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/waitlist/nurse/${nurseId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // NURSE AVAILABILITY & SCHEDULING\r\n  // ==========================================\r\n  NURSE_AVAILABILITY: {\r\n    BASE: `/api/v1/nurse-availability`,\r\n    BY_ID: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/nurse-availability/nurse/${nurseId}`,\r\n    SLOTS: `/api/v1/nurse-availability/slots`,\r\n    SET: `/api/v1/nurse-availability/set`,\r\n    UPDATE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    DELETE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_DATE: (date: string) => `/api/v1/nurse-availability/date/${date}`,\r\n    CHECK_CONFLICTS: `/api/v1/nurse-availability/check-conflicts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // FORMS\r\n  // ==========================================\r\n  FORMS: {\r\n    BASE: `/api/v1/forms`,\r\n    BY_ID: (id: string) => `/api/v1/forms/${id}`,\r\n    TEMPLATES: `/api/v1/forms/templates`,\r\n    SUBMIT: `/api/v1/forms/submit`,\r\n    RESPONSES: (formId: string) => `/api/v1/forms/${formId}/responses`,\r\n    SUBMISSIONS: (formId: string) => `/api/v1/forms/${formId}/submissions`,\r\n    EXPORT: (formId: string) => `/api/v1/forms/${formId}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PURCHASE ORDERS & PROCUREMENT\r\n  // ==========================================\r\n  PURCHASE_ORDERS: {\r\n    BASE: `/api/v1/purchase-orders`,\r\n    BY_ID: (id: string) => `/api/v1/purchase-orders/${id}`,\r\n    APPROVE: (id: string) => `/api/v1/purchase-orders/${id}/approve`,\r\n    REJECT: (id: string) => `/api/v1/purchase-orders/${id}/reject`,\r\n    RECEIVE: (id: string) => `/api/v1/purchase-orders/${id}/receive`,\r\n    RECEIVE_ITEMS: (id: string) => `/api/v1/purchase-orders/${id}/receive-items`,\r\n    CANCEL: (id: string) => `/api/v1/purchase-orders/${id}/cancel`,\r\n    STATISTICS: `/api/v1/purchase-orders/statistics`,\r\n    PENDING: `/api/v1/purchase-orders/pending`,\r\n    APPROVED: `/api/v1/purchase-orders/approved`,\r\n    RECEIVED: `/api/v1/purchase-orders/received`,\r\n    BY_VENDOR: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}`,\r\n    REORDER_ITEMS: `/api/v1/purchase-orders/reorder-items`,\r\n    VENDOR_HISTORY: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}/history`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BILLING & FINANCIAL MANAGEMENT\r\n  // ==========================================\r\n  BILLING: {\r\n    // Invoices\r\n    INVOICES: `/api/v1/billing/invoices`,\r\n    INVOICE_BY_ID: (id: string) => `/api/v1/billing/invoices/${id}`,\r\n    INVOICE_PDF: (id: string) => `/api/v1/billing/invoices/${id}/pdf`,\r\n    INVOICE_SEND: (id: string) => `/api/v1/billing/invoices/${id}/send`,\r\n    INVOICE_VOID: (id: string) => `/api/v1/billing/invoices/${id}/void`,\r\n    \r\n    // Payments\r\n    PAYMENTS: `/api/v1/billing/payments`,\r\n    PAYMENT_BY_ID: (id: string) => `/api/v1/billing/payments/${id}`,\r\n    PAYMENT_REFUND: (id: string) => `/api/v1/billing/payments/${id}/refund`,\r\n    PAYMENT_VOID: (id: string) => `/api/v1/billing/payments/${id}/void`,\r\n    \r\n    // Analytics\r\n    ANALYTICS: `/api/v1/billing/analytics`,\r\n    REVENUE_TRENDS: `/api/v1/billing/analytics/revenue-trends`,\r\n    PAYMENT_ANALYTICS: `/api/v1/billing/analytics/payments`,\r\n    COLLECTION_METRICS: `/api/v1/billing/analytics/collections`,\r\n    \r\n    // Reports\r\n    REPORTS: `/api/v1/billing/reports`,\r\n    AGING_REPORT: `/api/v1/billing/reports/aging`,\r\n    REVENUE_REPORT: `/api/v1/billing/reports/revenue`,\r\n    PAYMENT_REPORT: `/api/v1/billing/reports/payments`,\r\n    TAX_REPORT: `/api/v1/billing/reports/tax`,\r\n    \r\n    // Settings\r\n    SETTINGS: `/api/v1/billing/settings`,\r\n    \r\n    // Notifications\r\n    NOTIFICATIONS: `/api/v1/billing/notifications`,\r\n    SEND_REMINDER: `/api/v1/billing/notifications/reminder`,\r\n    SEND_STATEMENT: `/api/v1/billing/notifications/statement`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BUDGET MANAGEMENT\r\n  // ==========================================\r\n  BUDGET: {\r\n    // Budget Categories\r\n    CATEGORIES: `/api/v1/budget/categories`,\r\n    CATEGORY_BY_ID: (id: string) => `/api/v1/budget/categories/${id}`,\r\n\r\n    // Budget Summary\r\n    SUMMARY: `/api/v1/budget/summary`,\r\n\r\n    // Budget Transactions\r\n    TRANSACTIONS: `/api/v1/budget/transactions`,\r\n    TRANSACTION_BY_ID: (id: string) => `/api/v1/budget/transactions/${id}`,\r\n\r\n    // Analytics & Reporting\r\n    TRENDS: `/api/v1/budget/trends`,\r\n    YEAR_COMPARISON: `/api/v1/budget/year-comparison`,\r\n    OVER_BUDGET: `/api/v1/budget/over-budget`,\r\n    RECOMMENDATIONS: `/api/v1/budget/recommendations`,\r\n    EXPORT: `/api/v1/budget/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VENDORS\r\n  // ==========================================\r\n  VENDORS: {\r\n    BASE: `/api/v1/vendors`,\r\n    BY_ID: (id: string) => `/api/v1/vendors/${id}`,\r\n    SEARCH: (query: string) => `/api/v1/vendors/search/${encodeURIComponent(query)}`,\r\n    COMPARE: (itemName: string) => `/api/v1/vendors/compare/${encodeURIComponent(itemName)}`,\r\n    TOP: `/api/v1/vendors/top`,\r\n    STATISTICS: `/api/v1/vendors/statistics`,\r\n    REACTIVATE: (id: string) => `/api/v1/vendors/${id}/reactivate`,\r\n    RATING: (id: string) => `/api/v1/vendors/${id}/rating`,\r\n    BULK_RATINGS: `/api/v1/vendors/ratings/bulk`,\r\n    BY_PAYMENT_TERMS: (terms: string) => `/api/v1/vendors/payment-terms/${encodeURIComponent(terms)}`,\r\n    METRICS: (id: string) => `/api/v1/vendors/${id}/metrics`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/vendors/${id}/permanent`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SETTINGS\r\n  // ==========================================\r\n  SETTINGS: {\r\n    USER: `/api/v1/settings/user`,\r\n    SCHOOL: `/api/v1/settings/school`,\r\n    NOTIFICATIONS: `/api/v1/settings/notifications`,\r\n    PREFERENCES: `/api/v1/settings/preferences`,\r\n    PRIVACY: `/api/v1/settings/privacy`,\r\n    SECURITY: `/api/v1/settings/security`,\r\n  },\r\n} as const;\r\n\r\n/**\r\n * HTTP Status Codes\r\n */\r\nexport const HTTP_STATUS = {\r\n  OK: 200,\r\n  CREATED: 201,\r\n  ACCEPTED: 202,\r\n  NO_CONTENT: 204,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  CONFLICT: 409,\r\n  UNPROCESSABLE_ENTITY: 422,\r\n  TOO_MANY_REQUESTS: 429,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  BAD_GATEWAY: 502,\r\n  SERVICE_UNAVAILABLE: 503,\r\n  GATEWAY_TIMEOUT: 504,\r\n} as const;\r\n\r\n/**\r\n * API Response Types\r\n */\r\nexport type ApiSuccessResponse<T = unknown> = {\r\n  success: true;\r\n  data: T;\r\n  message?: string;\r\n};\r\n\r\nexport type ApiErrorResponse = {\r\n  success: false;\r\n  error: string;\r\n  code?: string;\r\n  details?: Record<string, unknown>;\r\n  traceId?: string;\r\n};\r\n\r\nexport type ApiResponse<T = unknown> = ApiSuccessResponse<T> | ApiErrorResponse;\r\n\r\n/**\r\n * Pagination Types\r\n */\r\nexport type PaginationParams = {\r\n  page?: number;\r\n  limit?: number;\r\n  sort?: string;\r\n  order?: 'asc' | 'desc';\r\n};\r\n\r\nexport type PaginatedResponse<T> = {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n    hasNext: boolean;\r\n    hasPrev: boolean;\r\n  };\r\n};\r\n\r\nexport default API_ENDPOINTS;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1518, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/cache/constants.ts"],"sourcesContent":["/**\r\n * @fileoverview Cache Configuration Constants\r\n * @module lib/cache/constants\r\n *\r\n * Standardized cache TTL (Time To Live) configuration for the application.\r\n * Implements a tiered caching strategy based on data sensitivity and freshness requirements.\r\n *\r\n * **HIPAA Compliance:**\r\n * - PHI data has shorter TTLs (30-60s) to minimize stale data exposure\r\n * - Static data can cache longer (300s) for performance\r\n * - All cache keys use IDs only, never PHI values\r\n *\r\n * **Performance Strategy:**\r\n * - Aggressive caching for static reference data\r\n * - Conservative caching for frequently changing data\r\n * - Minimal caching for real-time data\r\n *\r\n * @see DATABASE_INTEGRATION_AUDIT_REPORT.md for detailed caching strategy\r\n * @version 1.0.0\r\n * @since 2025-10-27\r\n */\r\n\r\n// ==========================================\r\n// CACHE TTL CONSTANTS (seconds)\r\n// ==========================================\r\n\r\n/**\r\n * Cache Time-To-Live Configuration\r\n *\r\n * All values in seconds. Aligned with Next.js `revalidate` API.\r\n *\r\n * **Tier Breakdown:**\r\n * - **STATIC**: Reference data that rarely changes (schools, districts, medication formulary)\r\n * - **STATS**: Aggregated statistics (non-PHI dashboard data)\r\n * - **PHI_FREQUENT**: Frequently accessed PHI (active medications, today's appointments)\r\n * - **PHI_STANDARD**: Standard PHI access (student lists, health records lists)\r\n * - **SESSION**: User session data (profile, preferences)\r\n * - **REALTIME**: Real-time data (notifications, unread messages)\r\n */\r\nexport const CACHE_TTL = {\r\n  /**\r\n   * Static reference data - rarely changes\r\n   * Examples: Schools, districts, medication formulary, form templates\r\n   * TTL: 5 minutes (300 seconds)\r\n   */\r\n  STATIC: 300,\r\n\r\n  /**\r\n   * Aggregated statistics - non-PHI\r\n   * Examples: Dashboard stats, analytics, reports\r\n   * TTL: 2 minutes (120 seconds)\r\n   */\r\n  STATS: 120,\r\n\r\n  /**\r\n   * PHI data - frequently accessed\r\n   * Examples: Active medications, today's appointments, recent health alerts\r\n   * TTL: 30 seconds\r\n   * Rationale: High-sensitivity data that changes frequently\r\n   */\r\n  PHI_FREQUENT: 30,\r\n\r\n  /**\r\n   * PHI data - standard access\r\n   * Examples: Student lists, health records lists, incident lists\r\n   * TTL: 1 minute (60 seconds)\r\n   * Rationale: Moderate sensitivity, reasonable freshness for list views\r\n   */\r\n  PHI_STANDARD: 60,\r\n\r\n  /**\r\n   * User session data\r\n   * Examples: Current user profile, user preferences, role permissions\r\n   * TTL: 5 minutes (300 seconds)\r\n   * Rationale: Rarely changes during session, safe to cache\r\n   */\r\n  SESSION: 300,\r\n\r\n  /**\r\n   * Real-time data - minimal caching\r\n   * Examples: Notifications, unread message counts, active alerts\r\n   * TTL: 10 seconds\r\n   * Rationale: Needs near real-time updates\r\n   */\r\n  REALTIME: 10,\r\n\r\n  /**\r\n   * No caching - always fetch fresh\r\n   * Use for critical operations or data that must always be fresh\r\n   * TTL: 0 (forces revalidation)\r\n   */\r\n  NO_CACHE: 0,\r\n} as const;\r\n\r\n// ==========================================\r\n// CACHE TAGS FOR GRANULAR INVALIDATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Tags for Next.js revalidateTag() API\r\n *\r\n * Used to invalidate specific data without clearing entire cache.\r\n *\r\n * **Usage:**\r\n * ```typescript\r\n * // In Server Component\r\n * fetch(url, {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD,\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // In Server Action (to invalidate)\r\n * import { revalidateTag } from 'next/cache';\r\n * revalidateTag(CACHE_TAGS.STUDENTS);\r\n * ```\r\n */\r\nexport const CACHE_TAGS = {\r\n  // ==========================================\r\n  // PHI TAGS (HIPAA-protected data)\r\n  // ==========================================\r\n\r\n  /**\r\n   * General PHI data tag\r\n   * Use to invalidate all PHI-related caches\r\n   */\r\n  PHI: 'phi-data',\r\n\r\n  /**\r\n   * Student data (PHI)\r\n   */\r\n  STUDENTS: 'students',\r\n\r\n  /**\r\n   * Medication data (PHI)\r\n   */\r\n  MEDICATIONS: 'medications',\r\n\r\n  /**\r\n   * Health record data (PHI)\r\n   */\r\n  HEALTH_RECORDS: 'health-records',\r\n\r\n  /**\r\n   * Appointment data (PHI)\r\n   */\r\n  APPOINTMENTS: 'appointments',\r\n\r\n  /**\r\n   * Incident report data (PHI)\r\n   */\r\n  INCIDENTS: 'incidents',\r\n\r\n  /**\r\n   * Immunization data (PHI)\r\n   */\r\n  IMMUNIZATIONS: 'immunizations',\r\n\r\n  /**\r\n   * Allergy data (PHI)\r\n   */\r\n  ALLERGIES: 'allergies',\r\n\r\n  /**\r\n   * Emergency contact data (PHI)\r\n   */\r\n  EMERGENCY_CONTACTS: 'emergency-contacts',\r\n\r\n  // ==========================================\r\n  // NON-PHI TAGS\r\n  // ==========================================\r\n\r\n  /**\r\n   * User account data (non-PHI)\r\n   */\r\n  USERS: 'users',\r\n\r\n  /**\r\n   * School data (non-PHI)\r\n   */\r\n  SCHOOLS: 'schools',\r\n\r\n  /**\r\n   * District data (non-PHI)\r\n   */\r\n  DISTRICTS: 'districts',\r\n\r\n  /**\r\n   * Dashboard statistics (non-PHI aggregated)\r\n   */\r\n  STATS: 'statistics',\r\n\r\n  /**\r\n   * Analytics data (non-PHI aggregated)\r\n   */\r\n  ANALYTICS: 'analytics',\r\n\r\n  /**\r\n   * Notification data\r\n   */\r\n  NOTIFICATIONS: 'notifications',\r\n\r\n  /**\r\n   * Document templates (non-PHI)\r\n   */\r\n  TEMPLATES: 'templates',\r\n\r\n  /**\r\n   * Medication formulary (non-PHI)\r\n   */\r\n  FORMULARY: 'medication-formulary',\r\n\r\n  /**\r\n   * Admin user data (non-PHI)\r\n   */\r\n  ADMIN_USERS: 'admin-users',\r\n\r\n  /**\r\n   * Admin districts data (non-PHI)\r\n   */\r\n  ADMIN_DISTRICTS: 'admin-districts',\r\n\r\n  /**\r\n   * Admin schools data (non-PHI)\r\n   */\r\n  ADMIN_SCHOOLS: 'admin-schools',\r\n\r\n  /**\r\n   * Admin settings data (non-PHI)\r\n   */\r\n  ADMIN_SETTINGS: 'admin-settings',\r\n\r\n  /**\r\n   * Admin licenses data (non-PHI)\r\n   */\r\n  ADMIN_LICENSES: 'admin-licenses',\r\n\r\n  /**\r\n   * Admin backups data (non-PHI)\r\n   */\r\n  ADMIN_BACKUPS: 'admin-backups',\r\n\r\n  /**\r\n   * Admin metrics data (non-PHI)\r\n   */\r\n  ADMIN_METRICS: 'admin-metrics',\r\n\r\n  /**\r\n   * Admin training data (non-PHI)\r\n   */\r\n  ADMIN_TRAINING: 'admin-training',\r\n\r\n  /**\r\n   * Admin audit logs data (non-PHI)\r\n   */\r\n  ADMIN_AUDIT_LOGS: 'admin-audit-logs',\r\n} as const;\r\n\r\n// ==========================================\r\n// TYPE EXPORTS\r\n// ==========================================\r\n\r\n/**\r\n * Cache TTL values type (for TypeScript type safety)\r\n */\r\nexport type CacheTTLValue = typeof CACHE_TTL[keyof typeof CACHE_TTL];\r\n\r\n/**\r\n * Cache tag values type (for TypeScript type safety)\r\n */\r\nexport type CacheTagValue = typeof CACHE_TAGS[keyof typeof CACHE_TAGS];\r\n\r\n// ==========================================\r\n// HELPER UTILITIES\r\n// ==========================================\r\n\r\n/**\r\n * Determine appropriate cache TTL based on data type\r\n *\r\n * @param resourceType - Type of resource (e.g., 'students', 'medications')\r\n * @param isPHI - Whether the data contains PHI\r\n * @param isFrequentlyAccessed - Whether the data is frequently accessed\r\n * @returns Appropriate cache TTL in seconds\r\n *\r\n * @example\r\n * ```typescript\r\n * const ttl = getCacheTTL('medications', true, true);\r\n * console.log(ttl); // 30 (PHI_FREQUENT)\r\n * ```\r\n */\r\nexport function getCacheTTL(\r\n  resourceType: string,\r\n  isPHI: boolean,\r\n  isFrequentlyAccessed: boolean = false\r\n): number {\r\n  if (!isPHI) {\r\n    // Non-PHI data\r\n    if (resourceType === 'users' || resourceType === 'schools' || resourceType === 'districts') {\r\n      return CACHE_TTL.STATIC;\r\n    }\r\n    if (resourceType === 'statistics' || resourceType === 'analytics') {\r\n      return CACHE_TTL.STATS;\r\n    }\r\n    if (resourceType === 'notifications') {\r\n      return CACHE_TTL.REALTIME;\r\n    }\r\n    return CACHE_TTL.SESSION; // Default for non-PHI\r\n  }\r\n\r\n  // PHI data\r\n  if (isFrequentlyAccessed) {\r\n    return CACHE_TTL.PHI_FREQUENT;\r\n  }\r\n  return CACHE_TTL.PHI_STANDARD;\r\n}\r\n\r\n/**\r\n * Get cache tags for a resource type\r\n *\r\n * @param resourceType - Type of resource\r\n * @param isPHI - Whether the data contains PHI\r\n * @returns Array of cache tags to apply\r\n *\r\n * @example\r\n * ```typescript\r\n * const tags = getCacheTags('students', true);\r\n * console.log(tags); // ['students', 'phi-data']\r\n * ```\r\n */\r\nexport function getCacheTags(\r\n  resourceType: string,\r\n  isPHI: boolean = true\r\n): string[] {\r\n  const tags: string[] = [];\r\n\r\n  // Add resource-specific tag\r\n  if (resourceType === 'students') {\r\n    tags.push(CACHE_TAGS.STUDENTS);\r\n  } else if (resourceType === 'medications') {\r\n    tags.push(CACHE_TAGS.MEDICATIONS);\r\n  } else if (resourceType === 'health-records') {\r\n    tags.push(CACHE_TAGS.HEALTH_RECORDS);\r\n  } else if (resourceType === 'appointments') {\r\n    tags.push(CACHE_TAGS.APPOINTMENTS);\r\n  } else if (resourceType === 'incidents') {\r\n    tags.push(CACHE_TAGS.INCIDENTS);\r\n  } else if (resourceType === 'users') {\r\n    tags.push(CACHE_TAGS.USERS);\r\n  } else if (resourceType === 'statistics') {\r\n    tags.push(CACHE_TAGS.STATS);\r\n  }\r\n\r\n  // Add PHI tag if applicable\r\n  if (isPHI) {\r\n    tags.push(CACHE_TAGS.PHI);\r\n  }\r\n\r\n  return tags;\r\n}\r\n\r\n/**\r\n * Build cache tag for specific resource instance\r\n *\r\n * @param resourceType - Type of resource\r\n * @param resourceId - ID of specific resource\r\n * @returns Cache tag string\r\n *\r\n * @example\r\n * ```typescript\r\n * const tag = buildResourceTag('student', '123');\r\n * console.log(tag); // 'student-123'\r\n * ```\r\n */\r\nexport function buildResourceTag(\r\n  resourceType: string,\r\n  resourceId: string\r\n): string {\r\n  return `${resourceType}-${resourceId}`;\r\n}\r\n\r\n// ==========================================\r\n// DOCUMENTATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Strategy Documentation\r\n *\r\n * **Decision Framework:**\r\n *\r\n * 1. **Is it PHI?**\r\n *    - YES  Use PHI_FREQUENT (30s) or PHI_STANDARD (60s)\r\n *    - NO  Continue to #2\r\n *\r\n * 2. **How often does it change?**\r\n *    - Rarely (reference data)  STATIC (300s)\r\n *    - Moderately (aggregated stats)  STATS (120s)\r\n *    - Frequently (real-time)  REALTIME (10s)\r\n *\r\n * 3. **Is it user-specific?**\r\n *    - YES  SESSION (300s)\r\n *    - NO  Use type-based TTL\r\n *\r\n * **HIPAA Compliance Notes:**\r\n * - All PHI cache entries MUST have tags for invalidation\r\n * - Cache keys MUST NOT contain PHI values (use IDs only)\r\n * - PHI caches MUST be cleared on user logout\r\n * - Audit logging required for PHI cache access\r\n *\r\n * **Performance Guidelines:**\r\n * - Prefer longer TTLs for static data (reduces backend load)\r\n * - Use shorter TTLs for PHI (compliance requirement)\r\n * - Always tag caches for granular invalidation\r\n * - Monitor cache hit rates and adjust TTLs accordingly\r\n *\r\n * **Examples:**\r\n *\r\n * ```typescript\r\n * // Example 1: Fetch student list (PHI, standard access)\r\n * const students = await fetch('/api/students', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD, // 60s\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 2: Fetch medication formulary (non-PHI, static)\r\n * const formulary = await fetch('/api/medications/formulary', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.STATIC, // 300s\r\n *     tags: [CACHE_TAGS.FORMULARY]\r\n *   }\r\n * });\r\n *\r\n * // Example 3: Fetch today's appointments (PHI, frequent)\r\n * const appointments = await fetch('/api/appointments/today', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_FREQUENT, // 30s\r\n *     tags: [CACHE_TAGS.APPOINTMENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 4: Fetch current user (non-PHI, session)\r\n * const user = await fetch('/api/auth/me', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.SESSION, // 300s\r\n *     tags: [CACHE_TAGS.USERS]\r\n *   }\r\n * });\r\n * ```\r\n */\r\n\r\n// Export all constants and utilities\r\nconst cacheConstants = {\r\n  CACHE_TTL,\r\n  CACHE_TAGS,\r\n  getCacheTTL,\r\n  getCacheTags,\r\n  buildResourceTag,\r\n};\r\n\r\nexport default cacheConstants;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1823, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.cache.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication Caching Functions\r\n * @module app/medications/cache\r\n *\r\n * HIPAA-compliant cached data fetching for medications.\r\n * All functions use React cache() for automatic memoization.\r\n */\r\n\r\n'use server';\r\n\r\nimport { cache } from 'react';\r\nimport { serverGet } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { CACHE_TAGS, CACHE_TTL } from '@/lib/cache/constants';\r\nimport type { ApiResponse } from '@/types/core/api';\r\nimport type { Medication } from '@/types/domain/medications';\r\nimport type {\r\n  MedicationFilters,\r\n  MedicationLog,\r\n  PaginatedMedicationsResponse,\r\n  MedicationStats\r\n} from './medications.types';\r\n\r\n// ==========================================\r\n// CACHED MEDICATION READS\r\n// ==========================================\r\n\r\n/**\r\n * Get medication by ID with caching\r\n * Uses Next.js cache() for automatic memoization\r\n */\r\nexport const getMedication = cache(async (id: string): Promise<Medication | null> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<Medication>>(\r\n      API_ENDPOINTS.MEDICATIONS.BY_ID(id),\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_STANDARD,\r\n          tags: [`medication-${id}`, CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Failed to get medication:', error);\r\n    return null;\r\n  }\r\n});\r\n\r\n/**\r\n * Get all medications with caching\r\n * Uses shorter TTL for frequently updated data\r\n */\r\nexport const getMedications = cache(async (filters?: MedicationFilters): Promise<Medication[]> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<Medication[]>>(\r\n      API_ENDPOINTS.MEDICATIONS.BASE,\r\n      filters as Record<string, string | number | boolean>,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_STANDARD,\r\n          tags: [CACHE_TAGS.MEDICATIONS, 'medication-list', CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || [];\r\n  } catch (error) {\r\n    console.error('Failed to get medications:', error);\r\n    return [];\r\n  }\r\n});\r\n\r\n/**\r\n * Get medications for a specific student\r\n */\r\nexport const getStudentMedications = cache(async (studentId: string): Promise<Medication[]> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<Medication[]>>(\r\n      API_ENDPOINTS.MEDICATIONS.BY_STUDENT(studentId),\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_FREQUENT, // More frequent updates for active medications\r\n          tags: [`student-medications-${studentId}`, CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || [];\r\n  } catch (error) {\r\n    console.error('Failed to get student medications:', error);\r\n    return [];\r\n  }\r\n});\r\n\r\n/**\r\n * Get due medications (requiring administration)\r\n */\r\nexport const getDueMedications = cache(async (): Promise<Medication[]> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<Medication[]>>(\r\n      API_ENDPOINTS.MEDICATIONS.DUE,\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_FREQUENT, // Short TTL for time-sensitive data\r\n          tags: ['due-medications', CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || [];\r\n  } catch (error) {\r\n    console.error('Failed to get due medications:', error);\r\n    return [];\r\n  }\r\n});\r\n\r\n/**\r\n * Get paginated medications\r\n */\r\nexport const getPaginatedMedications = cache(async (\r\n  page: number = 1,\r\n  limit: number = 20,\r\n  filters?: MedicationFilters\r\n): Promise<PaginatedMedicationsResponse | null> => {\r\n  try {\r\n    const params = {\r\n      page: page.toString(),\r\n      limit: limit.toString(),\r\n      ...filters\r\n    };\r\n\r\n    const response = await serverGet<ApiResponse<PaginatedMedicationsResponse>>(\r\n      API_ENDPOINTS.MEDICATIONS.BASE,\r\n      params as Record<string, string | number | boolean>,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_STANDARD,\r\n          tags: [CACHE_TAGS.MEDICATIONS, 'medication-list', CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Failed to get paginated medications:', error);\r\n    return null;\r\n  }\r\n});\r\n\r\n/**\r\n * Get medication administration history\r\n */\r\nexport const getMedicationHistory = cache(async (medicationId: string): Promise<MedicationLog[]> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<MedicationLog[]>>(\r\n      `${API_ENDPOINTS.MEDICATIONS.BY_ID(medicationId)}/history`,\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_STANDARD,\r\n          tags: [`medication-history-${medicationId}`, CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || [];\r\n  } catch (error) {\r\n    console.error('Failed to get medication history:', error);\r\n    return [];\r\n  }\r\n});\r\n\r\n/**\r\n * Get medication statistics for dashboard metrics\r\n */\r\nexport const getMedicationStats = cache(async (): Promise<MedicationStats> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<MedicationStats>>(\r\n      `${API_ENDPOINTS.MEDICATIONS.BASE}/stats`,\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_FREQUENT, // Frequent updates for dashboard stats\r\n          tags: ['medication-stats', CACHE_TAGS.MEDICATIONS]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || {\r\n      totalMedications: 0,\r\n      activePrescriptions: 0,\r\n      administeredToday: 0,\r\n      adverseReactions: 0,\r\n      lowStockCount: 0,\r\n      expiringCount: 0\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to get medication stats:', error);\r\n    return {\r\n      totalMedications: 0,\r\n      activePrescriptions: 0,\r\n      administeredToday: 0,\r\n      adverseReactions: 0,\r\n      lowStockCount: 0,\r\n      expiringCount: 0\r\n    };\r\n  }\r\n});\r\n\r\n/**\r\n * Get overdue medications\r\n */\r\nexport const getOverdueMedications = cache(async (): Promise<Medication[]> => {\r\n  try {\r\n    const response = await serverGet<ApiResponse<Medication[]>>(\r\n      API_ENDPOINTS.MEDICATIONS.OVERDUE,\r\n      undefined,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL.PHI_FREQUENT,\r\n          tags: ['overdue-medications', CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI]\r\n        }\r\n      }\r\n    );\r\n\r\n    return response.data || [];\r\n  } catch (error) {\r\n    console.error('Failed to get overdue medications:', error);\r\n    return [];\r\n  }\r\n});\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2051, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/audit.ts"],"sourcesContent":["/**\r\n * HIPAA-compliant audit logging utilities\r\n * Tracks all PHI access and modifications for compliance\r\n */\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL || 'http://localhost:3001';\r\n\r\n/**\r\n * Audit log entry interface\r\n */\r\nexport interface AuditLogEntry {\r\n  userId?: string | null;\r\n  action: string;\r\n  resource: string;\r\n  resourceId?: string;\r\n  details?: string;\r\n  ipAddress?: string;\r\n  userAgent?: string;\r\n  success?: boolean;\r\n  errorMessage?: string;\r\n  changes?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Log audit event to backend\r\n * HIPAA Requirement: All PHI access must be logged\r\n */\r\nexport async function auditLog(entry: AuditLogEntry): Promise<void> {\r\n  try {\r\n    // Send audit log to backend service\r\n    await fetch(`${BACKEND_URL}/api/audit/log`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        userId: entry.userId,\r\n        action: entry.action,\r\n        entityType: entry.resource,\r\n        entityId: entry.resourceId,\r\n        changes: entry.changes || {\r\n          details: entry.details,\r\n          success: entry.success !== undefined ? entry.success : true,\r\n          errorMessage: entry.errorMessage\r\n        },\r\n        ipAddress: entry.ipAddress,\r\n        userAgent: entry.userAgent\r\n      })\r\n    });\r\n  } catch (error) {\r\n    // Audit logging should never break the main flow\r\n    // Log to console for debugging but don't throw\r\n    console.error('Audit log failed:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * PHI access actions\r\n */\r\nexport const PHI_ACTIONS = {\r\n  VIEW: 'VIEW_PHI',\r\n  CREATE: 'CREATE_PHI',\r\n  UPDATE: 'UPDATE_PHI',\r\n  DELETE: 'DELETE_PHI',\r\n  EXPORT: 'EXPORT_PHI',\r\n  PRINT: 'PRINT_PHI'\r\n} as const;\r\n\r\n/**\r\n * Log PHI access\r\n * HIPAA Critical: All Protected Health Information access must be audited\r\n */\r\nexport async function logPHIAccess(entry: Omit<AuditLogEntry, 'action'> & { action: keyof typeof PHI_ACTIONS }): Promise<void> {\r\n  await auditLog({\r\n    ...entry,\r\n    action: PHI_ACTIONS[entry.action]\r\n  });\r\n}\r\n\r\n/**\r\n * Common audit actions\r\n */\r\nexport const AUDIT_ACTIONS = {\r\n  // Authentication\r\n  LOGIN: 'USER_LOGIN',\r\n  LOGOUT: 'USER_LOGOUT',\r\n  LOGIN_FAILED: 'LOGIN_FAILED',\r\n  TOKEN_REFRESH: 'TOKEN_REFRESH',\r\n  PASSWORD_CHANGE: 'PASSWORD_CHANGE',\r\n\r\n  // Students\r\n  VIEW_STUDENT: 'VIEW_STUDENT',\r\n  CREATE_STUDENT: 'CREATE_STUDENT',\r\n  UPDATE_STUDENT: 'UPDATE_STUDENT',\r\n  DELETE_STUDENT: 'DELETE_STUDENT',\r\n  LIST_STUDENTS: 'LIST_STUDENTS',\r\n\r\n  // Health Records\r\n  VIEW_HEALTH_RECORD: 'VIEW_HEALTH_RECORD',\r\n  CREATE_HEALTH_RECORD: 'CREATE_HEALTH_RECORD',\r\n  UPDATE_HEALTH_RECORD: 'UPDATE_HEALTH_RECORD',\r\n  DELETE_HEALTH_RECORD: 'DELETE_HEALTH_RECORD',\r\n\r\n  // Medications\r\n  VIEW_MEDICATION: 'VIEW_MEDICATION',\r\n  CREATE_MEDICATION: 'CREATE_MEDICATION',\r\n  UPDATE_MEDICATION: 'UPDATE_MEDICATION',\r\n  DELETE_MEDICATION: 'DELETE_MEDICATION',\r\n  ADMINISTER_MEDICATION: 'ADMINISTER_MEDICATION',\r\n\r\n  // Appointments\r\n  VIEW_APPOINTMENT: 'VIEW_APPOINTMENT',\r\n  LIST_APPOINTMENTS: 'LIST_APPOINTMENTS',\r\n  CREATE_APPOINTMENT: 'CREATE_APPOINTMENT',\r\n  UPDATE_APPOINTMENT: 'UPDATE_APPOINTMENT',\r\n  DELETE_APPOINTMENT: 'DELETE_APPOINTMENT',\r\n  RESCHEDULE_APPOINTMENT: 'RESCHEDULE_APPOINTMENT',\r\n  CANCEL_APPOINTMENT: 'CANCEL_APPOINTMENT',\r\n  COMPLETE_APPOINTMENT: 'COMPLETE_APPOINTMENT',\r\n  CONFIRM_APPOINTMENT: 'CONFIRM_APPOINTMENT',\r\n  NO_SHOW_APPOINTMENT: 'NO_SHOW_APPOINTMENT',\r\n  SEND_APPOINTMENT_REMINDER: 'SEND_APPOINTMENT_REMINDER',\r\n\r\n  // Incidents\r\n  VIEW_INCIDENT: 'VIEW_INCIDENT',\r\n  CREATE_INCIDENT: 'CREATE_INCIDENT',\r\n  UPDATE_INCIDENT: 'UPDATE_INCIDENT',\r\n  DELETE_INCIDENT: 'DELETE_INCIDENT',\r\n\r\n  // Documents\r\n  VIEW_DOCUMENT: 'VIEW_DOCUMENT',\r\n  UPLOAD_DOCUMENT: 'UPLOAD_DOCUMENT',\r\n  DOWNLOAD_DOCUMENT: 'DOWNLOAD_DOCUMENT',\r\n  DELETE_DOCUMENT: 'DELETE_DOCUMENT',\r\n  CREATE_DOCUMENT: 'CREATE_DOCUMENT',\r\n  UPDATE_DOCUMENT: 'UPDATE_DOCUMENT',\r\n  SIGN_DOCUMENT: 'SIGN_DOCUMENT',\r\n  SHARE_DOCUMENT: 'SHARE_DOCUMENT',\r\n\r\n  // PHI Records\r\n  CREATE_PHI_RECORD: 'CREATE_PHI_RECORD',\r\n  ACCESS_PHI_RECORD: 'ACCESS_PHI_RECORD',\r\n\r\n  // User Management\r\n  CREATE_USER: 'CREATE_USER',\r\n  UPDATE_USER: 'UPDATE_USER',\r\n  DELETE_USER: 'DELETE_USER',\r\n\r\n  // Organization Management\r\n  CREATE_ORGANIZATION: 'CREATE_ORGANIZATION',\r\n  UPDATE_ORGANIZATION: 'UPDATE_ORGANIZATION',\r\n\r\n  // Configuration\r\n  UPDATE_CONFIGURATION: 'UPDATE_CONFIGURATION',\r\n\r\n  // Reports\r\n  GENERATE_REPORT: 'GENERATE_REPORT',\r\n  EXPORT_DATA: 'EXPORT_DATA'\r\n} as const;\r\n\r\n/**\r\n * Extract IP address from request or headers\r\n */\r\nexport function extractIPAddress(request: Request | { get(name: string): string | null }): string | undefined {\r\n  // Check various headers for IP address\r\n  const headersList = [\r\n    'x-forwarded-for',\r\n    'x-real-ip',\r\n    'cf-connecting-ip'\r\n  ];\r\n\r\n  const headers = 'headers' in request ? request.headers : request;\r\n\r\n  for (const header of headersList) {\r\n    const value = headers.get(header);\r\n    if (value) {\r\n      // x-forwarded-for can contain multiple IPs, take the first one\r\n      return value.split(',')[0].trim();\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Extract user agent from request or headers\r\n */\r\nexport function extractUserAgent(request: Request | { get(name: string): string | null }): string | undefined {\r\n  const headers = 'headers' in request ? request.headers : request;\r\n  return headers.get('user-agent') || undefined;\r\n}\r\n\r\n/**\r\n * Create audit context from request\r\n */\r\nexport function createAuditContext(request: Request, userId?: string) {\r\n  return {\r\n    userId,\r\n    ipAddress: extractIPAddress(request),\r\n    userAgent: extractUserAgent(request)\r\n  };\r\n}\r\n\r\n/**\r\n * Get client IP from Next.js server context\r\n *\r\n * Works in server actions and components.\r\n *\r\n * @returns Client IP address\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function myAction() {\r\n *   const ip = await getClientIP();\r\n *   await auditLog({ ipAddress: ip, ... });\r\n * }\r\n * ```\r\n */\r\nexport async function getClientIP(): Promise<string | undefined> {\r\n  try {\r\n    const { headers } = await import('next/headers');\r\n    const headersList = await headers();\r\n\r\n    // Check common headers for IP\r\n    const ipHeaders = [\r\n      'x-forwarded-for',\r\n      'x-real-ip',\r\n      'cf-connecting-ip',\r\n      'x-client-ip',\r\n      'x-cluster-client-ip'\r\n    ];\r\n\r\n    for (const header of ipHeaders) {\r\n      const value = headersList.get(header);\r\n      if (value) {\r\n        // x-forwarded-for can contain multiple IPs, take the first one\r\n        return value.split(',')[0].trim();\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  } catch (error) {\r\n    // headers() might not be available in all contexts\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Get user agent from Next.js server context\r\n *\r\n * Works in server actions and components.\r\n *\r\n * @returns User agent string\r\n */\r\nexport async function getUserAgent(): Promise<string | undefined> {\r\n  try {\r\n    const { headers } = await import('next/headers');\r\n    const headersList = await headers();\r\n    return headersList.get('user-agent') || undefined;\r\n  } catch (error) {\r\n    // headers() might not be available in all contexts\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Create audit context from Next.js server context\r\n *\r\n * Works in server actions and server components.\r\n *\r\n * @param userId - Optional user ID\r\n * @returns Audit context\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function updateProfile(data: FormData) {\r\n *   const session = await getServerSession();\r\n *   const context = await createAuditContextFromServer(session?.user.id);\r\n *\r\n *   await auditLog({\r\n *     ...context,\r\n *     action: AUDIT_ACTIONS.UPDATE_PROFILE,\r\n *     resource: 'profile',\r\n *     resourceId: session?.user.id\r\n *   });\r\n * }\r\n * ```\r\n */\r\nexport async function createAuditContextFromServer(userId?: string | null) {\r\n  return {\r\n    userId,\r\n    ipAddress: await getClientIP(),\r\n    userAgent: await getUserAgent()\r\n  };\r\n}\r\n\r\n/**\r\n * Log audit event with automatic context detection\r\n *\r\n * Automatically detects IP and user agent from server context.\r\n *\r\n * @param entry - Audit log entry\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function deleteStudent(id: string) {\r\n *   const user = await getServerAuth();\r\n *\r\n *   await auditLogWithContext({\r\n *     userId: user.id,\r\n *     action: AUDIT_ACTIONS.DELETE_STUDENT,\r\n *     resource: 'student',\r\n *     resourceId: id\r\n *   });\r\n * }\r\n * ```\r\n */\r\nexport async function auditLogWithContext(\r\n  entry: Omit<AuditLogEntry, 'ipAddress' | 'userAgent'>\r\n): Promise<void> {\r\n  const context = await createAuditContextFromServer(entry.userId);\r\n\r\n  await auditLog({\r\n    ...entry,\r\n    ipAddress: context.ipAddress,\r\n    userAgent: context.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Parse user agent string\r\n *\r\n * Extracts browser, OS, and device information from user agent.\r\n *\r\n * @param userAgent - User agent string\r\n * @returns Parsed user agent info\r\n */\r\nexport function parseUserAgent(userAgent: string): {\r\n  browser: string;\r\n  os: string;\r\n  device: string;\r\n} {\r\n  const ua = userAgent.toLowerCase();\r\n\r\n  // Detect browser\r\n  let browser = 'Unknown';\r\n  if (ua.includes('chrome')) browser = 'Chrome';\r\n  else if (ua.includes('firefox')) browser = 'Firefox';\r\n  else if (ua.includes('safari')) browser = 'Safari';\r\n  else if (ua.includes('edge')) browser = 'Edge';\r\n  else if (ua.includes('opera')) browser = 'Opera';\r\n\r\n  // Detect OS\r\n  let os = 'Unknown';\r\n  if (ua.includes('windows')) os = 'Windows';\r\n  else if (ua.includes('mac')) os = 'macOS';\r\n  else if (ua.includes('linux')) os = 'Linux';\r\n  else if (ua.includes('android')) os = 'Android';\r\n  else if (ua.includes('ios') || ua.includes('iphone') || ua.includes('ipad')) os = 'iOS';\r\n\r\n  // Detect device\r\n  let device = 'Desktop';\r\n  if (ua.includes('mobile') || ua.includes('android')) device = 'Mobile';\r\n  else if (ua.includes('tablet') || ua.includes('ipad')) device = 'Tablet';\r\n\r\n  return { browser, os, device };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2297, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.crud.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication CRUD Operations\r\n * @module app/medications/crud\r\n *\r\n * Create, Read, Update, Delete operations for medications.\r\n * Includes HIPAA audit logging and cache invalidation.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidateTag, revalidatePath } from 'next/cache';\r\nimport { redirect } from 'next/navigation';\r\nimport { serverPost, serverPut, serverDelete, NextApiClientError } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { auditLog, AUDIT_ACTIONS } from '@/lib/audit';\r\nimport { CACHE_TAGS } from '@/lib/cache/constants';\r\nimport type { ApiResponse } from '@/types/core/api';\r\nimport type { Medication } from '@/types/domain/medications';\r\nimport type { ActionResult, CreateMedicationData, UpdateMedicationData } from './medications.types';\r\n\r\n// ==========================================\r\n// CREATE OPERATIONS\r\n// ==========================================\r\n\r\n/**\r\n * Create a new medication prescription\r\n * Includes HIPAA audit logging and cache invalidation\r\n */\r\nexport async function createMedication(data: CreateMedicationData): Promise<ActionResult<Medication>> {\r\n  try {\r\n    // Validate required fields\r\n    if (!data.studentId || !data.name || !data.dosage || !data.route || !data.frequency || !data.startDate || !data.prescribedBy) {\r\n      return {\r\n        success: false,\r\n        error: 'Missing required fields: studentId, name, dosage, route, frequency, startDate, prescribedBy'\r\n      };\r\n    }\r\n\r\n    const response = await serverPost<ApiResponse<Medication>>(\r\n      API_ENDPOINTS.MEDICATIONS.BASE,\r\n      data,\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to create medication');\r\n    }\r\n\r\n    // HIPAA AUDIT LOG - Mandatory for PHI creation (medications are PHI)\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.CREATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: response.data.id,\r\n      details: `Created medication prescription: ${data.name} for student ${data.studentId}`,\r\n      success: true\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag('medication-list', 'default');\r\n    revalidateTag(`student-medications-${data.studentId}`, 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n    revalidatePath(`/dashboard/students/${data.studentId}/medications`, 'page');\r\n\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Medication created successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to create medication';\r\n\r\n    // HIPAA AUDIT LOG - Log failed attempt\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.CREATE_MEDICATION,\r\n      resource: 'Medication',\r\n      details: `Failed to create medication record: ${errorMessage}`,\r\n      success: false,\r\n      errorMessage\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Create medication from form data\r\n * Form-friendly wrapper for createMedication\r\n */\r\nexport async function createMedicationFromForm(formData: FormData): Promise<ActionResult<Medication>> {\r\n  const medicationData: CreateMedicationData = {\r\n    studentId: formData.get('studentId') as string,\r\n    name: formData.get('name') as string,\r\n    genericName: formData.get('genericName') as string || undefined,\r\n    dosage: formData.get('dosage') as string,\r\n    dosageForm: formData.get('dosageForm') as string || undefined,\r\n    strength: formData.get('strength') as string || undefined,\r\n    route: formData.get('route') as string,\r\n    frequency: formData.get('frequency') as string,\r\n    startDate: formData.get('startDate') as string,\r\n    endDate: formData.get('endDate') as string || undefined,\r\n    prescribedBy: formData.get('prescribedBy') as string,\r\n    prescriptionNumber: formData.get('prescriptionNumber') as string || undefined,\r\n    instructions: formData.get('instructions') as string || undefined,\r\n    sideEffects: formData.get('sideEffects') as string || undefined,\r\n    contraindications: formData.get('contraindications') as string || undefined,\r\n    storage: formData.get('storage') as string || undefined,\r\n    requiresParentConsent: formData.get('requiresParentConsent') === 'true',\r\n    isControlledSubstance: formData.get('isControlledSubstance') === 'true',\r\n    rxNumber: formData.get('rxNumber') as string || undefined,\r\n    refillsRemaining: formData.get('refillsRemaining') ? parseInt(formData.get('refillsRemaining') as string) : undefined,\r\n  };\r\n\r\n  const result = await createMedication(medicationData);\r\n\r\n  if (result.success && result.data) {\r\n    redirect(`/dashboard/medications/${result.data.id}` as any);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// ==========================================\r\n// UPDATE OPERATIONS\r\n// ==========================================\r\n\r\n/**\r\n * Update medication information\r\n * Includes HIPAA audit logging and cache invalidation\r\n */\r\nexport async function updateMedication(\r\n  medicationId: string,\r\n  data: UpdateMedicationData\r\n): Promise<ActionResult<Medication>> {\r\n  try {\r\n    if (!medicationId) {\r\n      return {\r\n        success: false,\r\n        error: 'Medication ID is required'\r\n      };\r\n    }\r\n\r\n    const response = await serverPut<ApiResponse<Medication>>(\r\n      API_ENDPOINTS.MEDICATIONS.BY_ID(medicationId),\r\n      data,\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, `medication-${medicationId}`, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to update medication');\r\n    }\r\n\r\n    // HIPAA AUDIT LOG - Mandatory for PHI modification\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.UPDATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Updated medication record`,\r\n      changes: data as Record<string, unknown>,\r\n      success: true\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag(`medication-${medicationId}`, 'default');\r\n    revalidateTag('medication-list', 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n    revalidatePath(`/dashboard/medications/${medicationId}`, 'page');\r\n\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Medication updated successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to update medication';\r\n\r\n    // HIPAA AUDIT LOG - Log failed attempt\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.UPDATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Failed to update medication record: ${errorMessage}`,\r\n      success: false,\r\n      errorMessage\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Update medication from form data\r\n * Form-friendly wrapper for updateMedication\r\n */\r\nexport async function updateMedicationFromForm(\r\n  medicationId: string,\r\n  formData: FormData\r\n): Promise<ActionResult<Medication>> {\r\n  const medicationData: UpdateMedicationData = {\r\n    name: formData.get('name') as string || undefined,\r\n    genericName: formData.get('genericName') as string || undefined,\r\n    dosage: formData.get('dosage') as string || undefined,\r\n    dosageForm: formData.get('dosageForm') as string || undefined,\r\n    strength: formData.get('strength') as string || undefined,\r\n    route: formData.get('route') as string || undefined,\r\n    frequency: formData.get('frequency') as string || undefined,\r\n    startDate: formData.get('startDate') as string || undefined,\r\n    endDate: formData.get('endDate') as string || undefined,\r\n    prescribedBy: formData.get('prescribedBy') as string || undefined,\r\n    prescriptionNumber: formData.get('prescriptionNumber') as string || undefined,\r\n    instructions: formData.get('instructions') as string || undefined,\r\n    sideEffects: formData.get('sideEffects') as string || undefined,\r\n    contraindications: formData.get('contraindications') as string || undefined,\r\n    storage: formData.get('storage') as string || undefined,\r\n    requiresParentConsent: formData.has('requiresParentConsent') ? formData.get('requiresParentConsent') === 'true' : undefined,\r\n    isControlledSubstance: formData.has('isControlledSubstance') ? formData.get('isControlledSubstance') === 'true' : undefined,\r\n    rxNumber: formData.get('rxNumber') as string || undefined,\r\n    refillsRemaining: formData.get('refillsRemaining') ? parseInt(formData.get('refillsRemaining') as string) : undefined,\r\n  };\r\n\r\n  // Filter out undefined values\r\n  const filteredData = Object.entries(medicationData).reduce((acc, [key, value]) => {\r\n    if (value !== undefined) {\r\n      acc[key as keyof UpdateMedicationData] = value;\r\n    }\r\n    return acc;\r\n  }, {} as UpdateMedicationData);\r\n\r\n  const result = await updateMedication(medicationId, filteredData);\r\n\r\n  if (result.success && result.data) {\r\n    redirect(`/dashboard/medications/${result.data.id}` as any);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// ==========================================\r\n// DELETE OPERATIONS\r\n// ==========================================\r\n\r\n/**\r\n * Delete medication (discontinue)\r\n * Includes HIPAA audit logging and cache invalidation\r\n */\r\nexport async function deleteMedication(medicationId: string): Promise<ActionResult<void>> {\r\n  try {\r\n    if (!medicationId) {\r\n      return {\r\n        success: false,\r\n        error: 'Medication ID is required'\r\n      };\r\n    }\r\n\r\n    await serverDelete<ApiResponse<void>>(\r\n      API_ENDPOINTS.MEDICATIONS.BY_ID(medicationId),\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, `medication-${medicationId}`, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    // HIPAA AUDIT LOG - Mandatory for PHI deletion\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.DELETE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Deleted/discontinued medication record`,\r\n      success: true\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag(`medication-${medicationId}`, 'default');\r\n    revalidateTag('medication-list', 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n\r\n    return {\r\n      success: true,\r\n      message: 'Medication deleted successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to delete medication';\r\n\r\n    // HIPAA AUDIT LOG - Log failed attempt\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.DELETE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Failed to delete medication record: ${errorMessage}`,\r\n      success: false,\r\n      errorMessage\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2578, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.administration.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication Administration Operations\r\n * @module app/medications/administration\r\n *\r\n * Functions for recording and tracking medication administration.\r\n * Critical for medication safety and HIPAA compliance.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidateTag, revalidatePath } from 'next/cache';\r\nimport { serverPost, NextApiClientError } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { auditLog, AUDIT_ACTIONS } from '@/lib/audit';\r\nimport { CACHE_TAGS } from '@/lib/cache/constants';\r\nimport type { ApiResponse } from '@/types/core/api';\r\nimport type { ActionResult, AdministerMedicationData, MedicationLog } from './medications.types';\r\n\r\n// ==========================================\r\n// ADMINISTRATION OPERATIONS\r\n// ==========================================\r\n\r\n/**\r\n * Record medication administration\r\n * Critical for medication tracking and compliance\r\n */\r\nexport async function administerMedication(\r\n  data: AdministerMedicationData\r\n): Promise<ActionResult<MedicationLog>> {\r\n  try {\r\n    if (!data.medicationId || !data.studentId || !data.administeredBy || !data.administeredAt || !data.dosageGiven) {\r\n      return {\r\n        success: false,\r\n        error: 'Missing required fields: medicationId, studentId, administeredBy, administeredAt, dosageGiven'\r\n      };\r\n    }\r\n\r\n    const response = await serverPost<ApiResponse<MedicationLog>>(\r\n      API_ENDPOINTS.MEDICATIONS.ADMINISTER(data.medicationId),\r\n      data,\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, `medication-${data.medicationId}`, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to record medication administration');\r\n    }\r\n\r\n    // HIPAA AUDIT LOG - Mandatory for medication administration (critical PHI event)\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.ADMINISTER_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: data.medicationId,\r\n      details: `Administered medication to student ${data.studentId} by ${data.administeredBy} - Dosage: ${data.dosageGiven}`,\r\n      success: true\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag(`medication-${data.medicationId}`, 'default');\r\n    revalidateTag(`student-medications-${data.studentId}`, 'default');\r\n    revalidateTag('due-medications', 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n    revalidatePath(`/dashboard/medications/${data.medicationId}`, 'page');\r\n    revalidatePath(`/dashboard/students/${data.studentId}/medications`, 'page');\r\n\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Medication administration recorded successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to record medication administration';\r\n\r\n    // HIPAA AUDIT LOG - Log failed attempt (critical for medication safety)\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.ADMINISTER_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: data.medicationId,\r\n      details: `Failed to record medication administration: ${errorMessage}`,\r\n      success: false,\r\n      errorMessage\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Record medication administration from form data\r\n */\r\nexport async function administerMedicationFromForm(formData: FormData): Promise<ActionResult<MedicationLog>> {\r\n  const administrationData: AdministerMedicationData = {\r\n    medicationId: formData.get('medicationId') as string,\r\n    studentId: formData.get('studentId') as string,\r\n    administeredBy: formData.get('administeredBy') as string,\r\n    administeredAt: formData.get('administeredAt') as string || new Date().toISOString(),\r\n    dosageGiven: formData.get('dosageGiven') as string,\r\n    notes: formData.get('notes') as string || undefined,\r\n    witnessedBy: formData.get('witnessedBy') as string || undefined,\r\n    method: formData.get('method') as string || undefined,\r\n    location: formData.get('location') as string || undefined,\r\n  };\r\n\r\n  return await administerMedication(administrationData);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;;;;AAID;AACA;AACA;AACA;AACA;;;;;;;;AAYO,eAAe,qBACpB,IAA8B;IAE9B,IAAI;QACF,IAAI,CAAC,KAAK,YAAY,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,cAAc,IAAI,CAAC,KAAK,cAAc,IAAI,CAAC,KAAK,WAAW,EAAE;YAC9G,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;QAEA,MAAM,WAAW,MAAM,IAAA,mJAAU,EAC/B,wIAAa,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,YAAY,GACtD,MACA;YACE,OAAO;YACP,MAAM;gBAAE,MAAM;oBAAC,8IAAU,CAAC,WAAW;oBAAE,CAAC,WAAW,EAAE,KAAK,YAAY,EAAE;oBAAE,8IAAU,CAAC,GAAG;iBAAC;YAAC;QAC5F;QAGF,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACvC,MAAM,IAAI,MAAM,SAAS,OAAO,IAAI;QACtC;QAEA,iFAAiF;QACjF,MAAM,IAAA,+HAAQ,EAAC;YACb,QAAQ,oIAAa,CAAC,qBAAqB;YAC3C,UAAU;YACV,YAAY,KAAK,YAAY;YAC7B,SAAS,CAAC,mCAAmC,EAAE,KAAK,SAAS,CAAC,IAAI,EAAE,KAAK,cAAc,CAAC,WAAW,EAAE,KAAK,WAAW,EAAE;YACvH,SAAS;QACX;QAEA,qBAAqB;QACrB,IAAA,8IAAa,EAAC,8IAAU,CAAC,WAAW,EAAE;QACtC,IAAA,8IAAa,EAAC,CAAC,WAAW,EAAE,KAAK,YAAY,EAAE,EAAE;QACjD,IAAA,8IAAa,EAAC,CAAC,oBAAoB,EAAE,KAAK,SAAS,EAAE,EAAE;QACvD,IAAA,8IAAa,EAAC,mBAAmB;QACjC,IAAA,+IAAc,EAAC,0BAA0B;QACzC,IAAA,+IAAc,EAAC,CAAC,uBAAuB,EAAE,KAAK,YAAY,EAAE,EAAE;QAC9D,IAAA,+IAAc,EAAC,CAAC,oBAAoB,EAAE,KAAK,SAAS,CAAC,YAAY,CAAC,EAAE;QAEpE,OAAO;YACL,SAAS;YACT,MAAM,SAAS,IAAI;YACnB,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,2JAAkB,GACpD,MAAM,OAAO,GACb,iBAAiB,QACjB,MAAM,OAAO,GACb;QAEJ,wEAAwE;QACxE,MAAM,IAAA,+HAAQ,EAAC;YACb,QAAQ,oIAAa,CAAC,qBAAqB;YAC3C,UAAU;YACV,YAAY,KAAK,YAAY;YAC7B,SAAS,CAAC,4CAA4C,EAAE,cAAc;YACtE,SAAS;YACT;QACF;QAEA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;AACF;AAKO,eAAe,6BAA6B,QAAkB;IACnE,MAAM,qBAA+C;QACnD,cAAc,SAAS,GAAG,CAAC;QAC3B,WAAW,SAAS,GAAG,CAAC;QACxB,gBAAgB,SAAS,GAAG,CAAC;QAC7B,gBAAgB,SAAS,GAAG,CAAC,qBAA+B,IAAI,OAAO,WAAW;QAClF,aAAa,SAAS,GAAG,CAAC;QAC1B,OAAO,SAAS,GAAG,CAAC,YAAsB;QAC1C,aAAa,SAAS,GAAG,CAAC,kBAA4B;QACtD,QAAQ,SAAS,GAAG,CAAC,aAAuB;QAC5C,UAAU,SAAS,GAAG,CAAC,eAAyB;IAClD;IAEA,OAAO,MAAM,qBAAqB;AACpC;;;IAxFsB;IA0EA;;AA1EA,+OAAA;AA0EA,+OAAA","debugId":null}},
    {"offset": {"line": 2687, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.status.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication Status Operations\r\n * @module app/medications/status\r\n *\r\n * Functions for managing medication status changes including\r\n * discontinuation, refill requests, and specialized operations.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidateTag, revalidatePath } from 'next/cache';\r\nimport { serverPost, NextApiClientError } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { auditLog, AUDIT_ACTIONS } from '@/lib/audit';\r\nimport { CACHE_TAGS } from '@/lib/cache/constants';\r\nimport type { ApiResponse } from '@/types/core/api';\r\nimport type { Medication } from '@/types/domain/medications';\r\nimport type { ActionResult } from './medications.types';\r\n\r\n// ==========================================\r\n// STATUS CHANGE OPERATIONS\r\n// ==========================================\r\n\r\n/**\r\n * Discontinue medication (soft delete with reason)\r\n */\r\nexport async function discontinueMedication(\r\n  medicationId: string,\r\n  reason?: string\r\n): Promise<ActionResult<Medication>> {\r\n  try {\r\n    const response = await serverPost<ApiResponse<Medication>>(\r\n      API_ENDPOINTS.MEDICATIONS.DISCONTINUE(medicationId),\r\n      { reason },\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, `medication-${medicationId}`, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to discontinue medication');\r\n    }\r\n\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.UPDATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Discontinued medication${reason ? ` - Reason: ${reason}` : ''}`,\r\n      changes: { isActive: false, discontinuedReason: reason },\r\n      success: true\r\n    });\r\n\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag(`medication-${medicationId}`, 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n    revalidatePath(`/dashboard/medications/${medicationId}`, 'page');\r\n\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Medication discontinued successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to discontinue medication';\r\n\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.UPDATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Failed to discontinue medication: ${errorMessage}`,\r\n      success: false,\r\n      errorMessage\r\n    });\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Request medication refill\r\n */\r\nexport async function requestMedicationRefill(\r\n  medicationId: string,\r\n  requestedBy: string,\r\n  notes?: string\r\n): Promise<ActionResult<{ refillRequestId: string }>> {\r\n  try {\r\n    const response = await serverPost<ApiResponse<{ refillRequestId: string }>>(\r\n      API_ENDPOINTS.MEDICATIONS.REFILL(medicationId),\r\n      { requestedBy, notes },\r\n      {\r\n        cache: 'no-store',\r\n        next: { tags: [CACHE_TAGS.MEDICATIONS, `medication-${medicationId}`, CACHE_TAGS.PHI] }\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to request medication refill');\r\n    }\r\n\r\n    await auditLog({\r\n      action: AUDIT_ACTIONS.UPDATE_MEDICATION,\r\n      resource: 'Medication',\r\n      resourceId: medicationId,\r\n      details: `Requested medication refill by ${requestedBy}`,\r\n      success: true\r\n    });\r\n\r\n    revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n    revalidateTag(`medication-${medicationId}`, 'default');\r\n    revalidatePath('/dashboard/medications', 'page');\r\n\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: 'Medication refill requested successfully'\r\n    };\r\n  } catch (error) {\r\n    const errorMessage = error instanceof NextApiClientError\r\n      ? error.message\r\n      : error instanceof Error\r\n      ? error.message\r\n      : 'Failed to request medication refill';\r\n\r\n    return {\r\n      success: false,\r\n      error: errorMessage\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;;;;AAID;AACA;AACA;AACA;AACA;;;;;;;;AAYO,eAAe,sBACpB,YAAoB,EACpB,MAAe;IAEf,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,mJAAU,EAC/B,wIAAa,CAAC,WAAW,CAAC,WAAW,CAAC,eACtC;YAAE;QAAO,GACT;YACE,OAAO;YACP,MAAM;gBAAE,MAAM;oBAAC,8IAAU,CAAC,WAAW;oBAAE,CAAC,WAAW,EAAE,cAAc;oBAAE,8IAAU,CAAC,GAAG;iBAAC;YAAC;QACvF;QAGF,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACvC,MAAM,IAAI,MAAM,SAAS,OAAO,IAAI;QACtC;QAEA,MAAM,IAAA,+HAAQ,EAAC;YACb,QAAQ,oIAAa,CAAC,iBAAiB;YACvC,UAAU;YACV,YAAY;YACZ,SAAS,CAAC,uBAAuB,EAAE,SAAS,CAAC,WAAW,EAAE,QAAQ,GAAG,IAAI;YACzE,SAAS;gBAAE,UAAU;gBAAO,oBAAoB;YAAO;YACvD,SAAS;QACX;QAEA,IAAA,8IAAa,EAAC,8IAAU,CAAC,WAAW,EAAE;QACtC,IAAA,8IAAa,EAAC,CAAC,WAAW,EAAE,cAAc,EAAE;QAC5C,IAAA,+IAAc,EAAC,0BAA0B;QACzC,IAAA,+IAAc,EAAC,CAAC,uBAAuB,EAAE,cAAc,EAAE;QAEzD,OAAO;YACL,SAAS;YACT,MAAM,SAAS,IAAI;YACnB,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,2JAAkB,GACpD,MAAM,OAAO,GACb,iBAAiB,QACjB,MAAM,OAAO,GACb;QAEJ,MAAM,IAAA,+HAAQ,EAAC;YACb,QAAQ,oIAAa,CAAC,iBAAiB;YACvC,UAAU;YACV,YAAY;YACZ,SAAS,CAAC,kCAAkC,EAAE,cAAc;YAC5D,SAAS;YACT;QACF;QAEA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;AACF;AAKO,eAAe,wBACpB,YAAoB,EACpB,WAAmB,EACnB,KAAc;IAEd,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,mJAAU,EAC/B,wIAAa,CAAC,WAAW,CAAC,MAAM,CAAC,eACjC;YAAE;YAAa;QAAM,GACrB;YACE,OAAO;YACP,MAAM;gBAAE,MAAM;oBAAC,8IAAU,CAAC,WAAW;oBAAE,CAAC,WAAW,EAAE,cAAc;oBAAE,8IAAU,CAAC,GAAG;iBAAC;YAAC;QACvF;QAGF,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACvC,MAAM,IAAI,MAAM,SAAS,OAAO,IAAI;QACtC;QAEA,MAAM,IAAA,+HAAQ,EAAC;YACb,QAAQ,oIAAa,CAAC,iBAAiB;YACvC,UAAU;YACV,YAAY;YACZ,SAAS,CAAC,+BAA+B,EAAE,aAAa;YACxD,SAAS;QACX;QAEA,IAAA,8IAAa,EAAC,8IAAU,CAAC,WAAW,EAAE;QACtC,IAAA,8IAAa,EAAC,CAAC,WAAW,EAAE,cAAc,EAAE;QAC5C,IAAA,+IAAc,EAAC,0BAA0B;QAEzC,OAAO;YACL,SAAS;YACT,MAAM,SAAS,IAAI;YACnB,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,2JAAkB,GACpD,MAAM,OAAO,GACb,iBAAiB,QACjB,MAAM,OAAO,GACb;QAEJ,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;AACF;;;IA/GsB;IA+DA;;AA/DA,+OAAA;AA+DA,+OAAA","debugId":null}},
    {"offset": {"line": 2817, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.utils.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication Utility Functions\r\n * @module app/medications/utils\r\n *\r\n * Utility and helper functions for medication operations.\r\n * Includes cache management and dashboard data aggregation.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidateTag, revalidatePath } from 'next/cache';\r\nimport { CACHE_TAGS } from '@/lib/cache/constants';\r\nimport type { MedicationFilters } from './medications.types';\r\n// Import individual functions rather than re-exporting to avoid duplicate 'use server'\r\nimport {\r\n  getMedication,\r\n  getMedications,\r\n  getPaginatedMedications,\r\n  getMedicationStats\r\n} from './medications.cache';\r\n\r\n// ==========================================\r\n// UTILITY FUNCTIONS\r\n// ==========================================\r\n\r\n/**\r\n * Check if medication exists\r\n */\r\nexport async function medicationExists(medicationId: string): Promise<boolean> {\r\n  const medication = await getMedication(medicationId);\r\n  return medication !== null;\r\n}\r\n\r\n/**\r\n * Get medication count\r\n */\r\nexport async function getMedicationCount(filters?: MedicationFilters): Promise<number> {\r\n  try {\r\n    const medications = await getMedications(filters);\r\n    return medications.length;\r\n  } catch {\r\n    return 0;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear medication cache\r\n */\r\nexport async function clearMedicationCache(medicationId?: string): Promise<void> {\r\n  if (medicationId) {\r\n    revalidateTag(`medication-${medicationId}`, 'default');\r\n  }\r\n  revalidateTag(CACHE_TAGS.MEDICATIONS, 'default');\r\n  revalidateTag('medication-list', 'default');\r\n  revalidateTag('due-medications', 'default');\r\n  revalidateTag('overdue-medications', 'default');\r\n  revalidatePath('/dashboard/medications', 'page');\r\n}\r\n\r\n// ==========================================\r\n// DASHBOARD DATA AGGREGATION\r\n// ==========================================\r\n\r\n/**\r\n * Fetch medications dashboard data combining medications and stats\r\n */\r\nexport async function getMedicationsDashboardData(options: {\r\n  page?: number;\r\n  limit?: number;\r\n  search?: string;\r\n  status?: string;\r\n  type?: string;\r\n  studentId?: string;\r\n} = {}) {\r\n  try {\r\n    // Build filters object, only including defined values\r\n    const filters: MedicationFilters = {};\r\n\r\n    if (options.status && options.status !== 'all') {\r\n      filters.status = options.status as 'active' | 'inactive' | 'discontinued';\r\n    }\r\n\r\n    if (options.search) {\r\n      // Note: API may expect 'search' parameter, not 'name'\r\n      filters.name = options.search;\r\n    }\r\n\r\n    if (options.studentId) {\r\n      filters.studentId = options.studentId;\r\n    }\r\n\r\n    const [medicationsResponse, statsResponse] = await Promise.allSettled([\r\n      getPaginatedMedications(options.page || 1, options.limit || 50, filters),\r\n      getMedicationStats()\r\n    ]);\r\n\r\n    const medications = medicationsResponse.status === 'fulfilled' && medicationsResponse.value\r\n      ? medicationsResponse.value.medications || []\r\n      : [];\r\n\r\n    const stats = statsResponse.status === 'fulfilled'\r\n      ? statsResponse.value\r\n      : {\r\n          totalMedications: 0,\r\n          activePrescriptions: 0,\r\n          administeredToday: 0,\r\n          adverseReactions: 0,\r\n          lowStockCount: 0,\r\n          expiringCount: 0\r\n        };\r\n\r\n    return {\r\n      medications,\r\n      stats,\r\n      error: null\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching medications dashboard data:', error);\r\n    return {\r\n      medications: [],\r\n      stats: {\r\n        totalMedications: 0,\r\n        activePrescriptions: 0,\r\n        administeredToday: 0,\r\n        adverseReactions: 0,\r\n        lowStockCount: 0,\r\n        expiringCount: 0\r\n      },\r\n      error: error instanceof Error ? error.message : 'Failed to load medication data'\r\n    };\r\n  }\r\n}\r\n\r\n// Note: getOverdueMedications is exported from medications.cache.ts and re-exported in medications.actions.ts\r\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;;;;;;;;AAID;AACA;AAEA,uFAAuF;AACvF;;;;;;AAcO,eAAe,iBAAiB,YAAoB;IACzD,MAAM,aAAa,MAAM,IAAA,8JAAa,EAAC;IACvC,OAAO,eAAe;AACxB;AAKO,eAAe,mBAAmB,OAA2B;IAClE,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,+JAAc,EAAC;QACzC,OAAO,YAAY,MAAM;IAC3B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,eAAe,qBAAqB,YAAqB;IAC9D,IAAI,cAAc;QAChB,IAAA,8IAAa,EAAC,CAAC,WAAW,EAAE,cAAc,EAAE;IAC9C;IACA,IAAA,8IAAa,EAAC,8IAAU,CAAC,WAAW,EAAE;IACtC,IAAA,8IAAa,EAAC,mBAAmB;IACjC,IAAA,8IAAa,EAAC,mBAAmB;IACjC,IAAA,8IAAa,EAAC,uBAAuB;IACrC,IAAA,+IAAc,EAAC,0BAA0B;AAC3C;AASO,eAAe,4BAA4B,UAO9C,CAAC,CAAC;IACJ,IAAI;QACF,sDAAsD;QACtD,MAAM,UAA6B,CAAC;QAEpC,IAAI,QAAQ,MAAM,IAAI,QAAQ,MAAM,KAAK,OAAO;YAC9C,QAAQ,MAAM,GAAG,QAAQ,MAAM;QACjC;QAEA,IAAI,QAAQ,MAAM,EAAE;YAClB,sDAAsD;YACtD,QAAQ,IAAI,GAAG,QAAQ,MAAM;QAC/B;QAEA,IAAI,QAAQ,SAAS,EAAE;YACrB,QAAQ,SAAS,GAAG,QAAQ,SAAS;QACvC;QAEA,MAAM,CAAC,qBAAqB,cAAc,GAAG,MAAM,QAAQ,UAAU,CAAC;YACpE,IAAA,wKAAuB,EAAC,QAAQ,IAAI,IAAI,GAAG,QAAQ,KAAK,IAAI,IAAI;YAChE,IAAA,mKAAkB;SACnB;QAED,MAAM,cAAc,oBAAoB,MAAM,KAAK,eAAe,oBAAoB,KAAK,GACvF,oBAAoB,KAAK,CAAC,WAAW,IAAI,EAAE,GAC3C,EAAE;QAEN,MAAM,QAAQ,cAAc,MAAM,KAAK,cACnC,cAAc,KAAK,GACnB;YACE,kBAAkB;YAClB,qBAAqB;YACrB,mBAAmB;YACnB,kBAAkB;YAClB,eAAe;YACf,eAAe;QACjB;QAEJ,OAAO;YACL;YACA;YACA,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8CAA8C;QAC5D,OAAO;YACL,aAAa,EAAE;YACf,OAAO;gBACL,kBAAkB;gBAClB,qBAAqB;gBACrB,mBAAmB;gBACnB,kBAAkB;gBAClB,eAAe;gBACf,eAAe;YACjB;YACA,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF,EAEA,8GAA8G;;;IAzGxF;IAQA;IAYA;IAkBA;;AAtCA,+OAAA;AAQA,+OAAA;AAYA,+OAAA;AAkBA,+OAAA","debugId":null}},
    {"offset": {"line": 2928, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/medications.actions.ts"],"sourcesContent":["/**\r\n * @fileoverview Medication Management Server Actions - Next.js v14+ Compatible\r\n * @module app/medications/actions\r\n *\r\n * HIPAA-compliant server actions for medication data management with comprehensive\r\n * caching, audit logging, and error handling.\r\n *\r\n * Features:\r\n * - Server actions with proper 'use server' directive (in implementation files)\r\n * - Next.js cache integration with revalidateTag/revalidatePath\r\n * - HIPAA audit logging for all PHI operations (medications are PHI)\r\n * - Type-safe CRUD operations\r\n * - Form data handling for UI integration\r\n * - Comprehensive error handling and validation\r\n * - Medication administration tracking\r\n *\r\n * This module serves as a re-export hub for all medication-related functionality,\r\n * which has been organized into focused submodules:\r\n * - medications.types.ts - Type definitions\r\n * - medications.cache.ts - Cached data fetching\r\n * - medications.crud.ts - Create, update, delete operations\r\n * - medications.administration.ts - Administration tracking\r\n * - medications.status.ts - Status change operations\r\n * - medications.utils.ts - Utility functions\r\n *\r\n * NOTE: This barrel file does NOT have 'use server' directive.\r\n * The 'use server' directive is present in implementation files that define\r\n * actual Server Actions. Barrel files cannot have 'use server' when re-exporting.\r\n */\r\n\r\n// ==========================================\r\n// TYPE EXPORTS\r\n// ==========================================\r\n\r\nexport type {\r\n  ActionResult,\r\n  CreateMedicationData,\r\n  UpdateMedicationData,\r\n  AdministerMedicationData,\r\n  MedicationFilters,\r\n  MedicationLog,\r\n  PaginatedMedicationsResponse,\r\n  MedicationStats\r\n} from './medications.types';\r\n\r\n// ==========================================\r\n// CACHED DATA FUNCTIONS\r\n// ==========================================\r\n\r\nexport {\r\n  getMedication,\r\n  getMedications,\r\n  getStudentMedications,\r\n  getDueMedications,\r\n  getPaginatedMedications,\r\n  getMedicationHistory,\r\n  getMedicationStats,\r\n  getOverdueMedications\r\n} from './medications.cache';\r\n\r\n// ==========================================\r\n// CRUD OPERATIONS\r\n// ==========================================\r\n\r\nexport {\r\n  createMedication,\r\n  createMedicationFromForm,\r\n  updateMedication,\r\n  updateMedicationFromForm,\r\n  deleteMedication\r\n} from './medications.crud';\r\n\r\n// ==========================================\r\n// ADMINISTRATION OPERATIONS\r\n// ==========================================\r\n\r\nexport {\r\n  administerMedication,\r\n  administerMedicationFromForm\r\n} from './medications.administration';\r\n\r\n// ==========================================\r\n// STATUS OPERATIONS\r\n// ==========================================\r\n\r\nexport {\r\n  discontinueMedication,\r\n  requestMedicationRefill\r\n} from './medications.status';\r\n\r\n// ==========================================\r\n// UTILITY FUNCTIONS\r\n// ==========================================\r\n\r\nexport {\r\n  medicationExists,\r\n  getMedicationCount,\r\n  clearMedicationCache,\r\n  getMedicationsDashboardData\r\n} from './medications.utils';\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4BC,GAED,6CAA6C;AAC7C,eAAe;AACf,6CAA6C;;AAa7C,6CAA6C;AAC7C,wBAAwB;AACxB,6CAA6C;AAE7C;AAWA,6CAA6C;AAC7C,kBAAkB;AAClB,6CAA6C;AAE7C;AAQA,6CAA6C;AAC7C,4BAA4B;AAC5B,6CAA6C;AAE7C;AAKA,6CAA6C;AAC7C,oBAAoB;AACpB,6CAA6C;AAE7C;AAKA,6CAA6C;AAC7C,oBAAoB;AACpB,6CAA6C;AAE7C","debugId":null}},
    {"offset": {"line": 2989, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/medications/page.tsx"],"sourcesContent":["/**\r\n * @fileoverview Medications List Page - Main Dashboard for Medication Management\r\n * @module app/(dashboard)/medications/page\r\n *\r\n * @description\r\n * Comprehensive medication management dashboard providing centralized access to all\r\n * student medications with filtering, searching, and real-time status tracking.\r\n *\r\n * **Next.js 16 Best Practices:**\r\n * - Server component with async data fetching\r\n * - Parallel data fetching using Promise.all\r\n * - React cache() for request memoization\r\n * - Proper TypeScript types for all data\r\n * - Suspense boundaries for progressive loading\r\n *\r\n * **Medication Management Features:**\r\n * - Multi-criteria search and filtering (name, status, type, student)\r\n * - Real-time medication statistics (active, due, overdue, low stock)\r\n * - Quick access to critical medication alerts\r\n * - Administration scheduling and tracking\r\n * - Inventory monitoring and low-stock warnings\r\n *\r\n * **Safety & Compliance:**\r\n * - HIPAA-compliant medication data handling (PHI protected)\r\n * - FDA National Drug Code (NDC) integration for drug identification\r\n * - Controlled substance tracking per DEA regulations (21 CFR Part 1300-1321)\r\n * - Audit logging for all medication access and modifications\r\n * - Allergy contraindication alerts displayed prominently\r\n *\r\n * **Performance Optimization:**\r\n * - Server-side data fetching with proper cache options\r\n * - Suspense boundaries for progressive loading\r\n * - Optimized rendering with server components\r\n *\r\n * @requires Authentication - JWT token with nurse/admin role\r\n * @requires Permissions - VIEW_MEDICATIONS, MANAGE_MEDICATIONS\r\n *\r\n * @see {@link https://www.fda.gov/drugs/drug-approvals-and-databases/national-drug-code-directory NDC Directory}\r\n * @see {@link https://www.deadiversion.usdoj.gov/schedules/ DEA Drug Schedules}\r\n *\r\n * @since 1.0.0\r\n */\r\n\r\nimport type { Metadata } from 'next';\r\nimport { Suspense } from 'react';\r\nimport Link from 'next/link';\r\nimport { PageHeader } from '@/components/layouts/PageHeader';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { getMedicationsDashboardData } from '@/lib/actions/medications.actions';\r\nimport type { Medication, MedicationStats } from '@/types/medications';\r\n\r\n/**\r\n * Metadata for medications main page\r\n */\r\nexport const metadata: Metadata = {\r\n  title: 'All Medications | White Cross Healthcare',\r\n  description: 'Comprehensive medication management dashboard with real-time administration tracking, inventory monitoring, and FDA-compliant medication safety controls.',\r\n};\r\n\r\n/**\r\n * Search params interface\r\n */\r\ninterface MedicationsPageProps {\r\n  searchParams: Promise<{\r\n    page?: string;\r\n    limit?: string;\r\n    search?: string;\r\n    status?: string;\r\n    type?: string;\r\n    studentId?: string;\r\n  }>;\r\n}\r\n\r\n/**\r\n * Loading skeleton component\r\n */\r\nfunction MedicationsLoadingSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards Skeleton */}\r\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-6\">\r\n        {[...Array(6)].map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"rounded-lg border border-gray-200 bg-white p-5 animate-pulse\"\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex-1\">\r\n                <div className=\"h-4 w-20 rounded bg-gray-200 mb-2\"></div>\r\n                <div className=\"h-8 w-12 rounded bg-gray-200\"></div>\r\n              </div>\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-200\"></div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Medications List Skeleton */}\r\n      <div className=\"rounded-lg border border-gray-200 bg-white\">\r\n        <div className=\"p-6\">\r\n          <div className=\"h-6 w-48 rounded bg-gray-200 mb-4\"></div>\r\n          <div className=\"space-y-4\">\r\n            {[...Array(5)].map((_, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"border border-gray-200 rounded-lg p-4 animate-pulse\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"h-4 w-32 rounded bg-gray-200 mb-2\"></div>\r\n                    <div className=\"h-3 w-24 rounded bg-gray-100 mb-2\"></div>\r\n                    <div className=\"flex space-x-4\">\r\n                      <div className=\"h-3 w-16 rounded bg-gray-100\"></div>\r\n                      <div className=\"h-3 w-12 rounded bg-gray-100\"></div>\r\n                      <div className=\"h-3 w-20 rounded bg-gray-100\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"h-8 w-24 rounded bg-gray-200\"></div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Stat Card Component\r\n */\r\nfunction StatCard({\r\n  label,\r\n  value,\r\n  href,\r\n  color\r\n}: {\r\n  label: string;\r\n  value: number;\r\n  href: string;\r\n  color: 'blue' | 'green' | 'yellow' | 'red' | 'orange';\r\n}) {\r\n  const colorClasses = {\r\n    blue: 'bg-blue-50 text-blue-700',\r\n    green: 'bg-green-50 text-green-700',\r\n    yellow: 'bg-yellow-50 text-yellow-700',\r\n    red: 'bg-red-50 text-red-700',\r\n    orange: 'bg-orange-50 text-orange-700'\r\n  };\r\n\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"block rounded-lg border border-gray-200 bg-white p-5 hover:shadow-md transition-shadow\"\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm font-medium text-gray-600\">{label}</p>\r\n          <p className=\"mt-2 text-3xl font-semibold text-gray-900\">{value}</p>\r\n        </div>\r\n        <div\r\n          className={`rounded-full p-3 ${colorClasses[color]}`}\r\n        >\r\n          <svg\r\n            className=\"h-6 w-6\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\n/**\r\n * Medication Card Component\r\n */\r\nfunction MedicationCard({ medication }: { medication: Medication }) {\r\n  return (\r\n    <div className=\"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"text-sm font-medium text-gray-900\">\r\n                {medication.name}\r\n              </h4>\r\n              {medication.genericName && (\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Generic: {medication.genericName}\r\n                </p>\r\n              )}\r\n              <div className=\"mt-1 flex items-center space-x-4 text-xs text-gray-500\">\r\n                <span>{medication.dosageForm}</span>\r\n                <span>{medication.strength}</span>\r\n                {medication.manufacturer && (\r\n                  <span>{medication.manufacturer}</span>\r\n                )}\r\n                {medication.isControlled && (\r\n                  <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800\">\r\n                    Controlled\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Link href={`/medications/${medication.id}`}>\r\n            <button className=\"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\">\r\n              View Details\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Medications Main Page Component - Server Component with Async Data Fetching\r\n *\r\n * This page demonstrates Next.js 16 best practices:\r\n * - Server-side data fetching with async/await\r\n * - Proper TypeScript types for all data\r\n * - Suspense boundaries for progressive loading\r\n * - Parallel data fetching for better performance\r\n */\r\nexport default async function MedicationsPage({ searchParams }: MedicationsPageProps) {\r\n  // Await the searchParams Promise\r\n  const resolvedSearchParams = await searchParams;\r\n  \r\n  // Parse search params\r\n  const page = parseInt(resolvedSearchParams.page || '1');\r\n  const limit = parseInt(resolvedSearchParams.limit || '50');\r\n\r\n  // Fetch medications dashboard data with proper cache options\r\n  const { medications, stats, error } = await getMedicationsDashboardData({\r\n    page,\r\n    limit,\r\n    search: resolvedSearchParams.search,\r\n    status: resolvedSearchParams.status,\r\n    type: resolvedSearchParams.type,\r\n    studentId: resolvedSearchParams.studentId,\r\n  });\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Page Header */}\r\n      <PageHeader\r\n        title=\"Medications\"\r\n        description=\"Manage and track all student medications\"\r\n        actions={\r\n          <Link href=\"/medications/new\">\r\n            <Button variant=\"default\">Add Medication</Button>\r\n          </Link>\r\n        }\r\n      />\r\n\r\n      {error && (\r\n        <div className=\"rounded-lg bg-red-50 p-4 text-red-700\">\r\n          <h3 className=\"font-medium\">Error Loading Medications</h3>\r\n          <p className=\"mt-1 text-sm\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Statistics Cards */}\r\n      <Suspense fallback={<Skeleton className=\"h-24 w-full\" />}>\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-6\">\r\n          <StatCard\r\n            label=\"Total Medications\"\r\n            value={stats.totalMedications}\r\n            href=\"/medications\"\r\n            color=\"blue\"\r\n          />\r\n          <StatCard\r\n            label=\"Active Prescriptions\"\r\n            value={stats.activePrescriptions}\r\n            href=\"/medications?status=active\"\r\n            color=\"green\"\r\n          />\r\n          <StatCard\r\n            label=\"Administered Today\"\r\n            value={stats.administeredToday}\r\n            href=\"/medications/administration-log\"\r\n            color=\"blue\"\r\n          />\r\n          <StatCard\r\n            label=\"Adverse Reactions\"\r\n            value={stats.adverseReactions}\r\n            href=\"/medications/adverse-reactions\"\r\n            color=\"yellow\"\r\n          />\r\n          <StatCard\r\n            label=\"Low Stock\"\r\n            value={stats.lowStockCount}\r\n            href=\"/medications/inventory/low-stock\"\r\n            color=\"orange\"\r\n          />\r\n          <StatCard\r\n            label=\"Expiring Soon\"\r\n            value={stats.expiringCount}\r\n            href=\"/medications/inventory/expiring\"\r\n            color=\"red\"\r\n          />\r\n        </div>\r\n      </Suspense>\r\n\r\n      {/* Medications List */}\r\n      <Suspense fallback={<MedicationsLoadingSkeleton />}>\r\n        <div className=\"rounded-lg border border-gray-200 bg-white\">\r\n          <div className=\"p-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n              Medications ({medications.length})\r\n            </h3>\r\n\r\n            {medications.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"mx-auto h-12 w-12 text-gray-400\">\r\n                  <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={1}\r\n                      d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">\r\n                  No medications found\r\n                </h3>\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  Get started by adding your first medication to the formulary.\r\n                </p>\r\n                <div className=\"mt-6\">\r\n                  <Link href=\"/medications/new\">\r\n                    <Button variant=\"default\">Add Medication</Button>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {medications.map((medication) => (\r\n                  <MedicationCard\r\n                    key={medication.id}\r\n                    medication={medication}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}