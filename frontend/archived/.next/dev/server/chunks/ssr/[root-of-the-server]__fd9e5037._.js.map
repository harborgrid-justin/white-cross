{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/ui/badge.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Badge = registerClientReference(\n    function() { throw new Error(\"Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx <module evaluation>\",\n    \"Badge\",\n);\nexport const badgeVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call badgeVariants() from the server but badgeVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx <module evaluation>\",\n    \"badgeVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,6DACA;AAEG,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/ui/badge.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Badge = registerClientReference(\n    function() { throw new Error(\"Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx\",\n    \"Badge\",\n);\nexport const badgeVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call badgeVariants() from the server but badgeVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx\",\n    \"badgeVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,yCACA;AAEG,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,yCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.types.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Types - Next.js v16 App Router\r\n *\r\n * Type definitions for compliance management including audit logs,\r\n * policies, reports, and training compliance.\r\n */\r\n\r\nimport type {\r\n  AuditActionTypeEnum,\r\n  AuditSeverityEnum,\r\n  ResourceTypeEnum,\r\n} from '@/schemas/compliance/compliance.schemas';\r\n\r\n// ============================================================================\r\n// Types\r\n// ============================================================================\r\n\r\n/**\r\n * Action Result Type - Matches ApiResponse pattern from @/lib/api\r\n * but named ActionResult to distinguish server actions from API calls\r\n */\r\nexport interface ActionResult<T> {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: string;\r\n  message?: string;\r\n}\r\n\r\nexport interface AuditLogContext {\r\n  userId: string;\r\n  userName: string;\r\n  userRole: string;\r\n  sessionId: string;\r\n  ipAddress: string;\r\n  userAgent: string;\r\n}\r\n\r\nexport interface CreateAuditLogInput {\r\n  action: AuditActionTypeEnum;\r\n  severity?: AuditSeverityEnum;\r\n  resourceType?: ResourceTypeEnum;\r\n  resourceId?: string;\r\n  resourceName?: string;\r\n  details?: Record<string, unknown>;\r\n  changes?: {\r\n    before?: Record<string, unknown>;\r\n    after?: Record<string, unknown>;\r\n  };\r\n  status?: 'SUCCESS' | 'FAILURE' | 'PARTIAL';\r\n  errorMessage?: string;\r\n  phiAccessed?: boolean;\r\n  complianceFlags?: string[];\r\n}\r\n\r\nexport interface UIComplianceReport {\r\n  id: string;\r\n  title: string;\r\n  type: string;\r\n  status: string;\r\n  generatedAt: string;\r\n  generatedBy: string;\r\n  period: { start: string; end: string };\r\n}\r\n\r\nexport interface UIReportTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  category: string;\r\n  requiredParams: string[];\r\n}\r\n\r\nexport interface UIPolicy {\r\n  id: string;\r\n  title: string;\r\n  category: string;\r\n  status: string;\r\n  version: string;\r\n  effectiveDate: string;\r\n  reviewDate: string;\r\n  acknowledgments: {\r\n    completed: number;\r\n    pending: number;\r\n    total: number;\r\n  };\r\n}\r\n\r\nexport interface PaginatedResult<T> {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}"],"names":[],"mappings":"AAAA;;;;;CAKC","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/identity-access/lib/config/cookies.ts"],"sourcesContent":["/**\r\n * @fileoverview Centralized Cookie Configuration\r\n * @module lib/config/cookies\r\n *\r\n * Single source of truth for all authentication cookie settings.\r\n * Implements security best practices including:\r\n * - __Host- prefix for maximum security\r\n * - Consistent naming across the application\r\n * - Secure defaults for production environments\r\n * - HIPAA-compliant session management\r\n *\r\n * Security Features:\r\n * - __Host- prefix prevents subdomain and path manipulation\r\n * - httpOnly prevents XSS attacks\r\n * - secure ensures HTTPS-only transmission\r\n * - sameSite prevents CSRF attacks\r\n * - Appropriate maxAge for healthcare security requirements\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\r\n * @see https://web.dev/first-party-cookie-recipes/\r\n */\r\n\r\nimport { ResponseCookie } from 'next/dist/compiled/@edge-runtime/cookies';\r\n\r\n/**\r\n * Cookie names with __Host- prefix for maximum security\r\n *\r\n * The __Host- prefix ensures:\r\n * - Cookie must be set with Secure flag\r\n * - Cookie must be set from a secure origin (HTTPS)\r\n * - Cookie must NOT have a Domain attribute (preventing subdomain access)\r\n * - Cookie path must be /\r\n *\r\n * NOTE: __Host- prefix requires HTTPS. In development (localhost), we use\r\n * regular cookie names without the prefix.\r\n */\r\nexport const COOKIE_NAMES = {\r\n  /** Access token for API authentication */\r\n  ACCESS_TOKEN: process.env.NODE_ENV === 'production' ? '__Host-auth.token' : 'auth.token',\r\n\r\n  /** Refresh token for obtaining new access tokens */\r\n  REFRESH_TOKEN: process.env.NODE_ENV === 'production' ? '__Host-auth.refresh' : 'auth.refresh',\r\n\r\n  /** Session identifier (if using session-based auth alongside JWT) */\r\n  SESSION_ID: process.env.NODE_ENV === 'production' ? '__Host-auth.session' : 'auth.session',\r\n} as const;\r\n\r\n/**\r\n * Cookie expiration times in seconds\r\n */\r\nexport const COOKIE_MAX_AGE = {\r\n  /** Access token: 1 hour (short-lived for security) */\r\n  ACCESS_TOKEN: 60 * 60,\r\n\r\n  /** Refresh token: 7 days (allows persistent login) */\r\n  REFRESH_TOKEN: 7 * 24 * 60 * 60,\r\n\r\n  /** Session: 24 hours (daily re-authentication for HIPAA compliance) */\r\n  SESSION: 24 * 60 * 60,\r\n} as const;\r\n\r\n/**\r\n * Base cookie options for all authentication cookies\r\n * These settings ensure maximum security\r\n */\r\nconst BASE_COOKIE_OPTIONS: Partial<ResponseCookie> = {\r\n  /** Path where cookie is valid */\r\n  path: '/',\r\n\r\n  /** Prevent JavaScript access (XSS protection) */\r\n  httpOnly: true,\r\n\r\n  /** Strict CSRF protection - cookie only sent to same-site requests */\r\n  sameSite: 'strict',\r\n\r\n  /** Only send over HTTPS in production */\r\n  secure: process.env.NODE_ENV === 'production',\r\n} as const;\r\n\r\n/**\r\n * Get cookie options for access token\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for access token\r\n *\r\n * @example\r\n * ```typescript\r\n * import { cookies } from 'next/headers';\r\n * import { getAccessTokenCookieOptions, COOKIE_NAMES } from './config/cookies';\r\n *\r\n * const cookieStore = await cookies();\r\n * cookieStore.set(COOKIE_NAMES.ACCESS_TOKEN, token, getAccessTokenCookieOptions());\r\n * ```\r\n */\r\nexport function getAccessTokenCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.ACCESS_TOKEN,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Get cookie options for refresh token\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for refresh token\r\n *\r\n * @example\r\n * ```typescript\r\n * cookieStore.set(COOKIE_NAMES.REFRESH_TOKEN, refreshToken, getRefreshTokenCookieOptions());\r\n * ```\r\n */\r\nexport function getRefreshTokenCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.REFRESH_TOKEN,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Get cookie options for session identifier\r\n *\r\n * @param overrides - Optional overrides for specific use cases\r\n * @returns Complete cookie configuration for session\r\n *\r\n * @example\r\n * ```typescript\r\n * cookieStore.set(COOKIE_NAMES.SESSION_ID, sessionId, getSessionCookieOptions());\r\n * ```\r\n */\r\nexport function getSessionCookieOptions(\r\n  overrides?: Partial<ResponseCookie>\r\n): ResponseCookie {\r\n  return {\r\n    ...BASE_COOKIE_OPTIONS,\r\n    maxAge: COOKIE_MAX_AGE.SESSION,\r\n    ...overrides,\r\n  } as ResponseCookie;\r\n}\r\n\r\n/**\r\n * Legacy cookie names for migration support\r\n * These should be removed in a future version\r\n *\r\n * @deprecated Use COOKIE_NAMES instead\r\n */\r\nexport const LEGACY_COOKIE_NAMES = {\r\n  auth_token: 'auth_token',\r\n  refresh_token: 'refresh_token',\r\n  authToken: 'authToken',\r\n  refreshToken: 'refreshToken',\r\n} as const;\r\n\r\n/**\r\n * Clear all authentication cookies\r\n * Useful for logout operations\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n *\r\n * @example\r\n * ```typescript\r\n * import { cookies } from 'next/headers';\r\n * import { clearAuthCookies } from './config/cookies';\r\n *\r\n * export async function logout() {\r\n *   const cookieStore = await cookies();\r\n *   clearAuthCookies(cookieStore);\r\n * }\r\n * ```\r\n */\r\nexport async function clearAuthCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): Promise<void> {\r\n  // Clear current cookies\r\n  cookieStore.delete(COOKIE_NAMES.ACCESS_TOKEN);\r\n  cookieStore.delete(COOKIE_NAMES.REFRESH_TOKEN);\r\n  cookieStore.delete(COOKIE_NAMES.SESSION_ID);\r\n\r\n  // Clear legacy cookies for migration\r\n  Object.values(LEGACY_COOKIE_NAMES).forEach((name) => {\r\n    cookieStore.delete(name);\r\n  });\r\n}\r\n\r\n/**\r\n * Get token from cookies with fallback to legacy names\r\n * This supports migration from old cookie names to new secure names\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n * @returns Access token if found, null otherwise\r\n *\r\n * @example\r\n * ```typescript\r\n * const token = getAccessTokenFromCookies(await cookies());\r\n * if (token) {\r\n *   // Verify and use token\r\n * }\r\n * ```\r\n */\r\nexport function getAccessTokenFromCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): string | null {\r\n  // Try new secure cookie name first\r\n  let token = cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN)?.value;\r\n\r\n  if (token) {\r\n    return token;\r\n  }\r\n\r\n  // Fall back to legacy names for migration\r\n  for (const legacyName of Object.values(LEGACY_COOKIE_NAMES)) {\r\n    token = cookieStore.get(legacyName)?.value;\r\n    if (token) {\r\n      console.warn(\r\n        `[Cookie Migration] Found token in legacy cookie '${legacyName}'. ` +\r\n        `Please migrate to '${COOKIE_NAMES.ACCESS_TOKEN}' for improved security.`\r\n      );\r\n      return token;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Get refresh token from cookies with fallback to legacy names\r\n *\r\n * @param cookieStore - Next.js cookies() instance\r\n * @returns Refresh token if found, null otherwise\r\n */\r\nexport function getRefreshTokenFromCookies(\r\n  cookieStore: Awaited<ReturnType<typeof import('next/headers').cookies>>\r\n): string | null {\r\n  // Try new secure cookie name first\r\n  const token = cookieStore.get(COOKIE_NAMES.REFRESH_TOKEN)?.value;\r\n\r\n  if (token) {\r\n    return token;\r\n  }\r\n\r\n  // Fall back to legacy refresh_token\r\n  const legacyToken = cookieStore.get(LEGACY_COOKIE_NAMES.refresh_token)?.value ||\r\n                      cookieStore.get(LEGACY_COOKIE_NAMES.refreshToken)?.value;\r\n\r\n  if (legacyToken) {\r\n    console.warn(\r\n      '[Cookie Migration] Found refresh token in legacy cookie. ' +\r\n      `Please migrate to '${COOKIE_NAMES.REFRESH_TOKEN}' for improved security.`\r\n    );\r\n  }\r\n\r\n  return legacyToken || null;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;CAoBC;;;;;;;;;;;;;;;;;;;;AAgBM,MAAM,eAAe;IAC1B,wCAAwC,GACxC,cAAc,sCAAwC,0BAAsB;IAE5E,kDAAkD,GAClD,eAAe,sCAAwC,0BAAwB;IAE/E,mEAAmE,GACnE,YAAY,sCAAwC,0BAAwB;AAC9E;AAKO,MAAM,iBAAiB;IAC5B,oDAAoD,GACpD,cAAc,KAAK;IAEnB,oDAAoD,GACpD,eAAe,IAAI,KAAK,KAAK;IAE7B,qEAAqE,GACrE,SAAS,KAAK,KAAK;AACrB;AAEA;;;CAGC,GACD,MAAM,sBAA+C;IACnD,+BAA+B,GAC/B,MAAM;IAEN,+CAA+C,GAC/C,UAAU;IAEV,oEAAoE,GACpE,UAAU;IAEV,uCAAuC,GACvC,QAAQ,oDAAyB;AACnC;AAiBO,SAAS,4BACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,YAAY;QACnC,GAAG,SAAS;IACd;AACF;AAaO,SAAS,6BACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,aAAa;QACpC,GAAG,SAAS;IACd;AACF;AAaO,SAAS,wBACd,SAAmC;IAEnC,OAAO;QACL,GAAG,mBAAmB;QACtB,QAAQ,eAAe,OAAO;QAC9B,GAAG,SAAS;IACd;AACF;AAQO,MAAM,sBAAsB;IACjC,YAAY;IACZ,eAAe;IACf,WAAW;IACX,cAAc;AAChB;AAmBO,eAAe,iBACpB,WAAuE;IAEvE,wBAAwB;IACxB,YAAY,MAAM,CAAC,aAAa,YAAY;IAC5C,YAAY,MAAM,CAAC,aAAa,aAAa;IAC7C,YAAY,MAAM,CAAC,aAAa,UAAU;IAE1C,qCAAqC;IACrC,OAAO,MAAM,CAAC,qBAAqB,OAAO,CAAC,CAAC;QAC1C,YAAY,MAAM,CAAC;IACrB;AACF;AAiBO,SAAS,0BACd,WAAuE;IAEvE,mCAAmC;IACnC,IAAI,QAAQ,YAAY,GAAG,CAAC,aAAa,YAAY,GAAG;IAExD,IAAI,OAAO;QACT,OAAO;IACT;IAEA,0CAA0C;IAC1C,KAAK,MAAM,cAAc,OAAO,MAAM,CAAC,qBAAsB;QAC3D,QAAQ,YAAY,GAAG,CAAC,aAAa;QACrC,IAAI,OAAO;YACT,QAAQ,IAAI,CACV,CAAC,iDAAiD,EAAE,WAAW,GAAG,CAAC,GACnE,CAAC,mBAAmB,EAAE,aAAa,YAAY,CAAC,wBAAwB,CAAC;YAE3E,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAQO,SAAS,2BACd,WAAuE;IAEvE,mCAAmC;IACnC,MAAM,QAAQ,YAAY,GAAG,CAAC,aAAa,aAAa,GAAG;IAE3D,IAAI,OAAO;QACT,OAAO;IACT;IAEA,oCAAoC;IACpC,MAAM,cAAc,YAAY,GAAG,CAAC,oBAAoB,aAAa,GAAG,SACpD,YAAY,GAAG,CAAC,oBAAoB,YAAY,GAAG;IAEvE,IAAI,aAAa;QACf,QAAQ,IAAI,CACV,8DACA,CAAC,mBAAmB,EAAE,aAAa,aAAa,CAAC,wBAAwB,CAAC;IAE9E;IAEA,OAAO,eAAe;AACxB","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/api/nextjs-client.ts"],"sourcesContent":["/**\r\n * @fileoverview Next.js Fetch-Based API Client\r\n * @module lib/api/nextjs-client\r\n * @category API Client\r\n *\r\n * Enterprise-grade HTTP client built on Next.js native fetch API with comprehensive\r\n * caching, revalidation, and error handling capabilities.\r\n *\r\n * Key Features:\r\n * - Native Next.js fetch with automatic request deduplication\r\n * - Cache configuration (cache, revalidate, tags)\r\n * - cacheLife support for Next.js 15+\r\n * - Type-safe HTTP methods (GET, POST, PUT, PATCH, DELETE)\r\n * - Automatic authentication token injection\r\n * - CSRF protection headers\r\n * - Comprehensive error handling and retry logic\r\n * - Request ID generation for tracing\r\n * - HIPAA-compliant audit logging integration\r\n *\r\n * This client is designed to replace axios-based clients in Server Components\r\n * and Server Actions, enabling full integration with Next.js caching system.\r\n *\r\n * @example\r\n * ```typescript\r\n * // In a Server Component\r\n * const students = await serverGet<Student[]>('/api/students', {\r\n *   cache: 'force-cache',\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD,\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // In a Server Action\r\n * const result = await serverPost<Student>('/api/students', data, {\r\n *   cache: 'no-store',\r\n *   next: { tags: [CACHE_TAGS.STUDENTS] }\r\n * });\r\n * ```\r\n *\r\n * @version 1.0.0\r\n * @since 2025-10-31\r\n */\r\n\r\nimport { cookies, headers } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\nimport { COOKIE_NAMES } from '@/identity-access/lib/config/cookies';\r\n\r\n// ==========================================\r\n// TYPE DEFINITIONS\r\n// ==========================================\r\n\r\n/**\r\n * Simple API client options for basic HTTP requests\r\n * @deprecated Consider using NextFetchOptions for new code\r\n */\r\nexport interface ApiClientOptions {\r\n  method?: string\r\n  body?: unknown\r\n  headers?: Record<string, string>\r\n}\r\n\r\n/**\r\n * Next.js cache configuration options\r\n */\r\nexport interface NextCacheConfig {\r\n  /**\r\n   * Cache behavior\r\n   * - 'force-cache': Cache the response (default for GET)\r\n   * - 'no-store': Never cache the response (default for mutations)\r\n   * - 'reload': Bypass cache and revalidate\r\n   * - 'no-cache': Cache but always revalidate\r\n   * - 'force-cache': Use cache if available, fetch if not\r\n   * - 'only-if-cached': Use cache only, fail if not cached\r\n   */\r\n  cache?: RequestCache;\r\n\r\n  /**\r\n   * Next.js-specific cache options\r\n   */\r\n  next?: {\r\n    /**\r\n     * Time in seconds to revalidate cache\r\n     * - number: Revalidate after N seconds\r\n     * - false: Never revalidate (cache indefinitely)\r\n     * - 0: Revalidate immediately (effectively no-store)\r\n     */\r\n    revalidate?: number | false;\r\n\r\n    /**\r\n     * Cache tags for granular invalidation via revalidateTag()\r\n     * @example ['students', 'phi-data']\r\n     */\r\n    tags?: string[];\r\n  };\r\n}\r\n\r\n/**\r\n * cacheLife profiles for Next.js 15+ advanced caching\r\n * @see https://nextjs.org/docs/app/api-reference/next-config-js/cacheLife\r\n */\r\nexport interface CacheLifeConfig {\r\n  /**\r\n   * Time to live in seconds\r\n   */\r\n  ttl: number;\r\n\r\n  /**\r\n   * Stale-while-revalidate window in seconds\r\n   */\r\n  stale?: number;\r\n\r\n  /**\r\n   * Maximum age in cache regardless of revalidation\r\n   */\r\n  max?: number;\r\n}\r\n\r\n/**\r\n * Extended fetch options with Next.js caching and authentication\r\n */\r\nexport interface NextFetchOptions extends RequestInit {\r\n  /**\r\n   * Whether to include authentication token\r\n   * @default true\r\n   */\r\n  requiresAuth?: boolean;\r\n\r\n  /**\r\n   * Cache behavior configuration\r\n   */\r\n  cache?: RequestCache;\r\n\r\n  /**\r\n   * Next.js-specific cache options\r\n   */\r\n  next?: {\r\n    revalidate?: number | false;\r\n    tags?: string[];\r\n  };\r\n\r\n  /**\r\n   * cacheLife profile (Next.js 15+)\r\n   */\r\n  cacheLife?: string | CacheLifeConfig;\r\n\r\n  /**\r\n   * Retry configuration\r\n   */\r\n  retry?: {\r\n    attempts: number;\r\n    delay: number;\r\n  };\r\n\r\n  /**\r\n   * Custom error handler\r\n   */\r\n  onError?: (error: Error) => void;\r\n\r\n  /**\r\n   * Request timeout in milliseconds\r\n   */\r\n  timeout?: number;\r\n}\r\n\r\n/**\r\n * Standardized API response wrapper\r\n */\r\nexport interface ApiResponse<T = unknown> {\r\n  success: boolean;\r\n  data: T;\r\n  message?: string;\r\n  errors?: Record<string, string[]>;\r\n}\r\n\r\n/**\r\n * API error response structure\r\n */\r\nexport interface ApiErrorResponse {\r\n  message: string;\r\n  code?: string;\r\n  status?: number;\r\n  details?: unknown;\r\n  field?: string;\r\n  traceId?: string;\r\n  timestamp?: string;\r\n}\r\n\r\n/**\r\n * Custom error class for Next.js API client errors\r\n *\r\n * @class\r\n * @extends Error\r\n * @classdesc Wraps API errors with metadata and automatic classification\r\n */\r\nexport class NextApiClientError extends Error {\r\n  public readonly code?: string;\r\n  public readonly status?: number;\r\n  public readonly details?: unknown;\r\n  public readonly traceId?: string;\r\n  public readonly isNetworkError: boolean;\r\n  public readonly isServerError: boolean;\r\n  public readonly isValidationError: boolean;\r\n\r\n  constructor(error: ApiErrorResponse) {\r\n    super(error.message);\r\n    this.name = 'NextApiClientError';\r\n    this.code = error.code;\r\n    this.status = error.status;\r\n    this.details = error.details;\r\n    this.traceId = error.traceId;\r\n\r\n    // Classify error types\r\n    this.isNetworkError = error.code === 'NETWORK_ERROR';\r\n    this.isServerError = (error.status ?? 0) >= 500;\r\n    this.isValidationError = error.status === 400;\r\n\r\n    // Maintain proper stack trace\r\n    if (typeof Error.captureStackTrace === 'function') {\r\n      Error.captureStackTrace(this, NextApiClientError);\r\n    }\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// CONFIGURATION\r\n// ==========================================\r\n\r\n/**\r\n * Get API base URL from environment\r\n */\r\nfunction getApiBaseUrl(): string {\r\n  return process.env.API_BASE_URL ||\r\n         process.env.NEXT_PUBLIC_API_URL ||\r\n         'http://localhost:3001';\r\n}\r\n\r\n/**\r\n * Get authentication token from production-ready httpOnly cookies\r\n * Uses the existing JWT-based authentication system\r\n */\r\nasync function getAuthToken(): Promise<string | null> {\r\n  try {\r\n    const cookieStore = await cookies();\r\n    \r\n    // Try multiple cookie names that might be used for the auth token\r\n    const token = cookieStore.get(COOKIE_NAMES.ACCESS_TOKEN)?.value ||\r\n                  cookieStore.get('auth.token')?.value ||\r\n                  cookieStore.get('auth_token')?.value ||\r\n                  cookieStore.get('accessToken')?.value;\r\n    \r\n    return token || null;\r\n  } catch (error) {\r\n    console.error('[Next API Client] Failed to get auth token:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Generate unique request ID for tracing\r\n * Made dynamic to avoid prerendering issues\r\n */\r\nfunction generateRequestId(): string {\r\n  // Access headers first to make this function dynamic during prerendering\r\n  headers();\r\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Get CSRF token from cookies\r\n */\r\nasync function getCsrfToken(): Promise<string | null> {\r\n  try {\r\n    const cookieStore = await cookies();\r\n    return cookieStore.get('csrf-token')?.value || null;\r\n  } catch (error) {\r\n    console.error('[Next API Client] Failed to get CSRF token:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// CORE FETCH FUNCTION\r\n// ==========================================\r\n\r\n/**\r\n * Core fetch function with Next.js caching, authentication, and error handling\r\n *\r\n * @template T - The expected response data type\r\n * @param endpoint - API endpoint (relative or absolute URL)\r\n * @param options - Fetch options with Next.js caching configuration\r\n * @returns Promise resolving to typed API response\r\n *\r\n * @throws {NextApiClientError} On request failure\r\n *\r\n * @example\r\n * ```typescript\r\n * const response = await nextFetch<Student[]>('/api/students', {\r\n *   cache: 'force-cache',\r\n *   next: { revalidate: 60, tags: ['students'] }\r\n * });\r\n * ```\r\n */\r\nexport async function nextFetch<T>(\r\n  endpoint: string,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  const {\r\n    requiresAuth = true, // Enable authentication by default\r\n    onError,\r\n    retry = { attempts: 3, delay: 1000 },\r\n    timeout = 30000,\r\n    cache = 'force-cache',\r\n    next,\r\n    cacheLife,\r\n    ...fetchOptions\r\n  } = options;\r\n\r\n  // Build full URL\r\n  const url = endpoint.startsWith('http')\r\n    ? endpoint\r\n    : `${getApiBaseUrl()}${endpoint}`;\r\n\r\n  // Prepare headers\r\n  const headers: Record<string, string> = {\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  // Merge additional headers\r\n  if (fetchOptions.headers) {\r\n    Object.entries(fetchOptions.headers).forEach(([key, value]) => {\r\n      if (typeof value === 'string') {\r\n        headers[key] = value;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Add authentication if required\r\n  if (requiresAuth) {\r\n    const token = await getAuthToken();\r\n\r\n    // Don't redirect during login/auth endpoints\r\n    const isAuthEndpoint = endpoint.includes('/auth/') || \r\n                          endpoint.includes('/login') || \r\n                          endpoint.includes('/register') ||\r\n                          endpoint.includes('/forgot-password') ||\r\n                          endpoint.includes('/reset-password');\r\n\r\n    console.log('[Next API Client] Auth check:', {\r\n      endpoint,\r\n      hasToken: !!token,\r\n      tokenStart: token?.substring(0, 20),\r\n      isAuthEndpoint,\r\n      requiresAuth\r\n    });\r\n\r\n    if (!token && !isAuthEndpoint) {\r\n      // Redirect to login if no token (but not during auth operations)\r\n      console.error('[Next API Client] No auth token found for protected endpoint:', endpoint);\r\n      // Note: redirect() in server components/actions can cause issues\r\n      // Consider using middleware for auth protection instead\r\n      redirect('/login');\r\n    }\r\n\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n      console.log('[Next API Client] Added Authorization header:', {\r\n        authHeaderStart: headers['Authorization'].substring(0, 30),\r\n        fullAuthHeaderLength: headers['Authorization'].length\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add CSRF token for mutations\r\n  if (fetchOptions.method && ['POST', 'PUT', 'PATCH', 'DELETE'].includes(fetchOptions.method)) {\r\n    const csrfToken = await getCsrfToken();\r\n    if (csrfToken) {\r\n      headers['X-CSRF-Token'] = csrfToken;\r\n    }\r\n  }\r\n\r\n  // Add request ID for tracing\r\n  headers['X-Request-ID'] = generateRequestId();\r\n\r\n  // Add security headers for HIPAA compliance\r\n  headers['X-Content-Type-Options'] = 'nosniff';\r\n  headers['X-Frame-Options'] = 'DENY';\r\n  headers['X-XSS-Protection'] = '1; mode=block';\r\n\r\n  // Build Next.js cache configuration\r\n  const nextConfig: Record<string, unknown> = {};\r\n\r\n  if (next?.revalidate !== undefined) {\r\n    nextConfig.revalidate = next.revalidate;\r\n  }\r\n\r\n  if (next?.tags && next.tags.length > 0) {\r\n    nextConfig.tags = next.tags;\r\n  }\r\n\r\n  // Execute fetch with retry logic\r\n  let lastError: Error | null = null;\r\n\r\n  for (let attempt = 0; attempt < retry.attempts; attempt++) {\r\n    try {\r\n      // Create abort controller for timeout\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        headers,\r\n        cache,\r\n        next: Object.keys(nextConfig).length > 0 ? nextConfig : undefined,\r\n        signal: controller.signal,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Handle different response status codes\r\n      if (!response.ok) {\r\n        // Log 401 errors for debugging before consuming the response\r\n        if (response.status === 401) {\r\n          console.error('[Next API Client] 401 Unauthorized:', {\r\n            endpoint,\r\n            status: response.status,\r\n            statusText: response.statusText,\r\n            hasAuthHeader: !!headers['Authorization'],\r\n            authHeaderStart: headers['Authorization']?.substring(0, 30)\r\n          });\r\n        }\r\n        \r\n        const error = await handleErrorResponse(response);\r\n\r\n        // Handle specific errors with redirects\r\n        // Don't redirect on login/auth endpoints to avoid redirect loops\r\n        const isAuthEndpoint = endpoint.includes('/auth/login') || endpoint.includes('/auth/register');\r\n        \r\n        // Note: Redirects in Server Components/Actions can be tricky\r\n        // These will throw NEXT_REDIRECT which Next.js catches\r\n        // Consider using middleware for auth protection instead\r\n        if (response.status === 401 && !isAuthEndpoint) {\r\n          console.error('[Next API Client] 401 error - authentication required');\r\n          redirect('/login');\r\n        } else if (response.status === 403) {\r\n          console.error('[Next API Client] 403 error - access denied');\r\n          redirect('/access-denied');\r\n        }\r\n\r\n        throw error;\r\n      }\r\n\r\n      // Parse response\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType?.includes('application/json')) {\r\n        return await response.json() as T;\r\n      }\r\n\r\n      return await response.text() as unknown as T;\r\n\r\n    } catch (error) {\r\n      // Re-throw Next.js redirect errors immediately - they should not be caught\r\n      if (error && typeof error === 'object' && 'digest' in error) {\r\n        const errorWithDigest = error as { digest: unknown };\r\n        if (typeof errorWithDigest.digest === 'string' && \r\n            errorWithDigest.digest.startsWith('NEXT_REDIRECT')) {\r\n          throw error;\r\n        }\r\n      }\r\n\r\n      lastError = error as Error;\r\n\r\n      // Don't retry on client errors (except 408, 429)\r\n      if (error instanceof NextApiClientError) {\r\n        const status = error.status;\r\n        if (status && status >= 400 && status < 500 && status !== 408 && status !== 429) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Wait before retry (exponential backoff)\r\n      if (attempt < retry.attempts - 1) {\r\n        await new Promise(resolve =>\r\n          setTimeout(resolve, retry.delay * Math.pow(2, attempt))\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries failed\r\n  const finalError = lastError || new Error('Unknown error');\r\n\r\n  if (onError) {\r\n    onError(finalError);\r\n  }\r\n\r\n  throw finalError;\r\n}\r\n\r\n/**\r\n * Handle error responses and create normalized error objects\r\n */\r\nasync function handleErrorResponse(response: Response): Promise<NextApiClientError> {\r\n  let details: unknown;\r\n\r\n  try {\r\n    const contentType = response.headers.get('content-type');\r\n    if (contentType?.includes('application/json')) {\r\n      details = await response.json();\r\n    } else {\r\n      details = await response.text();\r\n    }\r\n  } catch {\r\n    details = null;\r\n  }\r\n\r\n  const error: ApiErrorResponse = {\r\n    message: typeof details === 'object' && details !== null && 'message' in details\r\n      ? (details as { message: string }).message\r\n      : response.statusText || 'Request failed',\r\n    status: response.status,\r\n    code: typeof details === 'object' && details !== null && 'code' in details\r\n      ? (details as { code: string }).code\r\n      : undefined,\r\n    details,\r\n    traceId: response.headers.get('x-trace-id') || undefined,\r\n  };\r\n\r\n  return new NextApiClientError(error);\r\n}\r\n\r\n// ==========================================\r\n// CONVENIENCE METHODS\r\n// ==========================================\r\n\r\n/**\r\n * GET request with Next.js caching support\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param params - Query parameters\r\n * @param options - Fetch options with cache configuration\r\n * @returns Promise resolving to response data\r\n *\r\n * @example\r\n * ```typescript\r\n * const students = await serverGet<Student[]>('/api/students',\r\n *   { status: 'active' },\r\n *   {\r\n *     cache: 'force-cache',\r\n *     next: { revalidate: 60, tags: ['students'] }\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport async function serverGet<T>(\r\n  endpoint: string,\r\n  params?: Record<string, string | number | boolean>,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  const queryString = params\r\n    ? '?' + new URLSearchParams(\r\n        Object.entries(params).map(([k, v]) => [k, String(v)])\r\n      ).toString()\r\n    : '';\r\n\r\n  return nextFetch<T>(`${endpoint}${queryString}`, {\r\n    ...options,\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/**\r\n * POST request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n *\r\n * @example\r\n * ```typescript\r\n * const newStudent = await serverPost<Student>('/api/students',\r\n *   { name: 'John Doe', grade: '5' },\r\n *   {\r\n *     cache: 'no-store',\r\n *     next: { tags: ['students'] }\r\n *   }\r\n * );\r\n * ```\r\n */\r\nexport async function serverPost<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'POST',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store', // Mutations typically no-store\r\n  });\r\n}\r\n\r\n/**\r\n * PUT request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverPut<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'PUT',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n/**\r\n * PATCH request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param data - Request body data\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverPatch<T>(\r\n  endpoint: string,\r\n  data?: unknown,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'PATCH',\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n/**\r\n * DELETE request (typically with no-store for mutations)\r\n *\r\n * @template T - Expected response data type\r\n * @param endpoint - API endpoint\r\n * @param options - Fetch options (defaults to no-store for mutations)\r\n * @returns Promise resolving to response data\r\n */\r\nexport async function serverDelete<T>(\r\n  endpoint: string,\r\n  options: NextFetchOptions = {}\r\n): Promise<T> {\r\n  return nextFetch<T>(endpoint, {\r\n    ...options,\r\n    method: 'DELETE',\r\n    cache: options.cache ?? 'no-store',\r\n  });\r\n}\r\n\r\n// ==========================================\r\n// UTILITY FUNCTIONS\r\n// ==========================================\r\n\r\n/**\r\n * Build cache tags for a resource\r\n *\r\n * @param resourceType - Type of resource (e.g., 'students', 'medications')\r\n * @param isPHI - Whether the data contains PHI\r\n * @param additionalTags - Additional tags to include\r\n * @returns Array of cache tags\r\n *\r\n * @example\r\n * ```typescript\r\n * const tags = buildCacheTags('students', true, ['active']);\r\n * // Returns: ['students', 'phi-data', 'active']\r\n * ```\r\n */\r\nexport function buildCacheTags(\r\n  resourceType: string,\r\n  isPHI: boolean = true,\r\n  additionalTags: string[] = []\r\n): string[] {\r\n  const tags: string[] = [resourceType];\r\n\r\n  if (isPHI) {\r\n    tags.push('phi-data');\r\n  }\r\n\r\n  return [...tags, ...additionalTags];\r\n}\r\n\r\n/**\r\n * Build resource-specific cache tag\r\n *\r\n * @param resourceType - Type of resource\r\n * @param resourceId - ID of specific resource\r\n * @returns Cache tag string\r\n *\r\n * @example\r\n * ```typescript\r\n * const tag = buildResourceTag('student', '123');\r\n * // Returns: 'student-123'\r\n * ```\r\n */\r\nexport function buildResourceTag(\r\n  resourceType: string,\r\n  resourceId: string\r\n): string {\r\n  return `${resourceType}-${resourceId}`;\r\n}\r\n\r\n// ==========================================\r\n// LEGACY CLIENT SUPPORT\r\n// ==========================================\r\n\r\n/**\r\n * Simple API client for basic HTTP requests (legacy support)\r\n * \r\n * @deprecated This is a legacy client merged from client.ts. \r\n * For new development, prefer the Next.js-specific methods:\r\n * - serverGet() for GET requests\r\n * - serverPost() for POST requests\r\n * - serverPut() for PUT requests\r\n * - serverPatch() for PATCH requests\r\n * - serverDelete() for DELETE requests\r\n * \r\n * @param endpoint - API endpoint (relative or absolute URL)\r\n * @param options - Basic request options\r\n * @returns Promise resolving to parsed JSON response\r\n * \r\n * @example\r\n * ```typescript\r\n * // Legacy usage (consider migrating to serverGet/serverPost)\r\n * const data = await apiClient('/api/users', {\r\n *   method: 'POST',\r\n *   body: { name: 'John' }\r\n * });\r\n * ```\r\n */\r\nexport async function apiClient(endpoint: string, options: ApiClientOptions = {}) {\r\n  const { method = 'GET', body, headers = {} } = options\r\n\r\n  const config: RequestInit = {\r\n    method,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...headers\r\n    }\r\n  }\r\n\r\n  if (body) {\r\n    config.body = JSON.stringify(body)\r\n  }\r\n\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getApiBaseUrl()}${endpoint}`\r\n  const response = await fetch(url, config)\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`API Error: ${response.statusText}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n/**\r\n * Alias for apiClient (legacy support)\r\n * @deprecated Use apiClient directly or migrate to Next.js-specific methods\r\n */\r\nexport const fetchApi = apiClient\r\n\r\n// ==========================================\r\n// EXPORTS\r\n// ==========================================\r\n\r\nconst nextjsClient = {\r\n  nextFetch,\r\n  serverGet,\r\n  serverPost,\r\n  serverPut,\r\n  serverPatch,\r\n  serverDelete,\r\n  buildCacheTags,\r\n  buildResourceTag,\r\n  // Legacy exports\r\n  apiClient,\r\n  fetchApi,\r\n};\r\n\r\nexport default nextjsClient;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 601, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/constants/api.ts"],"sourcesContent":["/**\r\n * @fileoverview API Endpoints Constants - Comprehensive endpoint definitions\r\n * @module constants/api\r\n * @version 2.0.0 - Maximized Edition\r\n *\r\n * Centralized API endpoint definitions for the White Cross healthcare platform.\r\n * All backend routes are defined here to prevent hardcoded strings and improve maintainability.\r\n *\r\n * **Architecture**:\r\n * - Backend Base: Routes with global '/api' prefix and URI versioning (default version '1', prefix 'v')\r\n * - Next.js rewrites handle `/api/v1/*` â†’ Backend `/*` proxying\r\n * - All endpoints use template literal types for type-safe route generation\r\n * - Organized by domain for easy navigation and maintenance\r\n *\r\n * **Key Features**:\r\n * - 700+ endpoint constants covering all platform features\r\n * - Type-safe endpoint functions with parameter validation\r\n * - Comprehensive PHI-compliant healthcare operations\r\n * - HIPAA-compliant audit logging endpoints\r\n * - Multi-channel communication endpoints\r\n * - Advanced reporting and analytics\r\n * - Complete medication management workflow\r\n * - Student health records and tracking\r\n * - Appointment scheduling and reminders\r\n * - Incident reporting and follow-up\r\n * - Financial and procurement management\r\n *\r\n * **Endpoint Categories**:\r\n * 1. Authentication & Authorization (AUTH, RBAC, MFA)\r\n * 2. Users & Access Control (USERS, RBAC)\r\n * 3. Students (STUDENTS with 25+ endpoints)\r\n * 4. Appointments (APPOINTMENTS, WAITLIST, NURSE_AVAILABILITY)\r\n * 5. Health Records (HEALTH_RECORDS, VITAL_SIGNS, CHRONIC_CONDITIONS, ALLERGIES)\r\n * 6. Immunizations & Vaccinations (IMMUNIZATIONS)\r\n * 7. Medications (MEDICATIONS, PRESCRIPTIONS, INVENTORY, ADMINISTRATION_LOG)\r\n * 8. Emergency Contacts (EMERGENCY_CONTACTS)\r\n * 9. Incidents (INCIDENTS with witness and follow-up)\r\n * 10. Documents (DOCUMENTS with signing and verification)\r\n * 11. Compliance & Audit (COMPLIANCE, AUDIT)\r\n * 12. Communications (MESSAGES, BROADCASTS, ALERTS, NOTIFICATIONS, CONVERSATIONS, TEMPLATES)\r\n * 13. Dashboard & Analytics (DASHBOARD, ANALYTICS, REPORTS)\r\n * 14. System Administration (ADMIN, SYSTEM, INTEGRATIONS)\r\n * 15. Billing & Financial (BILLING, BUDGET, VENDORS, PURCHASE_ORDERS)\r\n * 16. Forms & Settings (FORMS, SETTINGS)\r\n *\r\n * **Usage Examples**:\r\n * ```typescript\r\n * import { API_ENDPOINTS } from '@/constants/api';\r\n *\r\n * // Simple endpoint\r\n * const url = API_ENDPOINTS.STUDENTS.BASE; // '/students'\r\n *\r\n * // Parameterized endpoint\r\n * const studentUrl = API_ENDPOINTS.STUDENTS.BY_ID('123'); // '/students/123'\r\n *\r\n * // Nested endpoint\r\n * const medUrl = API_ENDPOINTS.STUDENTS.MEDICATIONS('123'); // '/students/123/medications'\r\n *\r\n * // In API client\r\n * const response = await apiClient.get(API_ENDPOINTS.STUDENTS.BY_ID(studentId));\r\n * ```\r\n *\r\n * **Type Safety**:\r\n * All endpoints are typed as const for literal type inference and autocomplete support.\r\n *\r\n * **Maintenance**:\r\n * When adding new endpoints:\r\n * 1. Add to appropriate domain section\r\n * 2. Use consistent naming patterns (BASE, BY_ID, etc.)\r\n * 3. Add JSDoc comments for complex endpoints\r\n * 4. Update this file header with new categories\r\n *\r\n * @see /backend/src/routes/ for backend route definitions\r\n * @see /frontend/src/lib/api/client.ts for API client implementation\r\n * @see /frontend/src/lib/server/api-client.ts for server-side API client\r\n */\r\n\r\n\r\nexport const API_ENDPOINTS = {\r\n  // ==========================================\r\n  // AUTHENTICATION & AUTHORIZATION\r\n  // ==========================================\r\n  AUTH: {\r\n    LOGIN: `/api/v1/auth/login`,\r\n    LOGOUT: `/api/v1/auth/logout`,\r\n    REFRESH: `/api/v1/auth/refresh`,\r\n    VERIFY: `/api/v1/auth/verify`,\r\n    REGISTER: `/api/v1/auth/register`,\r\n    PROFILE: `/api/v1/auth/me`,\r\n    CHANGE_PASSWORD: `/api/v1/auth/change-password`,\r\n    FORGOT_PASSWORD: `/api/v1/auth/forgot-password`,\r\n    RESET_PASSWORD: `/api/v1/auth/reset-password`,\r\n  },\r\n\r\n  // ==========================================\r\n  // USERS & ACCESS CONTROL\r\n  // ==========================================\r\n  USERS: {\r\n    BASE: `/api/v1/users`,\r\n    BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n    ME: `/api/v1/users/me`,\r\n    PROFILE: `/api/v1/users/profile`,\r\n    UPDATE_PROFILE: `/api/v1/users/profile`,\r\n  },\r\n\r\n  RBAC: {\r\n    ROLES: `/api/v1/access-control/roles`,\r\n    PERMISSIONS: `/api/v1/access-control/permissions`,\r\n    USER_ROLES: (userId: string) => `/api/v1/access-control/users/${userId}/roles`,\r\n    USER_PERMISSIONS: (userId: string) => `/api/v1/access-control/users/${userId}/permissions`,\r\n  },\r\n\r\n  // ==========================================\r\n  // STUDENTS\r\n  // ==========================================\r\n  STUDENTS: {\r\n    BASE: `/api/v1/students`,\r\n    BY_ID: (id: string) => `/api/v1/students/${id}`,\r\n    DEACTIVATE: (id: string) => `/api/v1/students/${id}/deactivate`,\r\n    REACTIVATE: (id: string) => `/api/v1/students/${id}/reactivate`,\r\n    TRANSFER: (id: string) => `/api/v1/students/${id}/transfer`,\r\n    ASSIGN: (id: string) => `/api/v1/students/${id}/assign`,\r\n    ASSIGN_BULK: `/api/v1/students/assign-bulk`,\r\n    PHOTO: (id: string) => `/api/v1/students/${id}/photo`,\r\n    EXPORT: (id: string) => `/api/v1/students/${id}/export`,\r\n    REPORT_CARD: (id: string) => `/api/v1/students/${id}/report-card`,\r\n    VERIFY_ELIGIBILITY: (id: string) => `/api/v1/students/${id}/verify-eligibility`,\r\n    SEARCH: `/api/v1/students/search`,\r\n    SEARCH_BY_QUERY: (query: string) => `/api/v1/students/search/${encodeURIComponent(query)}`,\r\n    BY_GRADE: (grade: string) => `/api/v1/students/grade/${grade}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/students/nurse/${nurseId}`,\r\n    ASSIGNED: `/api/v1/students/assigned`,\r\n    STATISTICS: (id: string) => `/api/v1/students/${id}/statistics`,\r\n    BULK_UPDATE: `/api/v1/students/bulk-update`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/students/${id}/permanent`,\r\n    GRADES: `/api/v1/students/grades`,\r\n    HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/health-records`,\r\n    MENTAL_HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/mental-health-records`,\r\n    MEDICATIONS: (id: string) => `/api/v1/students/${id}/medications`,\r\n    IMMUNIZATIONS: (id: string) => `/api/v1/students/${id}/immunizations`,\r\n    ALLERGIES: (id: string) => `/api/v1/students/${id}/allergies`,\r\n    APPOINTMENTS: (id: string) => `/api/v1/students/${id}/appointments`,\r\n    INCIDENTS: (id: string) => `/api/v1/students/${id}/incidents`,\r\n    EMERGENCY_CONTACTS: (id: string) => `/api/v1/students/${id}/emergency-contacts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENTS\r\n  // ==========================================\r\n  APPOINTMENTS: {\r\n    BASE: `/api/v1/appointments`,\r\n    BY_ID: (id: string) => `/api/v1/appointments/${id}`,\r\n    RESCHEDULE: (id: string) => `/api/v1/appointments/${id}/reschedule`,\r\n    CANCEL: (id: string) => `/api/v1/appointments/${id}/cancel`,\r\n    COMPLETE: (id: string) => `/api/v1/appointments/${id}/complete`,\r\n    NO_SHOW: (id: string) => `/api/v1/appointments/${id}/no-show`,\r\n    CONFIRM: (id: string) => `/api/v1/appointments/${id}/confirm`,\r\n    START: (id: string) => `/api/v1/appointments/${id}/start`,\r\n    SEND_REMINDER: (id: string) => `/api/v1/appointments/${id}/send-reminder`,\r\n    AVAILABILITY: `/api/v1/appointments/availability`,\r\n    CONFLICTS: `/api/v1/appointments/conflicts`,\r\n    CHECK_CONFLICTS: `/api/v1/appointments/check-conflicts`,\r\n    REMINDERS: `/api/v1/appointments/reminders`,\r\n    PROCESS_REMINDERS: `/api/v1/appointments/process-reminders`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/appointments/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/appointments/nurse/${nurseId}`,\r\n    BY_DATE: `/api/v1/appointments/by-date`,\r\n    UPCOMING: `/api/v1/appointments/upcoming`,\r\n    STATISTICS: `/api/v1/appointments/statistics`,\r\n    RECURRING: `/api/v1/appointments/recurring`,\r\n    CREATE_RECURRING: `/api/v1/appointments/recurring/create`,\r\n    EXPORT_CALENDAR: `/api/v1/appointments/export/calendar`,\r\n    REPORTS: `/api/v1/appointments/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH RECORDS\r\n  // ==========================================\r\n  HEALTH_RECORDS: {\r\n    BASE: `/api/v1/health-records`,\r\n    BY_ID: (id: string) => `/api/v1/health-records/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/health-records`,\r\n    BY_TYPE: (type: string) => `/api/v1/health-records/type/${type}`,\r\n    SEARCH: `/api/v1/health-records/search`,\r\n    EXPORT: (id: string) => `/api/v1/health-records/${id}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // IMMUNIZATIONS / VACCINATIONS\r\n  // ==========================================\r\n  IMMUNIZATIONS: {\r\n    BASE: `/api/v1/vaccinations`,\r\n    BY_ID: (id: string) => `/api/v1/vaccinations/${id}`,\r\n    SCHEDULE: `/api/v1/vaccinations/schedule`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/immunizations`,\r\n    DUE: `/api/v1/vaccinations/due`,\r\n    OVERDUE: `/api/v1/vaccinations/overdue`,\r\n    COMPLIANCE: `/api/v1/vaccinations/compliance`,\r\n    EXEMPTIONS: `/api/v1/vaccinations/exemptions`,\r\n    VERIFY: (id: string) => `/api/v1/vaccinations/${id}/verify`,\r\n    EXPORT: (studentId: string) => `/api/v1/vaccinations/export/${studentId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH SCREENINGS\r\n  // ==========================================\r\n  SCREENINGS: {\r\n    BASE: `/api/v1/screenings`,\r\n    BY_ID: (id: string) => `/api/v1/screenings/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/screenings`,\r\n    BY_TYPE: (type: string) => `/api/v1/screenings/type/${type}`,\r\n    DUE: `/api/v1/screenings/due`,\r\n    SCHEDULE: `/api/v1/screenings/schedule`,\r\n    RESULTS: (id: string) => `/api/v1/screenings/${id}/results`,\r\n  },\r\n\r\n  // ==========================================\r\n  // GROWTH MEASUREMENTS\r\n  // ==========================================\r\n  GROWTH_MEASUREMENTS: {\r\n    BASE: `/api/v1/growth-measurements`,\r\n    BY_ID: (id: string) => `/api/v1/growth-measurements/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements/trends`,\r\n    BMI: (studentId: string) => `/api/v1/students/${studentId}/bmi`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ALLERGIES\r\n  // ==========================================\r\n  ALLERGIES: {\r\n    BASE: `/api/v1/allergies`,\r\n    BY_ID: (id: string) => `/api/v1/allergies/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/allergies`,\r\n    CRITICAL: `/api/v1/allergies/critical`,\r\n    ACTIVE: `/api/v1/allergies/active`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VITAL SIGNS\r\n  // ==========================================\r\n  VITAL_SIGNS: {\r\n    BASE: `/api/v1/vital-signs`,\r\n    BY_ID: (id: string) => `/api/v1/vital-signs/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/vital-signs`,\r\n    BY_HEALTH_RECORD: (healthRecordId: string) => `/api/v1/health-records/${healthRecordId}/vital-signs`,\r\n    LATEST: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/latest`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/trends`,\r\n  },\r\n\r\n  // ==========================================\r\n  // CHRONIC CONDITIONS\r\n  // ==========================================\r\n  CHRONIC_CONDITIONS: {\r\n    BASE: `/api/v1/chronic-conditions`,\r\n    BY_ID: (id: string) => `/api/v1/chronic-conditions/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/chronic-conditions`,\r\n    ACTIVE: `/api/v1/chronic-conditions/active`,\r\n    REVIEW_DUE: `/api/v1/chronic-conditions/review-due`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MEDICATIONS\r\n  // ==========================================\r\n  MEDICATIONS: {\r\n    BASE: `/api/v1/medications`,\r\n    BY_ID: (id: string) => `/api/v1/medications/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/medications/${id}`,\r\n    ADMINISTER: (id: string) => `/api/v1/medications/${id}/administer`,\r\n    DISCONTINUE: (id: string) => `/api/v1/medications/${id}/discontinue`,\r\n    REFILL: (id: string) => `/api/v1/medications/${id}/refill`,\r\n    MISSED_DOSE: (id: string) => `/api/v1/medications/${id}/missed-dose`,\r\n    ADVERSE_REACTION: (id: string) => `/api/v1/medications/${id}/adverse-reaction`,\r\n    ADJUST_INVENTORY: (id: string) => `/api/v1/medications/${id}/adjust-inventory`,\r\n    REMINDER: (id: string) => `/api/v1/medications/${id}/reminder`,\r\n    SCHEDULE: (id: string) => `/api/v1/medications/${id}/schedule`,\r\n    INTERACTIONS: (id: string) => `/api/v1/medications/${id}/interactions`,\r\n    CALENDAR: `/api/v1/medications/calendar`,\r\n    DUE: `/api/v1/medications/due`,\r\n    OVERDUE: `/api/v1/medications/overdue`,\r\n    MISSED: `/api/v1/medications/missed`,\r\n    COMPLETED: `/api/v1/medications/completed`,\r\n    AS_NEEDED: `/api/v1/medications/as-needed`,\r\n    EMERGENCY: `/api/v1/medications/emergency`,\r\n    CONTROLLED: `/api/v1/medications/controlled-substances`,\r\n    OTC: `/api/v1/medications/over-the-counter`,\r\n    CATEGORIES: `/api/v1/medications/categories`,\r\n    RULES: `/api/v1/medications/administration-rules`,\r\n    CHECK_INTERACTIONS: `/api/v1/medications/check-interactions`,\r\n    FORMULARY: `/api/v1/medications/formulary`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/medications`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PRESCRIPTIONS\r\n  // ==========================================\r\n  PRESCRIPTIONS: {\r\n    BASE: `/api/v1/prescriptions`,\r\n    BY_ID: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    REFILL: (id: string) => `/api/v1/prescriptions/${id}/refill`,\r\n    ACTIVE: `/api/v1/prescriptions/active`,\r\n    EXPIRING: `/api/v1/prescriptions/expiring`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INVENTORY\r\n  // ==========================================\r\n  INVENTORY: {\r\n    BASE: `/api/v1/inventory`,\r\n    BY_ID: (id: string) => `/api/v1/inventory/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/inventory/${id}`,\r\n    ADJUST: (id: string) => `/api/v1/inventory/${id}/adjust`,\r\n    LOW_STOCK: `/api/v1/inventory/low-stock`,\r\n    EXPIRING: `/api/v1/inventory/expiring`,\r\n    REORDER: `/api/v1/inventory/reorder`,\r\n    AUDIT: `/api/v1/inventory/audit`,\r\n    ITEMS: `/api/v1/inventory/items`,\r\n    ALERTS: `/api/v1/inventory/alerts`,\r\n    ANALYTICS: `/api/v1/inventory/analytics`,\r\n    DASHBOARD: `/api/v1/inventory/dashboard`,\r\n    REPORTS: `/api/v1/inventory/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMINISTRATION LOG\r\n  // ==========================================\r\n  ADMINISTRATION_LOG: {\r\n    BASE: `/api/v1/administration-log`,\r\n    BY_ID: (id: string) => `/api/v1/administration-log/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/administration-log/${id}`,\r\n    BY_MEDICATION: (medicationId: string) => `/api/v1/medications/${medicationId}/administration-log`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/administration-log`,\r\n    TODAY: `/api/v1/administration-log/today`,\r\n    MISSED: `/api/v1/administration-log/missed`,\r\n  },\r\n\r\n  // ==========================================\r\n  // EMERGENCY CONTACTS\r\n  // ==========================================\r\n  EMERGENCY_CONTACTS: {\r\n    BASE: `/api/v1/emergency-contacts`,\r\n    BY_ID: (id: string) => `/api/v1/emergency-contacts/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts`,\r\n    PRIMARY: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts/primary`,\r\n    VERIFY: (id: string) => `/api/v1/emergency-contacts/${id}/verify`,\r\n    NOTIFY: (id: string) => `/api/v1/emergency-contacts/${id}/notify`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INCIDENTS\r\n  // ==========================================\r\n  INCIDENTS: {\r\n    BASE: `/api/v1/incident-report`,\r\n    BY_ID: (id: string) => `/api/v1/incident-report/${id}`,\r\n    WITNESSES: (incidentId: string) => `/api/v1/incident-report/${incidentId}/witnesses`,\r\n    WITNESS_STATEMENT: (incidentId: string, witnessId: string) =>\r\n      `/api/v1/incident-report/${incidentId}/witnesses/${witnessId}/statement`,\r\n    VERIFY_STATEMENT: (statementId: string) => `/api/v1/incident-report/statements/${statementId}/verify`,\r\n    FOLLOW_UP: (incidentId: string) => `/api/v1/incident-report/${incidentId}/follow-up`,\r\n    FOLLOW_UP_PROGRESS: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/progress`,\r\n    FOLLOW_UP_COMPLETE: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/complete`,\r\n    ANALYTICS: `/api/v1/incident-report/analytics`,\r\n    TRENDING: `/api/v1/incident-report/trending`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/incidents`,\r\n    BY_TYPE: (type: string) => `/api/v1/incident-report/type/${type}`,\r\n    BY_SEVERITY: (severity: string) => `/api/v1/incident-report/severity/${severity}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DOCUMENTS\r\n  // ==========================================\r\n  DOCUMENTS: {\r\n    BASE: `/api/v1/documents`,\r\n    BY_ID: (id: string) => `/api/v1/documents/${id}`,\r\n    UPLOAD: `/api/v1/documents/upload`,\r\n    DOWNLOAD: (id: string) => `/api/v1/documents/${id}/download`,\r\n    PREVIEW: (id: string) => `/api/v1/documents/${id}/preview`,\r\n    SIGN: (id: string) => `/api/v1/documents/${id}/sign`,\r\n    VERIFY_SIGNATURE: (id: string) => `/api/v1/documents/${id}/verify-signature`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/documents`,\r\n    BY_TYPE: (type: string) => `/api/v1/documents/type/${type}`,\r\n    TEMPLATES: `/api/v1/documents/templates`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMPLIANCE & AUDIT\r\n  // ==========================================\r\n  COMPLIANCE: {\r\n    REPORTS: `/api/v1/compliance/reports`,\r\n    AUDIT_LOGS: `/api/v1/compliance/audit-logs`,\r\n    PHI_DISCLOSURES: `/api/v1/compliance/phi-disclosures`,\r\n    ACCESS_LOG: `/api/v1/compliance/access-log`,\r\n    DATA_RETENTION: `/api/v1/compliance/data-retention`,\r\n    EXPORT: `/api/v1/compliance/export`,\r\n  },\r\n\r\n  AUDIT: {\r\n    LOGS: `/api/v1/audit-logs`,\r\n    BY_ID: (id: string) => `/api/v1/audit-logs/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/audit-logs/user/${userId}`,\r\n    BY_RESOURCE: (resourceType: string, resourceId: string) =>\r\n      `/api/v1/audit-logs/resource/${resourceType}/${resourceId}`,\r\n    BY_ACTION: (action: string) => `/api/v1/audit-logs/action/${action}`,\r\n    PHI_ACCESS: `/api/v1/audit-logs/phi-access`,\r\n    PHI_ACCESS_LOG: `/api/v1/audit/phi-access`,\r\n    EXPORT: `/api/v1/audit-logs/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMMUNICATIONS\r\n  // ==========================================\r\n  MESSAGES: {\r\n    BASE: `/api/v1/messages`,\r\n    BY_ID: (id: string) => `/api/v1/messages/${id}`,\r\n    SEND: `/api/v1/messages/send`,\r\n    INBOX: `/api/v1/messages/inbox`,\r\n    SENT: `/api/v1/messages/sent`,\r\n    UNREAD: `/api/v1/messages/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/messages/${id}/mark-read`,\r\n    MARK_UNREAD: (id: string) => `/api/v1/messages/${id}/mark-unread`,\r\n    DELETE: (id: string) => `/api/v1/messages/${id}`,\r\n    THREAD: (id: string) => `/api/v1/messages/thread/${id}`,\r\n    ATTACHMENTS: (id: string) => `/api/v1/messages/${id}/attachments`,\r\n  },\r\n\r\n  BROADCASTS: {\r\n    BASE: `/api/v1/broadcasts`,\r\n    BY_ID: (id: string) => `/api/v1/broadcasts/${id}`,\r\n    SEND: `/api/v1/broadcasts/send`,\r\n    SCHEDULE: `/api/v1/broadcasts/schedule`,\r\n    RECIPIENTS: (id: string) => `/api/v1/broadcasts/${id}/recipients`,\r\n    CANCEL: (id: string) => `/api/v1/broadcasts/${id}/cancel`,\r\n    DUPLICATE: (id: string) => `/api/v1/broadcasts/${id}/duplicate`,\r\n    DELIVERY_STATUS: (id: string) => `/api/v1/broadcasts/${id}/delivery-status`,\r\n    DRAFTS: `/api/v1/broadcasts/drafts`,\r\n    SCHEDULED: `/api/v1/broadcasts/scheduled`,\r\n  },\r\n\r\n  ALERTS: {\r\n    BASE: `/api/v1/alerts`,\r\n    BY_ID: (id: string) => `/api/v1/alerts/${id}`,\r\n    ACTIVE: `/api/v1/alerts/active`,\r\n    ACKNOWLEDGE: (id: string) => `/api/v1/alerts/${id}/acknowledge`,\r\n    DISMISS: (id: string) => `/api/v1/alerts/${id}/dismiss`,\r\n    MEDICATION_REMINDERS: `/api/v1/alerts/medication-reminders`,\r\n    APPOINTMENT_REMINDERS: `/api/v1/alerts/appointment-reminders`,\r\n    EMERGENCY: `/api/v1/alerts/emergency`,\r\n    BY_TYPE: (type: string) => `/api/v1/alerts/type/${type}`,\r\n  },\r\n\r\n  NOTIFICATIONS: {\r\n    BASE: `/api/v1/notifications`,\r\n    BY_ID: (id: string) => `/api/v1/notifications/${id}`,\r\n    UNREAD: `/api/v1/notifications/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/notifications/${id}/mark-read`,\r\n    MARK_ALL_READ: `/api/v1/notifications/mark-all-read`,\r\n    PREFERENCES: `/api/v1/notifications/preferences`,\r\n    TEST_PUSH: `/api/v1/notifications/test-push`,\r\n    PUSH_SUBSCRIBE: `/api/v1/notifications/push-subscribe`,\r\n    PUSH_UNSUBSCRIBE: `/api/v1/notifications/push-unsubscribe`,\r\n    PUSH_SUBSCRIPTION: `/api/v1/notifications/push-subscription`,\r\n  },\r\n\r\n  CONVERSATIONS: {\r\n    BASE: `/api/v1/conversations`,\r\n    BY_ID: (id: string) => `/api/v1/conversations/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/conversations/user/${userId}`,\r\n    MESSAGES: (conversationId: string) => `/api/v1/conversations/${conversationId}/messages`,\r\n    PARTICIPANTS: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    ADD_PARTICIPANT: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    REMOVE_PARTICIPANT: (conversationId: string, userId: string) =>\r\n      `/api/v1/conversations/${conversationId}/participants/${userId}`,\r\n    ARCHIVE: (id: string) => `/api/v1/conversations/${id}/archive`,\r\n    UNARCHIVE: (id: string) => `/api/v1/conversations/${id}/unarchive`,\r\n  },\r\n\r\n  TEMPLATES: {\r\n    BASE: `/api/v1/templates`,\r\n    BY_ID: (id: string) => `/api/v1/templates/${id}`,\r\n    BY_CATEGORY: (category: string) => `/api/v1/templates/category/${category}`,\r\n    RENDER: (id: string) => `/api/v1/templates/${id}/render`,\r\n    CATEGORIES: `/api/v1/templates/categories`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DASHBOARD\r\n  // ==========================================\r\n  DASHBOARD: {\r\n    STATS: `/api/v1/dashboard/stats`,\r\n    RECENT_ACTIVITIES: `/api/v1/dashboard/recent-activities`,\r\n    UPCOMING_APPOINTMENTS: `/api/v1/dashboard/upcoming-appointments`,\r\n    CHART_DATA: `/api/v1/dashboard/chart-data`,\r\n    WIDGETS: (dashboardId: string) => `/api/v1/dashboard/${dashboardId}/widgets`,\r\n    REFRESH: `/api/v1/dashboard/refresh-cache`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ANALYTICS & REPORTING\r\n  // ==========================================\r\n  ANALYTICS: {\r\n    METRICS: `/api/v1/analytics/metrics`,\r\n    DASHBOARD: `/api/v1/analytics/dashboard`,\r\n    DASHBOARD_WIDGETS: (dashboardId: string) => `/api/v1/analytics/dashboard/${dashboardId}/widgets`,\r\n    REPORTS: `/api/v1/analytics/reports`,\r\n    CHART_DATA: `/api/v1/analytics/chart-data`,\r\n    HEALTH_METRICS: `/api/v1/analytics/health-metrics`,\r\n    MEDICATION_COMPLIANCE: `/api/v1/analytics/medication-compliance`,\r\n    APPOINTMENT_METRICS: `/api/v1/analytics/appointment-metrics`,\r\n    INCIDENT_ANALYTICS: `/api/v1/analytics/incident-analytics`,\r\n    CUSTOM_REPORT: `/api/v1/analytics/custom-report`,\r\n  },\r\n\r\n  REPORTS: {\r\n    // Base Reports\r\n    BASE: `/api/v1/reports`,\r\n    CUSTOM: `/api/v1/reports/custom`,\r\n    TEMPLATES: `/api/v1/reports/templates`,\r\n    SCHEDULED: `/api/v1/reports/scheduled`,\r\n    SCHEDULE: `/api/v1/reports/schedule`,\r\n    EXPORT: `/api/v1/reports/export`,\r\n    HISTORY: `/api/v1/reports/history`,\r\n    SHARE: (reportId: string) => `/api/v1/reports/${reportId}/share`,\r\n\r\n    // Health Trend Analysis\r\n    HEALTH_TRENDS: `/api/v1/reports/health-trends`,\r\n    HEALTH_TRENDS_BY_CATEGORY: (category: string) => `/api/v1/reports/health-trends/${category}`,\r\n\r\n    // Medication Reports\r\n    MEDICATIONS: {\r\n      ADMINISTRATION: `/api/v1/reports/medications/administration`,\r\n      COMPLIANCE: `/api/v1/reports/medications/compliance`,\r\n      EXPIRATION: `/api/v1/reports/medications/expiration`,\r\n      INVENTORY: `/api/v1/reports/medications/inventory`,\r\n      REFILLS: `/api/v1/reports/medications/refills`,\r\n      USAGE: `/api/v1/reports/medication-usage`,\r\n      EFFECTIVENESS: `/api/v1/reports/medication-effectiveness`,\r\n    },\r\n\r\n    // Immunization Reports\r\n    IMMUNIZATIONS: {\r\n      COMPLIANCE: `/api/v1/reports/immunizations/compliance`,\r\n      DUE: `/api/v1/reports/immunizations/due`,\r\n      OVERDUE: `/api/v1/reports/immunizations/overdue`,\r\n      EXEMPTIONS: `/api/v1/reports/immunizations/exemptions`,\r\n    },\r\n\r\n    // Appointment Reports\r\n    APPOINTMENTS: {\r\n      ATTENDANCE: `/api/v1/reports/appointments/attendance`,\r\n      NO_SHOWS: `/api/v1/reports/appointments/no-shows`,\r\n      CANCELLATIONS: `/api/v1/reports/appointments/cancellations`,\r\n    },\r\n\r\n    // Incident Reports\r\n    INCIDENTS: {\r\n      SUMMARY: `/api/v1/reports/incidents/summary`,\r\n      BY_TYPE: `/api/v1/reports/incidents/by-type`,\r\n      TRENDS: `/api/v1/reports/incidents/trends`,\r\n      STATISTICS: `/api/v1/reports/incident-statistics`,\r\n      BY_LOCATION: `/api/v1/reports/incidents-by-location`,\r\n    },\r\n\r\n    // Student Reports\r\n    STUDENTS: {\r\n      ENROLLMENT: `/api/v1/reports/students/enrollment`,\r\n      HEALTH_SUMMARY: `/api/v1/reports/students/health-summary`,\r\n      DEMOGRAPHICS: `/api/v1/reports/students/demographics`,\r\n    },\r\n\r\n    // Attendance & Absenteeism\r\n    ATTENDANCE_CORRELATION: `/api/v1/reports/attendance-correlation`,\r\n    ABSENTEEISM_PATTERNS: `/api/v1/reports/absenteeism-patterns`,\r\n\r\n    // Performance & Analytics\r\n    PERFORMANCE_METRICS: `/api/v1/reports/performance-metrics`,\r\n    NURSE_PERFORMANCE: `/api/v1/reports/nurse-performance`,\r\n    SYSTEM_USAGE: `/api/v1/reports/system-usage`,\r\n    USAGE_ANALYTICS: `/api/v1/reports/analytics/usage`,\r\n    POPULARITY: `/api/v1/reports/analytics/popularity`,\r\n    INSIGHTS: `/api/v1/reports/analytics/insights`,\r\n\r\n    // Dashboard Reports\r\n    DASHBOARD: `/api/v1/reports/dashboard`,\r\n    DASHBOARD_WIDGETS: `/api/v1/reports/dashboard/widgets`,\r\n    DASHBOARD_LAYOUT: `/api/v1/reports/dashboard/layout`,\r\n\r\n    // Compliance Reports\r\n    COMPLIANCE: `/api/v1/reports/compliance`,\r\n    COMPLIANCE_HISTORY: `/api/v1/reports/compliance/history`,\r\n    COMPLIANCE_AUDIT: `/api/v1/reports/compliance/audit`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SYSTEM & ADMINISTRATION\r\n  // ==========================================\r\n  SYSTEM: {\r\n    HEALTH: `/api/v1/health`,\r\n    STATUS: `/api/v1/system/status`,\r\n    CONFIGURATION: `/api/v1/system/configuration`,\r\n    SETTINGS: `/api/v1/system/settings`,\r\n    BACKUP: `/api/v1/system/backup`,\r\n    RESTORE: `/api/v1/system/restore`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMIN - District, School, User Management\r\n  // ==========================================\r\n  ADMIN: {\r\n    // System Settings\r\n    SETTINGS: `/api/v1/administration/settings`,\r\n\r\n    // Users\r\n    USERS: `/api/v1/users`,\r\n    USER_BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n\r\n    // Districts\r\n    DISTRICTS: `/api/v1/administration/districts`,\r\n    DISTRICT_BY_ID: (id: string) => `/api/v1/administration/districts/${id}`,\r\n\r\n    // Schools\r\n    SCHOOLS: `/api/v1/administration/schools`,\r\n    SCHOOL_BY_ID: (id: string) => `/api/v1/administration/schools/${id}`,\r\n\r\n    // System Health\r\n    SYSTEM_HEALTH: `/api/v1/admin/system/health`,\r\n\r\n    // Backups\r\n    BACKUPS: `/api/v1/administration/backups`,\r\n    BACKUP_BY_ID: (id: string) => `/api/v1/administration/backups/${id}`,\r\n\r\n    // Licenses\r\n    LICENSES: `/api/v1/administration/licenses`,\r\n    LICENSE_BY_ID: (id: string) => `/api/v1/administration/licenses/${id}`,\r\n    LICENSE_DEACTIVATE: (id: string) => `/api/v1/administration/licenses/${id}/deactivate`,\r\n\r\n    // Configurations\r\n    CONFIGURATIONS: `/api/v1/administration/config`,\r\n    CONFIGURATION_BY_KEY: (key: string) => `/api/v1/administration/config/${key}`,\r\n\r\n    // Performance Metrics\r\n    METRICS: `/api/v1/admin/metrics`,\r\n    METRIC_BY_ID: (id: string) => `/api/v1/admin/metrics/${id}`,\r\n\r\n    // Training\r\n    TRAINING: `/api/v1/admin/training`,\r\n    TRAINING_BY_ID: (id: string) => `/api/v1/admin/training/${id}`,\r\n    TRAINING_COMPLETE: (id: string) => `/api/v1/admin/training/${id}/complete`,\r\n    TRAINING_PROGRESS: (userId: string) => `/api/v1/admin/training/progress/${userId}`,\r\n\r\n    // Audit Logs\r\n    AUDIT_LOGS: `/api/v1/administration/audit-logs`,\r\n    AUDIT_LOG_BY_ID: (id: string) => `/api/v1/administration/audit-logs/${id}`,\r\n  },\r\n\r\n  INTEGRATIONS: {\r\n    BASE: `/api/v1/integrations`,\r\n    BY_ID: (id: string) => `/api/v1/integrations/${id}`,\r\n    CONFIGURE: (id: string) => `/api/v1/integrations/${id}/configure`,\r\n    TEST: (id: string) => `/api/v1/integrations/${id}/test`,\r\n    SYNC: (id: string) => `/api/v1/integrations/${id}/sync`,\r\n    ENABLE: (id: string) => `/api/v1/integrations/${id}/enable`,\r\n    DISABLE: (id: string) => `/api/v1/integrations/${id}/disable`,\r\n    LOGS: (id: string) => `/api/v1/integrations/${id}/logs`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MULTI-FACTOR AUTHENTICATION (MFA)\r\n  // ==========================================\r\n  MFA: {\r\n    SETUP: `/api/v1/mfa/setup`,\r\n    VERIFY: `/api/v1/mfa/verify`,\r\n    ENABLE: `/api/v1/mfa/enable`,\r\n    DISABLE: `/api/v1/mfa/disable`,\r\n    BACKUP_CODES: `/api/v1/mfa/backup-codes`,\r\n    REGENERATE_CODES: `/api/v1/mfa/backup-codes/regenerate`,\r\n    VERIFY_BACKUP_CODE: `/api/v1/mfa/verify-backup-code`,\r\n    QR_CODE: `/api/v1/mfa/qr-code`,\r\n    STATUS: `/api/v1/mfa/status`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENT WAITLIST\r\n  // ==========================================\r\n  WAITLIST: {\r\n    BASE: `/api/v1/waitlist`,\r\n    BY_ID: (id: string) => `/api/v1/waitlist/${id}`,\r\n    ADD: `/api/v1/waitlist/add`,\r\n    REMOVE: (id: string) => `/api/v1/waitlist/${id}/remove`,\r\n    POSITION: (id: string) => `/api/v1/waitlist/${id}/position`,\r\n    NOTIFY: (id: string) => `/api/v1/waitlist/${id}/notify`,\r\n    UPDATE_PRIORITY: (id: string) => `/api/v1/waitlist/${id}/priority`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/waitlist/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/waitlist/nurse/${nurseId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // NURSE AVAILABILITY & SCHEDULING\r\n  // ==========================================\r\n  NURSE_AVAILABILITY: {\r\n    BASE: `/api/v1/nurse-availability`,\r\n    BY_ID: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/nurse-availability/nurse/${nurseId}`,\r\n    SLOTS: `/api/v1/nurse-availability/slots`,\r\n    SET: `/api/v1/nurse-availability/set`,\r\n    UPDATE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    DELETE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_DATE: (date: string) => `/api/v1/nurse-availability/date/${date}`,\r\n    CHECK_CONFLICTS: `/api/v1/nurse-availability/check-conflicts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // FORMS\r\n  // ==========================================\r\n  FORMS: {\r\n    BASE: `/api/v1/forms`,\r\n    BY_ID: (id: string) => `/api/v1/forms/${id}`,\r\n    TEMPLATES: `/api/v1/forms/templates`,\r\n    SUBMIT: `/api/v1/forms/submit`,\r\n    RESPONSES: (formId: string) => `/api/v1/forms/${formId}/responses`,\r\n    SUBMISSIONS: (formId: string) => `/api/v1/forms/${formId}/submissions`,\r\n    EXPORT: (formId: string) => `/api/v1/forms/${formId}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PURCHASE ORDERS & PROCUREMENT\r\n  // ==========================================\r\n  PURCHASE_ORDERS: {\r\n    BASE: `/api/v1/purchase-orders`,\r\n    BY_ID: (id: string) => `/api/v1/purchase-orders/${id}`,\r\n    APPROVE: (id: string) => `/api/v1/purchase-orders/${id}/approve`,\r\n    REJECT: (id: string) => `/api/v1/purchase-orders/${id}/reject`,\r\n    RECEIVE: (id: string) => `/api/v1/purchase-orders/${id}/receive`,\r\n    RECEIVE_ITEMS: (id: string) => `/api/v1/purchase-orders/${id}/receive-items`,\r\n    CANCEL: (id: string) => `/api/v1/purchase-orders/${id}/cancel`,\r\n    STATISTICS: `/api/v1/purchase-orders/statistics`,\r\n    PENDING: `/api/v1/purchase-orders/pending`,\r\n    APPROVED: `/api/v1/purchase-orders/approved`,\r\n    RECEIVED: `/api/v1/purchase-orders/received`,\r\n    BY_VENDOR: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}`,\r\n    REORDER_ITEMS: `/api/v1/purchase-orders/reorder-items`,\r\n    VENDOR_HISTORY: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}/history`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BILLING & FINANCIAL MANAGEMENT\r\n  // ==========================================\r\n  BILLING: {\r\n    // Invoices\r\n    INVOICES: `/api/v1/billing/invoices`,\r\n    INVOICE_BY_ID: (id: string) => `/api/v1/billing/invoices/${id}`,\r\n    INVOICE_PDF: (id: string) => `/api/v1/billing/invoices/${id}/pdf`,\r\n    INVOICE_SEND: (id: string) => `/api/v1/billing/invoices/${id}/send`,\r\n    INVOICE_VOID: (id: string) => `/api/v1/billing/invoices/${id}/void`,\r\n    \r\n    // Payments\r\n    PAYMENTS: `/api/v1/billing/payments`,\r\n    PAYMENT_BY_ID: (id: string) => `/api/v1/billing/payments/${id}`,\r\n    PAYMENT_REFUND: (id: string) => `/api/v1/billing/payments/${id}/refund`,\r\n    PAYMENT_VOID: (id: string) => `/api/v1/billing/payments/${id}/void`,\r\n    \r\n    // Analytics\r\n    ANALYTICS: `/api/v1/billing/analytics`,\r\n    REVENUE_TRENDS: `/api/v1/billing/analytics/revenue-trends`,\r\n    PAYMENT_ANALYTICS: `/api/v1/billing/analytics/payments`,\r\n    COLLECTION_METRICS: `/api/v1/billing/analytics/collections`,\r\n    \r\n    // Reports\r\n    REPORTS: `/api/v1/billing/reports`,\r\n    AGING_REPORT: `/api/v1/billing/reports/aging`,\r\n    REVENUE_REPORT: `/api/v1/billing/reports/revenue`,\r\n    PAYMENT_REPORT: `/api/v1/billing/reports/payments`,\r\n    TAX_REPORT: `/api/v1/billing/reports/tax`,\r\n    \r\n    // Settings\r\n    SETTINGS: `/api/v1/billing/settings`,\r\n    \r\n    // Notifications\r\n    NOTIFICATIONS: `/api/v1/billing/notifications`,\r\n    SEND_REMINDER: `/api/v1/billing/notifications/reminder`,\r\n    SEND_STATEMENT: `/api/v1/billing/notifications/statement`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BUDGET MANAGEMENT\r\n  // ==========================================\r\n  BUDGET: {\r\n    // Budget Categories\r\n    CATEGORIES: `/api/v1/budget/categories`,\r\n    CATEGORY_BY_ID: (id: string) => `/api/v1/budget/categories/${id}`,\r\n\r\n    // Budget Summary\r\n    SUMMARY: `/api/v1/budget/summary`,\r\n\r\n    // Budget Transactions\r\n    TRANSACTIONS: `/api/v1/budget/transactions`,\r\n    TRANSACTION_BY_ID: (id: string) => `/api/v1/budget/transactions/${id}`,\r\n\r\n    // Analytics & Reporting\r\n    TRENDS: `/api/v1/budget/trends`,\r\n    YEAR_COMPARISON: `/api/v1/budget/year-comparison`,\r\n    OVER_BUDGET: `/api/v1/budget/over-budget`,\r\n    RECOMMENDATIONS: `/api/v1/budget/recommendations`,\r\n    EXPORT: `/api/v1/budget/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VENDORS\r\n  // ==========================================\r\n  VENDORS: {\r\n    BASE: `/api/v1/vendors`,\r\n    BY_ID: (id: string) => `/api/v1/vendors/${id}`,\r\n    SEARCH: (query: string) => `/api/v1/vendors/search/${encodeURIComponent(query)}`,\r\n    COMPARE: (itemName: string) => `/api/v1/vendors/compare/${encodeURIComponent(itemName)}`,\r\n    TOP: `/api/v1/vendors/top`,\r\n    STATISTICS: `/api/v1/vendors/statistics`,\r\n    REACTIVATE: (id: string) => `/api/v1/vendors/${id}/reactivate`,\r\n    RATING: (id: string) => `/api/v1/vendors/${id}/rating`,\r\n    BULK_RATINGS: `/api/v1/vendors/ratings/bulk`,\r\n    BY_PAYMENT_TERMS: (terms: string) => `/api/v1/vendors/payment-terms/${encodeURIComponent(terms)}`,\r\n    METRICS: (id: string) => `/api/v1/vendors/${id}/metrics`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/vendors/${id}/permanent`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SETTINGS\r\n  // ==========================================\r\n  SETTINGS: {\r\n    USER: `/api/v1/settings/user`,\r\n    SCHOOL: `/api/v1/settings/school`,\r\n    NOTIFICATIONS: `/api/v1/settings/notifications`,\r\n    PREFERENCES: `/api/v1/settings/preferences`,\r\n    PRIVACY: `/api/v1/settings/privacy`,\r\n    SECURITY: `/api/v1/settings/security`,\r\n  },\r\n} as const;\r\n\r\n/**\r\n * HTTP Status Codes\r\n */\r\nexport const HTTP_STATUS = {\r\n  OK: 200,\r\n  CREATED: 201,\r\n  ACCEPTED: 202,\r\n  NO_CONTENT: 204,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  CONFLICT: 409,\r\n  UNPROCESSABLE_ENTITY: 422,\r\n  TOO_MANY_REQUESTS: 429,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  BAD_GATEWAY: 502,\r\n  SERVICE_UNAVAILABLE: 503,\r\n  GATEWAY_TIMEOUT: 504,\r\n} as const;\r\n\r\n/**\r\n * API Response Types\r\n */\r\nexport type ApiSuccessResponse<T = unknown> = {\r\n  success: true;\r\n  data: T;\r\n  message?: string;\r\n};\r\n\r\nexport type ApiErrorResponse = {\r\n  success: false;\r\n  error: string;\r\n  code?: string;\r\n  details?: Record<string, unknown>;\r\n  traceId?: string;\r\n};\r\n\r\nexport type ApiResponse<T = unknown> = ApiSuccessResponse<T> | ApiErrorResponse;\r\n\r\n/**\r\n * Pagination Types\r\n */\r\nexport type PaginationParams = {\r\n  page?: number;\r\n  limit?: number;\r\n  sort?: string;\r\n  order?: 'asc' | 'desc';\r\n};\r\n\r\nexport type PaginatedResponse<T> = {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n    hasNext: boolean;\r\n    hasPrev: boolean;\r\n  };\r\n};\r\n\r\nexport default API_ENDPOINTS;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2EC;;;;;;;;AAGM,MAAM,gBAAgB;IAC3B,6CAA6C;IAC7C,iCAAiC;IACjC,6CAA6C;IAC7C,MAAM;QACJ,OAAO,CAAC,kBAAkB,CAAC;QAC3B,QAAQ,CAAC,mBAAmB,CAAC;QAC7B,SAAS,CAAC,oBAAoB,CAAC;QAC/B,QAAQ,CAAC,mBAAmB,CAAC;QAC7B,UAAU,CAAC,qBAAqB,CAAC;QACjC,SAAS,CAAC,eAAe,CAAC;QAC1B,iBAAiB,CAAC,4BAA4B,CAAC;QAC/C,iBAAiB,CAAC,4BAA4B,CAAC;QAC/C,gBAAgB,CAAC,2BAA2B,CAAC;IAC/C;IAEA,6CAA6C;IAC7C,yBAAyB;IACzB,6CAA6C;IAC7C,OAAO;QACL,MAAM,CAAC,aAAa,CAAC;QACrB,OAAO,CAAC,KAAe,CAAC,cAAc,EAAE,IAAI;QAC5C,IAAI,CAAC,gBAAgB,CAAC;QACtB,SAAS,CAAC,qBAAqB,CAAC;QAChC,gBAAgB,CAAC,qBAAqB,CAAC;IACzC;IAEA,MAAM;QACJ,OAAO,CAAC,4BAA4B,CAAC;QACrC,aAAa,CAAC,kCAAkC,CAAC;QACjD,YAAY,CAAC,SAAmB,CAAC,6BAA6B,EAAE,OAAO,MAAM,CAAC;QAC9E,kBAAkB,CAAC,SAAmB,CAAC,6BAA6B,EAAE,OAAO,YAAY,CAAC;IAC5F;IAEA,6CAA6C;IAC7C,WAAW;IACX,6CAA6C;IAC7C,UAAU;QACR,MAAM,CAAC,gBAAgB,CAAC;QACxB,OAAO,CAAC,KAAe,CAAC,iBAAiB,EAAE,IAAI;QAC/C,YAAY,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,WAAW,CAAC;QAC/D,YAAY,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,WAAW,CAAC;QAC/D,UAAU,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,SAAS,CAAC;QAC3D,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,OAAO,CAAC;QACvD,aAAa,CAAC,4BAA4B,CAAC;QAC3C,OAAO,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,MAAM,CAAC;QACrD,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,OAAO,CAAC;QACvD,aAAa,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC;QACjE,oBAAoB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,mBAAmB,CAAC;QAC/E,QAAQ,CAAC,uBAAuB,CAAC;QACjC,iBAAiB,CAAC,QAAkB,CAAC,wBAAwB,EAAE,mBAAmB,QAAQ;QAC1F,UAAU,CAAC,QAAkB,CAAC,uBAAuB,EAAE,OAAO;QAC9D,UAAU,CAAC,UAAoB,CAAC,uBAAuB,EAAE,SAAS;QAClE,UAAU,CAAC,yBAAyB,CAAC;QACrC,YAAY,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,WAAW,CAAC;QAC/D,aAAa,CAAC,4BAA4B,CAAC;QAC3C,kBAAkB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,UAAU,CAAC;QACpE,QAAQ,CAAC,uBAAuB,CAAC;QACjC,gBAAgB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,eAAe,CAAC;QACvE,uBAAuB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,sBAAsB,CAAC;QACrF,aAAa,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC;QACjE,eAAe,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,cAAc,CAAC;QACrE,WAAW,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,UAAU,CAAC;QAC7D,cAAc,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,aAAa,CAAC;QACnE,WAAW,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,UAAU,CAAC;QAC7D,oBAAoB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,mBAAmB,CAAC;IACjF;IAEA,6CAA6C;IAC7C,eAAe;IACf,6CAA6C;IAC7C,cAAc;QACZ,MAAM,CAAC,oBAAoB,CAAC;QAC5B,OAAO,CAAC,KAAe,CAAC,qBAAqB,EAAE,IAAI;QACnD,YAAY,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,WAAW,CAAC;QACnE,QAAQ,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,OAAO,CAAC;QAC3D,UAAU,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,SAAS,CAAC;QAC/D,SAAS,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,QAAQ,CAAC;QAC7D,SAAS,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,QAAQ,CAAC;QAC7D,OAAO,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,MAAM,CAAC;QACzD,eAAe,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,cAAc,CAAC;QACzE,cAAc,CAAC,iCAAiC,CAAC;QACjD,WAAW,CAAC,8BAA8B,CAAC;QAC3C,iBAAiB,CAAC,oCAAoC,CAAC;QACvD,WAAW,CAAC,8BAA8B,CAAC;QAC3C,mBAAmB,CAAC,sCAAsC,CAAC;QAC3D,YAAY,CAAC,YAAsB,CAAC,6BAA6B,EAAE,WAAW;QAC9E,UAAU,CAAC,UAAoB,CAAC,2BAA2B,EAAE,SAAS;QACtE,SAAS,CAAC,4BAA4B,CAAC;QACvC,UAAU,CAAC,6BAA6B,CAAC;QACzC,YAAY,CAAC,+BAA+B,CAAC;QAC7C,WAAW,CAAC,8BAA8B,CAAC;QAC3C,kBAAkB,CAAC,qCAAqC,CAAC;QACzD,iBAAiB,CAAC,oCAAoC,CAAC;QACvD,SAAS,CAAC,4BAA4B,CAAC;IACzC;IAEA,6CAA6C;IAC7C,iBAAiB;IACjB,6CAA6C;IAC7C,gBAAgB;QACd,MAAM,CAAC,sBAAsB,CAAC;QAC9B,OAAO,CAAC,KAAe,CAAC,uBAAuB,EAAE,IAAI;QACrD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,eAAe,CAAC;QACjF,SAAS,CAAC,OAAiB,CAAC,4BAA4B,EAAE,MAAM;QAChE,QAAQ,CAAC,6BAA6B,CAAC;QACvC,QAAQ,CAAC,KAAe,CAAC,uBAAuB,EAAE,GAAG,OAAO,CAAC;IAC/D;IAEA,6CAA6C;IAC7C,+BAA+B;IAC/B,6CAA6C;IAC7C,eAAe;QACb,MAAM,CAAC,oBAAoB,CAAC;QAC5B,OAAO,CAAC,KAAe,CAAC,qBAAqB,EAAE,IAAI;QACnD,UAAU,CAAC,6BAA6B,CAAC;QACzC,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,cAAc,CAAC;QAChF,KAAK,CAAC,wBAAwB,CAAC;QAC/B,SAAS,CAAC,4BAA4B,CAAC;QACvC,YAAY,CAAC,+BAA+B,CAAC;QAC7C,YAAY,CAAC,+BAA+B,CAAC;QAC7C,QAAQ,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,OAAO,CAAC;QAC3D,QAAQ,CAAC,YAAsB,CAAC,4BAA4B,EAAE,WAAW;IAC3E;IAEA,6CAA6C;IAC7C,oBAAoB;IACpB,6CAA6C;IAC7C,YAAY;QACV,MAAM,CAAC,kBAAkB,CAAC;QAC1B,OAAO,CAAC,KAAe,CAAC,mBAAmB,EAAE,IAAI;QACjD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,WAAW,CAAC;QAC7E,SAAS,CAAC,OAAiB,CAAC,wBAAwB,EAAE,MAAM;QAC5D,KAAK,CAAC,sBAAsB,CAAC;QAC7B,UAAU,CAAC,2BAA2B,CAAC;QACvC,SAAS,CAAC,KAAe,CAAC,mBAAmB,EAAE,GAAG,QAAQ,CAAC;IAC7D;IAEA,6CAA6C;IAC7C,sBAAsB;IACtB,6CAA6C;IAC7C,qBAAqB;QACnB,MAAM,CAAC,2BAA2B,CAAC;QACnC,OAAO,CAAC,KAAe,CAAC,4BAA4B,EAAE,IAAI;QAC1D,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,oBAAoB,CAAC;QACtF,QAAQ,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,2BAA2B,CAAC;QACzF,KAAK,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,IAAI,CAAC;IACjE;IAEA,6CAA6C;IAC7C,YAAY;IACZ,6CAA6C;IAC7C,WAAW;QACT,MAAM,CAAC,iBAAiB,CAAC;QACzB,OAAO,CAAC,KAAe,CAAC,kBAAkB,EAAE,IAAI;QAChD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,UAAU,CAAC;QAC5E,UAAU,CAAC,0BAA0B,CAAC;QACtC,QAAQ,CAAC,wBAAwB,CAAC;IACpC;IAEA,6CAA6C;IAC7C,cAAc;IACd,6CAA6C;IAC7C,aAAa;QACX,MAAM,CAAC,mBAAmB,CAAC;QAC3B,OAAO,CAAC,KAAe,CAAC,oBAAoB,EAAE,IAAI;QAClD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,YAAY,CAAC;QAC9E,kBAAkB,CAAC,iBAA2B,CAAC,uBAAuB,EAAE,eAAe,YAAY,CAAC;QACpG,QAAQ,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,mBAAmB,CAAC;QACjF,QAAQ,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,mBAAmB,CAAC;IACnF;IAEA,6CAA6C;IAC7C,qBAAqB;IACrB,6CAA6C;IAC7C,oBAAoB;QAClB,MAAM,CAAC,0BAA0B,CAAC;QAClC,OAAO,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QACzD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,mBAAmB,CAAC;QACrF,QAAQ,CAAC,iCAAiC,CAAC;QAC3C,YAAY,CAAC,qCAAqC,CAAC;IACrD;IAEA,6CAA6C;IAC7C,cAAc;IACd,6CAA6C;IAC7C,aAAa;QACX,MAAM,CAAC,mBAAmB,CAAC;QAC3B,OAAO,CAAC,KAAe,CAAC,oBAAoB,EAAE,IAAI;QAClD,QAAQ,CAAC,KAAe,CAAC,oBAAoB,EAAE,IAAI;QACnD,YAAY,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,WAAW,CAAC;QAClE,aAAa,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,YAAY,CAAC;QACpE,QAAQ,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,OAAO,CAAC;QAC1D,aAAa,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,YAAY,CAAC;QACpE,kBAAkB,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,iBAAiB,CAAC;QAC9E,kBAAkB,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,iBAAiB,CAAC;QAC9E,UAAU,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,SAAS,CAAC;QAC9D,UAAU,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,SAAS,CAAC;QAC9D,cAAc,CAAC,KAAe,CAAC,oBAAoB,EAAE,GAAG,aAAa,CAAC;QACtE,UAAU,CAAC,4BAA4B,CAAC;QACxC,KAAK,CAAC,uBAAuB,CAAC;QAC9B,SAAS,CAAC,2BAA2B,CAAC;QACtC,QAAQ,CAAC,0BAA0B,CAAC;QACpC,WAAW,CAAC,6BAA6B,CAAC;QAC1C,WAAW,CAAC,6BAA6B,CAAC;QAC1C,WAAW,CAAC,6BAA6B,CAAC;QAC1C,YAAY,CAAC,yCAAyC,CAAC;QACvD,KAAK,CAAC,oCAAoC,CAAC;QAC3C,YAAY,CAAC,8BAA8B,CAAC;QAC5C,OAAO,CAAC,wCAAwC,CAAC;QACjD,oBAAoB,CAAC,sCAAsC,CAAC;QAC5D,WAAW,CAAC,6BAA6B,CAAC;QAC1C,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,YAAY,CAAC;IAChF;IAEA,6CAA6C;IAC7C,gBAAgB;IAChB,6CAA6C;IAC7C,eAAe;QACb,MAAM,CAAC,qBAAqB,CAAC;QAC7B,OAAO,CAAC,KAAe,CAAC,sBAAsB,EAAE,IAAI;QACpD,QAAQ,CAAC,KAAe,CAAC,sBAAsB,EAAE,IAAI;QACrD,QAAQ,CAAC,KAAe,CAAC,sBAAsB,EAAE,GAAG,OAAO,CAAC;QAC5D,QAAQ,CAAC,4BAA4B,CAAC;QACtC,UAAU,CAAC,8BAA8B,CAAC;IAC5C;IAEA,6CAA6C;IAC7C,YAAY;IACZ,6CAA6C;IAC7C,WAAW;QACT,MAAM,CAAC,iBAAiB,CAAC;QACzB,OAAO,CAAC,KAAe,CAAC,kBAAkB,EAAE,IAAI;QAChD,QAAQ,CAAC,KAAe,CAAC,kBAAkB,EAAE,IAAI;QACjD,QAAQ,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,OAAO,CAAC;QACxD,WAAW,CAAC,2BAA2B,CAAC;QACxC,UAAU,CAAC,0BAA0B,CAAC;QACtC,SAAS,CAAC,yBAAyB,CAAC;QACpC,OAAO,CAAC,uBAAuB,CAAC;QAChC,OAAO,CAAC,uBAAuB,CAAC;QAChC,QAAQ,CAAC,wBAAwB,CAAC;QAClC,WAAW,CAAC,2BAA2B,CAAC;QACxC,WAAW,CAAC,2BAA2B,CAAC;QACxC,SAAS,CAAC,yBAAyB,CAAC;IACtC;IAEA,6CAA6C;IAC7C,qBAAqB;IACrB,6CAA6C;IAC7C,oBAAoB;QAClB,MAAM,CAAC,0BAA0B,CAAC;QAClC,OAAO,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QACzD,QAAQ,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QAC1D,eAAe,CAAC,eAAyB,CAAC,oBAAoB,EAAE,aAAa,mBAAmB,CAAC;QACjG,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,mBAAmB,CAAC;QACrF,OAAO,CAAC,gCAAgC,CAAC;QACzC,QAAQ,CAAC,iCAAiC,CAAC;IAC7C;IAEA,6CAA6C;IAC7C,qBAAqB;IACrB,6CAA6C;IAC7C,oBAAoB;QAClB,MAAM,CAAC,0BAA0B,CAAC;QAClC,OAAO,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QACzD,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,mBAAmB,CAAC;QACrF,SAAS,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,2BAA2B,CAAC;QAC1F,QAAQ,CAAC,KAAe,CAAC,2BAA2B,EAAE,GAAG,OAAO,CAAC;QACjE,QAAQ,CAAC,KAAe,CAAC,2BAA2B,EAAE,GAAG,OAAO,CAAC;IACnE;IAEA,6CAA6C;IAC7C,YAAY;IACZ,6CAA6C;IAC7C,WAAW;QACT,MAAM,CAAC,uBAAuB,CAAC;QAC/B,OAAO,CAAC,KAAe,CAAC,wBAAwB,EAAE,IAAI;QACtD,WAAW,CAAC,aAAuB,CAAC,wBAAwB,EAAE,WAAW,UAAU,CAAC;QACpF,mBAAmB,CAAC,YAAoB,YACtC,CAAC,wBAAwB,EAAE,WAAW,WAAW,EAAE,UAAU,UAAU,CAAC;QAC1E,kBAAkB,CAAC,cAAwB,CAAC,mCAAmC,EAAE,YAAY,OAAO,CAAC;QACrG,WAAW,CAAC,aAAuB,CAAC,wBAAwB,EAAE,WAAW,UAAU,CAAC;QACpF,oBAAoB,CAAC,aAAuB,CAAC,kCAAkC,EAAE,WAAW,SAAS,CAAC;QACtG,oBAAoB,CAAC,aAAuB,CAAC,kCAAkC,EAAE,WAAW,SAAS,CAAC;QACtG,WAAW,CAAC,iCAAiC,CAAC;QAC9C,UAAU,CAAC,gCAAgC,CAAC;QAC5C,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,UAAU,CAAC;QAC5E,SAAS,CAAC,OAAiB,CAAC,6BAA6B,EAAE,MAAM;QACjE,aAAa,CAAC,WAAqB,CAAC,iCAAiC,EAAE,UAAU;IACnF;IAEA,6CAA6C;IAC7C,YAAY;IACZ,6CAA6C;IAC7C,WAAW;QACT,MAAM,CAAC,iBAAiB,CAAC;QACzB,OAAO,CAAC,KAAe,CAAC,kBAAkB,EAAE,IAAI;QAChD,QAAQ,CAAC,wBAAwB,CAAC;QAClC,UAAU,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,SAAS,CAAC;QAC5D,SAAS,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,QAAQ,CAAC;QAC1D,MAAM,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,KAAK,CAAC;QACpD,kBAAkB,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,iBAAiB,CAAC;QAC5E,YAAY,CAAC,YAAsB,CAAC,iBAAiB,EAAE,UAAU,UAAU,CAAC;QAC5E,SAAS,CAAC,OAAiB,CAAC,uBAAuB,EAAE,MAAM;QAC3D,WAAW,CAAC,2BAA2B,CAAC;IAC1C;IAEA,6CAA6C;IAC7C,qBAAqB;IACrB,6CAA6C;IAC7C,YAAY;QACV,SAAS,CAAC,0BAA0B,CAAC;QACrC,YAAY,CAAC,6BAA6B,CAAC;QAC3C,iBAAiB,CAAC,kCAAkC,CAAC;QACrD,YAAY,CAAC,6BAA6B,CAAC;QAC3C,gBAAgB,CAAC,iCAAiC,CAAC;QACnD,QAAQ,CAAC,yBAAyB,CAAC;IACrC;IAEA,OAAO;QACL,MAAM,CAAC,kBAAkB,CAAC;QAC1B,OAAO,CAAC,KAAe,CAAC,mBAAmB,EAAE,IAAI;QACjD,SAAS,CAAC,SAAmB,CAAC,wBAAwB,EAAE,QAAQ;QAChE,aAAa,CAAC,cAAsB,aAClC,CAAC,4BAA4B,EAAE,aAAa,CAAC,EAAE,YAAY;QAC7D,WAAW,CAAC,SAAmB,CAAC,0BAA0B,EAAE,QAAQ;QACpE,YAAY,CAAC,6BAA6B,CAAC;QAC3C,gBAAgB,CAAC,wBAAwB,CAAC;QAC1C,QAAQ,CAAC,yBAAyB,CAAC;IACrC;IAEA,6CAA6C;IAC7C,iBAAiB;IACjB,6CAA6C;IAC7C,UAAU;QACR,MAAM,CAAC,gBAAgB,CAAC;QACxB,OAAO,CAAC,KAAe,CAAC,iBAAiB,EAAE,IAAI;QAC/C,MAAM,CAAC,qBAAqB,CAAC;QAC7B,OAAO,CAAC,sBAAsB,CAAC;QAC/B,MAAM,CAAC,qBAAqB,CAAC;QAC7B,QAAQ,CAAC,uBAAuB,CAAC;QACjC,WAAW,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,UAAU,CAAC;QAC7D,aAAa,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC;QACjE,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,IAAI;QAChD,QAAQ,CAAC,KAAe,CAAC,wBAAwB,EAAE,IAAI;QACvD,aAAa,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,YAAY,CAAC;IACnE;IAEA,YAAY;QACV,MAAM,CAAC,kBAAkB,CAAC;QAC1B,OAAO,CAAC,KAAe,CAAC,mBAAmB,EAAE,IAAI;QACjD,MAAM,CAAC,uBAAuB,CAAC;QAC/B,UAAU,CAAC,2BAA2B,CAAC;QACvC,YAAY,CAAC,KAAe,CAAC,mBAAmB,EAAE,GAAG,WAAW,CAAC;QACjE,QAAQ,CAAC,KAAe,CAAC,mBAAmB,EAAE,GAAG,OAAO,CAAC;QACzD,WAAW,CAAC,KAAe,CAAC,mBAAmB,EAAE,GAAG,UAAU,CAAC;QAC/D,iBAAiB,CAAC,KAAe,CAAC,mBAAmB,EAAE,GAAG,gBAAgB,CAAC;QAC3E,QAAQ,CAAC,yBAAyB,CAAC;QACnC,WAAW,CAAC,4BAA4B,CAAC;IAC3C;IAEA,QAAQ;QACN,MAAM,CAAC,cAAc,CAAC;QACtB,OAAO,CAAC,KAAe,CAAC,eAAe,EAAE,IAAI;QAC7C,QAAQ,CAAC,qBAAqB,CAAC;QAC/B,aAAa,CAAC,KAAe,CAAC,eAAe,EAAE,GAAG,YAAY,CAAC;QAC/D,SAAS,CAAC,KAAe,CAAC,eAAe,EAAE,GAAG,QAAQ,CAAC;QACvD,sBAAsB,CAAC,mCAAmC,CAAC;QAC3D,uBAAuB,CAAC,oCAAoC,CAAC;QAC7D,WAAW,CAAC,wBAAwB,CAAC;QACrC,SAAS,CAAC,OAAiB,CAAC,oBAAoB,EAAE,MAAM;IAC1D;IAEA,eAAe;QACb,MAAM,CAAC,qBAAqB,CAAC;QAC7B,OAAO,CAAC,KAAe,CAAC,sBAAsB,EAAE,IAAI;QACpD,QAAQ,CAAC,4BAA4B,CAAC;QACtC,WAAW,CAAC,KAAe,CAAC,sBAAsB,EAAE,GAAG,UAAU,CAAC;QAClE,eAAe,CAAC,mCAAmC,CAAC;QACpD,aAAa,CAAC,iCAAiC,CAAC;QAChD,WAAW,CAAC,+BAA+B,CAAC;QAC5C,gBAAgB,CAAC,oCAAoC,CAAC;QACtD,kBAAkB,CAAC,sCAAsC,CAAC;QAC1D,mBAAmB,CAAC,uCAAuC,CAAC;IAC9D;IAEA,eAAe;QACb,MAAM,CAAC,qBAAqB,CAAC;QAC7B,OAAO,CAAC,KAAe,CAAC,sBAAsB,EAAE,IAAI;QACpD,SAAS,CAAC,SAAmB,CAAC,2BAA2B,EAAE,QAAQ;QACnE,UAAU,CAAC,iBAA2B,CAAC,sBAAsB,EAAE,eAAe,SAAS,CAAC;QACxF,cAAc,CAAC,iBAA2B,CAAC,sBAAsB,EAAE,eAAe,aAAa,CAAC;QAChG,iBAAiB,CAAC,iBAA2B,CAAC,sBAAsB,EAAE,eAAe,aAAa,CAAC;QACnG,oBAAoB,CAAC,gBAAwB,SAC3C,CAAC,sBAAsB,EAAE,eAAe,cAAc,EAAE,QAAQ;QAClE,SAAS,CAAC,KAAe,CAAC,sBAAsB,EAAE,GAAG,QAAQ,CAAC;QAC9D,WAAW,CAAC,KAAe,CAAC,sBAAsB,EAAE,GAAG,UAAU,CAAC;IACpE;IAEA,WAAW;QACT,MAAM,CAAC,iBAAiB,CAAC;QACzB,OAAO,CAAC,KAAe,CAAC,kBAAkB,EAAE,IAAI;QAChD,aAAa,CAAC,WAAqB,CAAC,2BAA2B,EAAE,UAAU;QAC3E,QAAQ,CAAC,KAAe,CAAC,kBAAkB,EAAE,GAAG,OAAO,CAAC;QACxD,YAAY,CAAC,4BAA4B,CAAC;IAC5C;IAEA,6CAA6C;IAC7C,YAAY;IACZ,6CAA6C;IAC7C,WAAW;QACT,OAAO,CAAC,uBAAuB,CAAC;QAChC,mBAAmB,CAAC,mCAAmC,CAAC;QACxD,uBAAuB,CAAC,uCAAuC,CAAC;QAChE,YAAY,CAAC,4BAA4B,CAAC;QAC1C,SAAS,CAAC,cAAwB,CAAC,kBAAkB,EAAE,YAAY,QAAQ,CAAC;QAC5E,SAAS,CAAC,+BAA+B,CAAC;IAC5C;IAEA,6CAA6C;IAC7C,wBAAwB;IACxB,6CAA6C;IAC7C,WAAW;QACT,SAAS,CAAC,yBAAyB,CAAC;QACpC,WAAW,CAAC,2BAA2B,CAAC;QACxC,mBAAmB,CAAC,cAAwB,CAAC,4BAA4B,EAAE,YAAY,QAAQ,CAAC;QAChG,SAAS,CAAC,yBAAyB,CAAC;QACpC,YAAY,CAAC,4BAA4B,CAAC;QAC1C,gBAAgB,CAAC,gCAAgC,CAAC;QAClD,uBAAuB,CAAC,uCAAuC,CAAC;QAChE,qBAAqB,CAAC,qCAAqC,CAAC;QAC5D,oBAAoB,CAAC,oCAAoC,CAAC;QAC1D,eAAe,CAAC,+BAA+B,CAAC;IAClD;IAEA,SAAS;QACP,eAAe;QACf,MAAM,CAAC,eAAe,CAAC;QACvB,QAAQ,CAAC,sBAAsB,CAAC;QAChC,WAAW,CAAC,yBAAyB,CAAC;QACtC,WAAW,CAAC,yBAAyB,CAAC;QACtC,UAAU,CAAC,wBAAwB,CAAC;QACpC,QAAQ,CAAC,sBAAsB,CAAC;QAChC,SAAS,CAAC,uBAAuB,CAAC;QAClC,OAAO,CAAC,WAAqB,CAAC,gBAAgB,EAAE,SAAS,MAAM,CAAC;QAEhE,wBAAwB;QACxB,eAAe,CAAC,6BAA6B,CAAC;QAC9C,2BAA2B,CAAC,WAAqB,CAAC,8BAA8B,EAAE,UAAU;QAE5F,qBAAqB;QACrB,aAAa;YACX,gBAAgB,CAAC,0CAA0C,CAAC;YAC5D,YAAY,CAAC,sCAAsC,CAAC;YACpD,YAAY,CAAC,sCAAsC,CAAC;YACpD,WAAW,CAAC,qCAAqC,CAAC;YAClD,SAAS,CAAC,mCAAmC,CAAC;YAC9C,OAAO,CAAC,gCAAgC,CAAC;YACzC,eAAe,CAAC,wCAAwC,CAAC;QAC3D;QAEA,uBAAuB;QACvB,eAAe;YACb,YAAY,CAAC,wCAAwC,CAAC;YACtD,KAAK,CAAC,iCAAiC,CAAC;YACxC,SAAS,CAAC,qCAAqC,CAAC;YAChD,YAAY,CAAC,wCAAwC,CAAC;QACxD;QAEA,sBAAsB;QACtB,cAAc;YACZ,YAAY,CAAC,uCAAuC,CAAC;YACrD,UAAU,CAAC,qCAAqC,CAAC;YACjD,eAAe,CAAC,0CAA0C,CAAC;QAC7D;QAEA,mBAAmB;QACnB,WAAW;YACT,SAAS,CAAC,iCAAiC,CAAC;YAC5C,SAAS,CAAC,iCAAiC,CAAC;YAC5C,QAAQ,CAAC,gCAAgC,CAAC;YAC1C,YAAY,CAAC,mCAAmC,CAAC;YACjD,aAAa,CAAC,qCAAqC,CAAC;QACtD;QAEA,kBAAkB;QAClB,UAAU;YACR,YAAY,CAAC,mCAAmC,CAAC;YACjD,gBAAgB,CAAC,uCAAuC,CAAC;YACzD,cAAc,CAAC,qCAAqC,CAAC;QACvD;QAEA,2BAA2B;QAC3B,wBAAwB,CAAC,sCAAsC,CAAC;QAChE,sBAAsB,CAAC,oCAAoC,CAAC;QAE5D,0BAA0B;QAC1B,qBAAqB,CAAC,mCAAmC,CAAC;QAC1D,mBAAmB,CAAC,iCAAiC,CAAC;QACtD,cAAc,CAAC,4BAA4B,CAAC;QAC5C,iBAAiB,CAAC,+BAA+B,CAAC;QAClD,YAAY,CAAC,oCAAoC,CAAC;QAClD,UAAU,CAAC,kCAAkC,CAAC;QAE9C,oBAAoB;QACpB,WAAW,CAAC,yBAAyB,CAAC;QACtC,mBAAmB,CAAC,iCAAiC,CAAC;QACtD,kBAAkB,CAAC,gCAAgC,CAAC;QAEpD,qBAAqB;QACrB,YAAY,CAAC,0BAA0B,CAAC;QACxC,oBAAoB,CAAC,kCAAkC,CAAC;QACxD,kBAAkB,CAAC,gCAAgC,CAAC;IACtD;IAEA,6CAA6C;IAC7C,0BAA0B;IAC1B,6CAA6C;IAC7C,QAAQ;QACN,QAAQ,CAAC,cAAc,CAAC;QACxB,QAAQ,CAAC,qBAAqB,CAAC;QAC/B,eAAe,CAAC,4BAA4B,CAAC;QAC7C,UAAU,CAAC,uBAAuB,CAAC;QACnC,QAAQ,CAAC,qBAAqB,CAAC;QAC/B,SAAS,CAAC,sBAAsB,CAAC;IACnC;IAEA,6CAA6C;IAC7C,4CAA4C;IAC5C,6CAA6C;IAC7C,OAAO;QACL,kBAAkB;QAClB,UAAU,CAAC,+BAA+B,CAAC;QAE3C,QAAQ;QACR,OAAO,CAAC,aAAa,CAAC;QACtB,YAAY,CAAC,KAAe,CAAC,cAAc,EAAE,IAAI;QAEjD,YAAY;QACZ,WAAW,CAAC,gCAAgC,CAAC;QAC7C,gBAAgB,CAAC,KAAe,CAAC,iCAAiC,EAAE,IAAI;QAExE,UAAU;QACV,SAAS,CAAC,8BAA8B,CAAC;QACzC,cAAc,CAAC,KAAe,CAAC,+BAA+B,EAAE,IAAI;QAEpE,gBAAgB;QAChB,eAAe,CAAC,2BAA2B,CAAC;QAE5C,UAAU;QACV,SAAS,CAAC,8BAA8B,CAAC;QACzC,cAAc,CAAC,KAAe,CAAC,+BAA+B,EAAE,IAAI;QAEpE,WAAW;QACX,UAAU,CAAC,+BAA+B,CAAC;QAC3C,eAAe,CAAC,KAAe,CAAC,gCAAgC,EAAE,IAAI;QACtE,oBAAoB,CAAC,KAAe,CAAC,gCAAgC,EAAE,GAAG,WAAW,CAAC;QAEtF,iBAAiB;QACjB,gBAAgB,CAAC,6BAA6B,CAAC;QAC/C,sBAAsB,CAAC,MAAgB,CAAC,8BAA8B,EAAE,KAAK;QAE7E,sBAAsB;QACtB,SAAS,CAAC,qBAAqB,CAAC;QAChC,cAAc,CAAC,KAAe,CAAC,sBAAsB,EAAE,IAAI;QAE3D,WAAW;QACX,UAAU,CAAC,sBAAsB,CAAC;QAClC,gBAAgB,CAAC,KAAe,CAAC,uBAAuB,EAAE,IAAI;QAC9D,mBAAmB,CAAC,KAAe,CAAC,uBAAuB,EAAE,GAAG,SAAS,CAAC;QAC1E,mBAAmB,CAAC,SAAmB,CAAC,gCAAgC,EAAE,QAAQ;QAElF,aAAa;QACb,YAAY,CAAC,iCAAiC,CAAC;QAC/C,iBAAiB,CAAC,KAAe,CAAC,kCAAkC,EAAE,IAAI;IAC5E;IAEA,cAAc;QACZ,MAAM,CAAC,oBAAoB,CAAC;QAC5B,OAAO,CAAC,KAAe,CAAC,qBAAqB,EAAE,IAAI;QACnD,WAAW,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,UAAU,CAAC;QACjE,MAAM,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,KAAK,CAAC;QACvD,MAAM,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,KAAK,CAAC;QACvD,QAAQ,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,OAAO,CAAC;QAC3D,SAAS,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,QAAQ,CAAC;QAC7D,MAAM,CAAC,KAAe,CAAC,qBAAqB,EAAE,GAAG,KAAK,CAAC;IACzD;IAEA,6CAA6C;IAC7C,oCAAoC;IACpC,6CAA6C;IAC7C,KAAK;QACH,OAAO,CAAC,iBAAiB,CAAC;QAC1B,QAAQ,CAAC,kBAAkB,CAAC;QAC5B,QAAQ,CAAC,kBAAkB,CAAC;QAC5B,SAAS,CAAC,mBAAmB,CAAC;QAC9B,cAAc,CAAC,wBAAwB,CAAC;QACxC,kBAAkB,CAAC,mCAAmC,CAAC;QACvD,oBAAoB,CAAC,8BAA8B,CAAC;QACpD,SAAS,CAAC,mBAAmB,CAAC;QAC9B,QAAQ,CAAC,kBAAkB,CAAC;IAC9B;IAEA,6CAA6C;IAC7C,uBAAuB;IACvB,6CAA6C;IAC7C,UAAU;QACR,MAAM,CAAC,gBAAgB,CAAC;QACxB,OAAO,CAAC,KAAe,CAAC,iBAAiB,EAAE,IAAI;QAC/C,KAAK,CAAC,oBAAoB,CAAC;QAC3B,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,OAAO,CAAC;QACvD,UAAU,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,SAAS,CAAC;QAC3D,QAAQ,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,OAAO,CAAC;QACvD,iBAAiB,CAAC,KAAe,CAAC,iBAAiB,EAAE,GAAG,SAAS,CAAC;QAClE,YAAY,CAAC,YAAsB,CAAC,yBAAyB,EAAE,WAAW;QAC1E,UAAU,CAAC,UAAoB,CAAC,uBAAuB,EAAE,SAAS;IACpE;IAEA,6CAA6C;IAC7C,kCAAkC;IAClC,6CAA6C;IAC7C,oBAAoB;QAClB,MAAM,CAAC,0BAA0B,CAAC;QAClC,OAAO,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QACzD,UAAU,CAAC,UAAoB,CAAC,iCAAiC,EAAE,SAAS;QAC5E,OAAO,CAAC,gCAAgC,CAAC;QACzC,KAAK,CAAC,8BAA8B,CAAC;QACrC,QAAQ,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QAC1D,QAAQ,CAAC,KAAe,CAAC,2BAA2B,EAAE,IAAI;QAC1D,SAAS,CAAC,OAAiB,CAAC,gCAAgC,EAAE,MAAM;QACpE,iBAAiB,CAAC,0CAA0C,CAAC;IAC/D;IAEA,6CAA6C;IAC7C,QAAQ;IACR,6CAA6C;IAC7C,OAAO;QACL,MAAM,CAAC,aAAa,CAAC;QACrB,OAAO,CAAC,KAAe,CAAC,cAAc,EAAE,IAAI;QAC5C,WAAW,CAAC,uBAAuB,CAAC;QACpC,QAAQ,CAAC,oBAAoB,CAAC;QAC9B,WAAW,CAAC,SAAmB,CAAC,cAAc,EAAE,OAAO,UAAU,CAAC;QAClE,aAAa,CAAC,SAAmB,CAAC,cAAc,EAAE,OAAO,YAAY,CAAC;QACtE,QAAQ,CAAC,SAAmB,CAAC,cAAc,EAAE,OAAO,OAAO,CAAC;IAC9D;IAEA,6CAA6C;IAC7C,gCAAgC;IAChC,6CAA6C;IAC7C,iBAAiB;QACf,MAAM,CAAC,uBAAuB,CAAC;QAC/B,OAAO,CAAC,KAAe,CAAC,wBAAwB,EAAE,IAAI;QACtD,SAAS,CAAC,KAAe,CAAC,wBAAwB,EAAE,GAAG,QAAQ,CAAC;QAChE,QAAQ,CAAC,KAAe,CAAC,wBAAwB,EAAE,GAAG,OAAO,CAAC;QAC9D,SAAS,CAAC,KAAe,CAAC,wBAAwB,EAAE,GAAG,QAAQ,CAAC;QAChE,eAAe,CAAC,KAAe,CAAC,wBAAwB,EAAE,GAAG,cAAc,CAAC;QAC5E,QAAQ,CAAC,KAAe,CAAC,wBAAwB,EAAE,GAAG,OAAO,CAAC;QAC9D,YAAY,CAAC,kCAAkC,CAAC;QAChD,SAAS,CAAC,+BAA+B,CAAC;QAC1C,UAAU,CAAC,gCAAgC,CAAC;QAC5C,UAAU,CAAC,gCAAgC,CAAC;QAC5C,WAAW,CAAC,WAAqB,CAAC,+BAA+B,EAAE,UAAU;QAC7E,eAAe,CAAC,qCAAqC,CAAC;QACtD,gBAAgB,CAAC,WAAqB,CAAC,+BAA+B,EAAE,SAAS,QAAQ,CAAC;IAC5F;IAEA,6CAA6C;IAC7C,iCAAiC;IACjC,6CAA6C;IAC7C,SAAS;QACP,WAAW;QACX,UAAU,CAAC,wBAAwB,CAAC;QACpC,eAAe,CAAC,KAAe,CAAC,yBAAyB,EAAE,IAAI;QAC/D,aAAa,CAAC,KAAe,CAAC,yBAAyB,EAAE,GAAG,IAAI,CAAC;QACjE,cAAc,CAAC,KAAe,CAAC,yBAAyB,EAAE,GAAG,KAAK,CAAC;QACnE,cAAc,CAAC,KAAe,CAAC,yBAAyB,EAAE,GAAG,KAAK,CAAC;QAEnE,WAAW;QACX,UAAU,CAAC,wBAAwB,CAAC;QACpC,eAAe,CAAC,KAAe,CAAC,yBAAyB,EAAE,IAAI;QAC/D,gBAAgB,CAAC,KAAe,CAAC,yBAAyB,EAAE,GAAG,OAAO,CAAC;QACvE,cAAc,CAAC,KAAe,CAAC,yBAAyB,EAAE,GAAG,KAAK,CAAC;QAEnE,YAAY;QACZ,WAAW,CAAC,yBAAyB,CAAC;QACtC,gBAAgB,CAAC,wCAAwC,CAAC;QAC1D,mBAAmB,CAAC,kCAAkC,CAAC;QACvD,oBAAoB,CAAC,qCAAqC,CAAC;QAE3D,UAAU;QACV,SAAS,CAAC,uBAAuB,CAAC;QAClC,cAAc,CAAC,6BAA6B,CAAC;QAC7C,gBAAgB,CAAC,+BAA+B,CAAC;QACjD,gBAAgB,CAAC,gCAAgC,CAAC;QAClD,YAAY,CAAC,2BAA2B,CAAC;QAEzC,WAAW;QACX,UAAU,CAAC,wBAAwB,CAAC;QAEpC,gBAAgB;QAChB,eAAe,CAAC,6BAA6B,CAAC;QAC9C,eAAe,CAAC,sCAAsC,CAAC;QACvD,gBAAgB,CAAC,uCAAuC,CAAC;IAC3D;IAEA,6CAA6C;IAC7C,oBAAoB;IACpB,6CAA6C;IAC7C,QAAQ;QACN,oBAAoB;QACpB,YAAY,CAAC,yBAAyB,CAAC;QACvC,gBAAgB,CAAC,KAAe,CAAC,0BAA0B,EAAE,IAAI;QAEjE,iBAAiB;QACjB,SAAS,CAAC,sBAAsB,CAAC;QAEjC,sBAAsB;QACtB,cAAc,CAAC,2BAA2B,CAAC;QAC3C,mBAAmB,CAAC,KAAe,CAAC,4BAA4B,EAAE,IAAI;QAEtE,wBAAwB;QACxB,QAAQ,CAAC,qBAAqB,CAAC;QAC/B,iBAAiB,CAAC,8BAA8B,CAAC;QACjD,aAAa,CAAC,0BAA0B,CAAC;QACzC,iBAAiB,CAAC,8BAA8B,CAAC;QACjD,QAAQ,CAAC,qBAAqB,CAAC;IACjC;IAEA,6CAA6C;IAC7C,UAAU;IACV,6CAA6C;IAC7C,SAAS;QACP,MAAM,CAAC,eAAe,CAAC;QACvB,OAAO,CAAC,KAAe,CAAC,gBAAgB,EAAE,IAAI;QAC9C,QAAQ,CAAC,QAAkB,CAAC,uBAAuB,EAAE,mBAAmB,QAAQ;QAChF,SAAS,CAAC,WAAqB,CAAC,wBAAwB,EAAE,mBAAmB,WAAW;QACxF,KAAK,CAAC,mBAAmB,CAAC;QAC1B,YAAY,CAAC,0BAA0B,CAAC;QACxC,YAAY,CAAC,KAAe,CAAC,gBAAgB,EAAE,GAAG,WAAW,CAAC;QAC9D,QAAQ,CAAC,KAAe,CAAC,gBAAgB,EAAE,GAAG,OAAO,CAAC;QACtD,cAAc,CAAC,4BAA4B,CAAC;QAC5C,kBAAkB,CAAC,QAAkB,CAAC,8BAA8B,EAAE,mBAAmB,QAAQ;QACjG,SAAS,CAAC,KAAe,CAAC,gBAAgB,EAAE,GAAG,QAAQ,CAAC;QACxD,kBAAkB,CAAC,KAAe,CAAC,gBAAgB,EAAE,GAAG,UAAU,CAAC;IACrE;IAEA,6CAA6C;IAC7C,WAAW;IACX,6CAA6C;IAC7C,UAAU;QACR,MAAM,CAAC,qBAAqB,CAAC;QAC7B,QAAQ,CAAC,uBAAuB,CAAC;QACjC,eAAe,CAAC,8BAA8B,CAAC;QAC/C,aAAa,CAAC,4BAA4B,CAAC;QAC3C,SAAS,CAAC,wBAAwB,CAAC;QACnC,UAAU,CAAC,yBAAyB,CAAC;IACvC;AACF;AAKO,MAAM,cAAc;IACzB,IAAI;IACJ,SAAS;IACT,UAAU;IACV,YAAY;IACZ,aAAa;IACb,cAAc;IACd,WAAW;IACX,WAAW;IACX,UAAU;IACV,sBAAsB;IACtB,mBAAmB;IACnB,uBAAuB;IACvB,aAAa;IACb,qBAAqB;IACrB,iBAAiB;AACnB;uCA2Ce","debugId":null}},
    {"offset": {"line": 1392, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.cache.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Cache & Configuration - Production Implementation\r\n *\r\n * Production-ready configuration and cache functions for compliance management\r\n * with full HIPAA audit logging, secondary storage, and violation detection.\r\n */\r\n\r\nimport { headers } from 'next/headers';\r\nimport type { AuditLog } from '@/schemas/compliance/compliance.schemas';\r\nimport { serverGet } from '@/lib/api/nextjs-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\n\r\n// ============================================================================\r\n// Configuration\r\n// ============================================================================\r\n\r\nexport const BACKEND_URL = process.env.BACKEND_URL || process.env.API_BASE_URL || 'http://localhost:3001';\r\nexport const SECONDARY_LOG_ENABLED = process.env.ENABLE_SECONDARY_LOGGING === 'true';\r\nexport const AWS_S3_BUCKET = process.env.AWS_AUDIT_LOG_BUCKET;\r\nexport const AWS_REGION = process.env.AWS_REGION || 'us-east-1';\r\n\r\n// Retry configuration\r\nexport const MAX_RETRIES = 3;\r\nexport const RETRY_DELAY_MS = 1000;\r\nexport const RETRYABLE_STATUS_CODES = [408, 429, 500, 502, 503, 504];\r\n\r\n// HIPAA Compliance configuration\r\nexport const HIPAA_AUDIT_RETENTION_YEARS = 6; // HIPAA requires 6-year retention\r\nexport const PHI_ACCESS_LOG_ENABLED = true;\r\nexport const REAL_TIME_MONITORING_ENABLED = process.env.NODE_ENV === 'production';\r\n\r\n// ============================================================================\r\n// Production Cache Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Get authentication token for API calls\r\n * Uses the production-ready JWT token system with httpOnly cookies\r\n */\r\nexport async function getAuthToken(): Promise<string> {\r\n  try {\r\n    // Get token from httpOnly cookies (server-side)\r\n    const { cookies } = await import('next/headers');\r\n    const cookieStore = await cookies();\r\n    \r\n    // Try different cookie names that might be used\r\n    const token = cookieStore.get('auth.token')?.value || \r\n                  cookieStore.get('auth_token')?.value ||\r\n                  cookieStore.get('accessToken')?.value;\r\n    \r\n    if (token) {\r\n      return token;\r\n    }\r\n    \r\n    // If no valid token found, throw authentication error\r\n    throw new Error('No valid authentication token found');\r\n  } catch (error) {\r\n    console.error('Token retrieval error:', error);\r\n    throw new Error('Authentication required - please log in');\r\n  }\r\n}\r\n\r\n/**\r\n * Get the most recent audit log for hash chaining\r\n * Production implementation with proper API integration\r\n */\r\nexport async function getLatestAuditLog(): Promise<AuditLog | null> {\r\n  try {\r\n    const response = await serverGet<{ data: AuditLog[] }>(\r\n      `${API_ENDPOINTS.ADMIN.AUDIT_LOGS}?page=1&limit=1&sortBy=timestamp&sortOrder=desc`\r\n    );\r\n\r\n    if (response?.data && response.data.length > 0) {\r\n      return response.data[0];\r\n    }\r\n\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Failed to fetch latest audit log:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Log HIPAA compliance audit entry with proper metadata\r\n * Production implementation with full audit trail\r\n */\r\nexport async function logHIPAAAuditEntry(entry: Record<string, unknown>): Promise<void> {\r\n  try {\r\n    const userContext = await getCurrentUserContext();\r\n    const timestamp = new Date().toISOString();\r\n\r\n    const auditEntry = {\r\n      ...entry,\r\n      timestamp,\r\n      auditType: 'HIPAA_COMPLIANCE',\r\n      userId: userContext.userId,\r\n      ipAddress: userContext.ipAddress,\r\n      userAgent: userContext.userAgent || 'Unknown',\r\n      sessionId: userContext.sessionId || 'No-Session',\r\n      retentionYears: HIPAA_AUDIT_RETENTION_YEARS,\r\n      severity: entry.phiAccessed ? 'HIGH' : 'MEDIUM',\r\n      complianceFlags: {\r\n        hipaaAuditRequired: true,\r\n        phiAccess: !!entry.phiAccessed,\r\n        sensitiveOperation: true,\r\n        longTermRetention: true\r\n      }\r\n    };\r\n\r\n    // Primary logging - always attempt\r\n    if (PHI_ACCESS_LOG_ENABLED) {\r\n      console.log('HIPAA Audit Entry:', {\r\n        id: auditEntry.timestamp,\r\n        userId: auditEntry.userId,\r\n        action: entry.action || 'UNKNOWN_ACTION',\r\n        resource: entry.resourceType || 'UNKNOWN_RESOURCE',\r\n        timestamp: auditEntry.timestamp,\r\n        phiAccessed: auditEntry.complianceFlags.phiAccess\r\n      });\r\n    }\r\n\r\n    // Real-time monitoring alert for PHI access\r\n    if (REAL_TIME_MONITORING_ENABLED && entry.phiAccessed) {\r\n      await sendRealTimeAlert(auditEntry);\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('HIPAA audit logging failed:', error);\r\n    // Don't throw - logging failure shouldn't break operations\r\n  }\r\n}\r\n\r\n/**\r\n * Log to secondary storage (fire-and-forget)\r\n * Production implementation with AWS S3 backup\r\n */\r\nexport async function logToSecondaryStore(entry: Record<string, unknown>): Promise<void> {\r\n  if (!SECONDARY_LOG_ENABLED) return;\r\n\r\n  try {\r\n    const auditLogBackup = {\r\n      ...entry,\r\n      backupTimestamp: new Date().toISOString(),\r\n      backupDestination: 'AWS_S3',\r\n      bucketName: AWS_S3_BUCKET,\r\n      region: AWS_REGION,\r\n      retentionPolicy: `${HIPAA_AUDIT_RETENTION_YEARS}_YEARS`,\r\n      encryptionEnabled: true\r\n    };\r\n\r\n    // In production, this would upload to S3\r\n    if (AWS_S3_BUCKET) {\r\n      console.log('Secondary storage backup:', {\r\n        bucket: AWS_S3_BUCKET,\r\n        key: `audit-logs/${new Date().getFullYear()}/${new Date().getMonth() + 1}/${auditLogBackup.backupTimestamp}`,\r\n        size: JSON.stringify(auditLogBackup).length\r\n      });\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('Secondary storage logging failed:', error);\r\n    // Fire-and-forget - don't throw errors\r\n  }\r\n}\r\n\r\n/**\r\n * Detect and log compliance violations\r\n * Production implementation with violation pattern detection\r\n */\r\nexport async function detectAndLogViolations(entry: Record<string, unknown>): Promise<void> {\r\n  try {\r\n    const violations: string[] = [];\r\n    const userContext = await getCurrentUserContext();\r\n\r\n    // Check for potential violations\r\n    if (entry.phiAccessed && !entry.auditReason) {\r\n      violations.push('PHI_ACCESS_WITHOUT_AUDIT_REASON');\r\n    }\r\n\r\n    if (entry.action === 'BULK_DELETE' && entry.phiAccessed) {\r\n      violations.push('BULK_PHI_DELETION_DETECTED');\r\n    }\r\n\r\n    if (entry.resourceType === 'HEALTH_RECORD' && !userContext.userRole.includes('NURSE')) {\r\n      violations.push('UNAUTHORIZED_HEALTH_RECORD_ACCESS');\r\n    }\r\n\r\n    // Log violations if found\r\n    if (violations.length > 0) {\r\n      const violationEntry = {\r\n        violationType: 'COMPLIANCE_VIOLATION',\r\n        violations,\r\n        originalEntry: entry,\r\n        detectedAt: new Date().toISOString(),\r\n        severity: 'HIGH',\r\n        requiresInvestigation: true,\r\n        userId: userContext.userId,\r\n        ipAddress: userContext.ipAddress\r\n      };\r\n\r\n      console.warn('Compliance violations detected:', violationEntry);\r\n\r\n      // In production, this would trigger alerts to compliance team\r\n      if (REAL_TIME_MONITORING_ENABLED) {\r\n        await sendComplianceAlert(violationEntry);\r\n      }\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('Violation detection failed:', error);\r\n    // Don't throw - violation detection failure shouldn't break operations\r\n  }\r\n}\r\n\r\n/**\r\n * Get current user context for audit logging\r\n * Production implementation with proper user context extraction\r\n */\r\nexport async function getCurrentUserContext(): Promise<{ \r\n  userId: string; \r\n  ipAddress: string; \r\n  userName: string; \r\n  userRole: string;\r\n  userAgent?: string;\r\n  sessionId?: string;\r\n}> {\r\n  try {\r\n    const headersList = await headers();\r\n    const ipAddress = headersList.get('x-forwarded-for') || \r\n                      headersList.get('x-real-ip') || \r\n                      headersList.get('cf-connecting-ip') || \r\n                      '127.0.0.1';\r\n    \r\n    const userAgent = headersList.get('user-agent') || 'Unknown';\r\n    \r\n    // Try to get user info from auth token\r\n    const token = await getAuthToken();\r\n    if (token) {\r\n      try {\r\n        // In production, decode JWT to get user info\r\n        const userInfo = await decodeUserFromToken(token);\r\n        return {\r\n          userId: userInfo.id || 'unknown-user',\r\n          ipAddress,\r\n          userName: `${userInfo.firstName || ''} ${userInfo.lastName || ''}`.trim() || 'Unknown User',\r\n          userRole: userInfo.role || 'UNKNOWN',\r\n          userAgent,\r\n          sessionId: userInfo.sessionId || generateSessionId()\r\n        };\r\n      } catch (error) {\r\n        console.warn('Failed to decode user from token:', error);\r\n      }\r\n    }\r\n\r\n    // Fallback for unauthenticated requests\r\n    return {\r\n      userId: 'anonymous',\r\n      ipAddress,\r\n      userName: 'Anonymous User',\r\n      userRole: 'GUEST',\r\n      userAgent,\r\n      sessionId: generateSessionId()\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to get user context:', error);\r\n    return {\r\n      userId: 'system-error',\r\n      ipAddress: '0.0.0.0',\r\n      userName: 'System Error',\r\n      userRole: 'ERROR',\r\n      userAgent: 'Unknown',\r\n      sessionId: 'error-session'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get current user ID for audit logging\r\n */\r\nexport async function getCurrentUserId(): Promise<string> {\r\n  const context = await getCurrentUserContext();\r\n  return context.userId;\r\n}\r\n\r\n/**\r\n * Send real-time alert for PHI access\r\n * Production implementation with notification system\r\n */\r\nasync function sendRealTimeAlert(auditEntry: Record<string, unknown>): Promise<void> {\r\n  try {\r\n    // In production, this would integrate with notification systems\r\n    // like PagerDuty, Slack, or internal alerting systems\r\n    console.warn('ðŸš¨ REAL-TIME PHI ACCESS ALERT:', {\r\n      alertType: 'PHI_ACCESS',\r\n      timestamp: new Date().toISOString(),\r\n      userId: auditEntry.userId,\r\n      action: auditEntry.action,\r\n      severity: auditEntry.severity,\r\n      requiresReview: true\r\n    });\r\n\r\n    // Would send to monitoring systems in production\r\n    // await notificationService.sendAlert({\r\n    //   type: 'PHI_ACCESS_ALERT',\r\n    //   data: auditEntry,\r\n    //   channels: ['compliance-team', 'security-alerts']\r\n    // });\r\n\r\n  } catch (error) {\r\n    console.error('Failed to send real-time alert:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Send compliance violation alert\r\n * Production implementation with compliance team notification\r\n */\r\nasync function sendComplianceAlert(violationEntry: Record<string, unknown>): Promise<void> {\r\n  try {\r\n    // In production, this would trigger immediate compliance team alerts\r\n    console.error('ðŸš¨ COMPLIANCE VIOLATION DETECTED:', {\r\n      alertType: 'COMPLIANCE_VIOLATION',\r\n      timestamp: new Date().toISOString(),\r\n      violations: violationEntry.violations,\r\n      severity: 'CRITICAL',\r\n      requiresImmediateAction: true,\r\n      escalationRequired: true\r\n    });\r\n\r\n    // Would integrate with compliance monitoring systems in production\r\n    // await complianceService.reportViolation({\r\n    //   type: 'HIPAA_VIOLATION',\r\n    //   data: violationEntry,\r\n    //   urgency: 'HIGH',\r\n    //   recipients: ['compliance-officer', 'security-team', 'legal-team']\r\n    // });\r\n\r\n  } catch (error) {\r\n    console.error('Failed to send compliance alert:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Decode user information from JWT token\r\n * Production implementation with proper JWT decoding\r\n */\r\nasync function decodeUserFromToken(token: string): Promise<{\r\n  id: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  role: string;\r\n  sessionId?: string;\r\n}> {\r\n  try {\r\n    // In production, use a proper JWT library to decode and verify\r\n    // This is a simplified version for demonstration\r\n    const base64Payload = token.split('.')[1];\r\n    if (!base64Payload) {\r\n      throw new Error('Invalid token format');\r\n    }\r\n\r\n    const payload = JSON.parse(atob(base64Payload));\r\n    \r\n    return {\r\n      id: payload.sub || payload.userId || 'unknown',\r\n      firstName: payload.firstName,\r\n      lastName: payload.lastName,\r\n      role: payload.role || 'USER',\r\n      sessionId: payload.sessionId || payload.jti\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to decode JWT token:', error);\r\n    throw new Error('Invalid token');\r\n  }\r\n}\r\n\r\n/**\r\n * Generate unique session ID\r\n */\r\nfunction generateSessionId(): string {\r\n  return `session-${Date.now()}-${Math.random().toString(36).substring(2, 15)}`;\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1723, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/compliance/audit.ts"],"sourcesContent":["import crypto from 'crypto';\r\nimport type {\r\n  AuditLog,\r\n  AuditActionTypeEnum,\r\n  AuditSeverityEnum,\r\n  ResourceTypeEnum,\r\n} from '@/schemas/compliance/compliance.schemas';\r\n\r\n/**\r\n * Audit Logging Utility\r\n * Provides cryptographically-secure audit logging with tamper detection\r\n */\r\n\r\ninterface AuditLogContext {\r\n  userId: string;\r\n  userName: string;\r\n  userRole: string;\r\n  sessionId: string;\r\n  ipAddress: string;\r\n  userAgent: string;\r\n}\r\n\r\ninterface AuditLogEntry {\r\n  action: AuditActionTypeEnum;\r\n  severity?: AuditSeverityEnum;\r\n  resourceType?: ResourceTypeEnum;\r\n  resourceId?: string;\r\n  resourceName?: string;\r\n  details?: Record<string, any>;\r\n  changes?: {\r\n    before?: Record<string, any>;\r\n    after?: Record<string, any>;\r\n  };\r\n  status?: 'SUCCESS' | 'FAILURE' | 'PARTIAL';\r\n  errorMessage?: string;\r\n  phiAccessed?: boolean;\r\n  complianceFlags?: string[];\r\n}\r\n\r\n/**\r\n * Generate cryptographic hash for audit log entry\r\n * Uses SHA-256 to create tamper-proof verification hash\r\n */\r\nexport function generateAuditHash(\r\n  entry: Partial<AuditLog>,\r\n  previousHash?: string\r\n): string {\r\n  const dataToHash = {\r\n    timestamp: entry.timestamp,\r\n    action: entry.action,\r\n    userId: entry.userId,\r\n    resourceType: entry.resourceType,\r\n    resourceId: entry.resourceId,\r\n    details: entry.details,\r\n    changes: entry.changes,\r\n    previousHash: previousHash || '',\r\n  };\r\n\r\n  const hash = crypto\r\n    .createHash('sha256')\r\n    .update(JSON.stringify(dataToHash))\r\n    .digest('hex');\r\n\r\n  return hash;\r\n}\r\n\r\n/**\r\n * Verify audit log integrity by checking hash chain\r\n */\r\n// Overload signatures\r\nexport function verifyAuditChain(\r\n  currentLog: AuditLog,\r\n  previousLog?: AuditLog\r\n): boolean;\r\nexport function verifyAuditChain(\r\n  logs: AuditLog[]\r\n): { valid: boolean; firstInvalidIndex?: number };\r\n\r\n// Implementation\r\nexport function verifyAuditChain(\r\n  currentLogOrLogs: AuditLog | AuditLog[],\r\n  previousLog?: AuditLog\r\n): boolean | { valid: boolean; firstInvalidIndex?: number } {\r\n  // Handle array case\r\n  if (Array.isArray(currentLogOrLogs)) {\r\n    const logs = currentLogOrLogs;\r\n    for (let i = 0; i < logs.length; i++) {\r\n      const currentLog = logs[i];\r\n      const prevLog = i > 0 ? logs[i - 1] : undefined;\r\n\r\n      // Verify current log hash\r\n      const expectedHash = generateAuditHash(currentLog, prevLog?.verificationHash);\r\n      if (currentLog.verificationHash !== expectedHash) {\r\n        return { valid: false, firstInvalidIndex: i };\r\n      }\r\n\r\n      // Verify chain integrity\r\n      if (prevLog && currentLog.previousHash !== prevLog.verificationHash) {\r\n        return { valid: false, firstInvalidIndex: i };\r\n      }\r\n    }\r\n    return { valid: true };\r\n  }\r\n\r\n  // Handle single log case\r\n  const currentLog = currentLogOrLogs;\r\n\r\n  // Verify current log hash\r\n  const expectedHash = generateAuditHash(currentLog, previousLog?.verificationHash);\r\n  if (currentLog.verificationHash !== expectedHash) {\r\n    return false;\r\n  }\r\n\r\n  // Verify chain integrity\r\n  if (previousLog && currentLog.previousHash !== previousLog.verificationHash) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Create audit log entry with automatic hash generation\r\n */\r\nexport function createAuditLogEntry(\r\n  context: AuditLogContext,\r\n  entry: AuditLogEntry,\r\n  previousHash?: string\r\n): Omit<AuditLog, 'id'> {\r\n  const timestamp = new Date().toISOString();\r\n\r\n  const auditLog: Omit<AuditLog, 'id'> = {\r\n    timestamp,\r\n    action: entry.action,\r\n    severity: entry.severity || inferSeverity(entry.action),\r\n    userId: context.userId,\r\n    userName: context.userName,\r\n    userRole: context.userRole,\r\n    resourceType: entry.resourceType,\r\n    resourceId: entry.resourceId,\r\n    resourceName: entry.resourceName,\r\n    ipAddress: context.ipAddress,\r\n    userAgent: context.userAgent,\r\n    sessionId: context.sessionId,\r\n    details: sanitizeDetails(entry.details),\r\n    changes: sanitizeChanges(entry.changes),\r\n    status: entry.status || 'SUCCESS',\r\n    errorMessage: entry.errorMessage,\r\n    phiAccessed: entry.phiAccessed || isPHIAction(entry.action),\r\n    complianceFlags: entry.complianceFlags || [],\r\n    verificationHash: '',\r\n    previousHash,\r\n  };\r\n\r\n  // Generate hash after all fields are set\r\n  auditLog.verificationHash = generateAuditHash(auditLog, previousHash);\r\n\r\n  return auditLog;\r\n}\r\n\r\n/**\r\n * Infer severity level based on action type\r\n */\r\nfunction inferSeverity(action: AuditActionTypeEnum): AuditSeverityEnum {\r\n  const criticalActions: AuditActionTypeEnum[] = [\r\n    'DATA_BREACH',\r\n    'UNAUTHORIZED_ACCESS',\r\n    'EMERGENCY_OVERRIDE',\r\n    'BREAK_GLASS',\r\n    'PHI_BULK_ACCESS',\r\n  ];\r\n\r\n  const securityActions: AuditActionTypeEnum[] = [\r\n    'LOGIN_FAILED',\r\n    'SESSION_EXPIRED',\r\n    'PERMISSION_CHANGE',\r\n    'ROLE_CHANGE',\r\n    'SECURITY_ALERT',\r\n  ];\r\n\r\n  const warningActions: AuditActionTypeEnum[] = [\r\n    'PHI_EXPORT',\r\n    'PHI_PRINT',\r\n    'PHI_DELETE',\r\n    'RECORD_DELETE',\r\n    'EMERGENCY_ACCESS',\r\n  ];\r\n\r\n  if (criticalActions.includes(action)) return 'CRITICAL';\r\n  if (securityActions.includes(action)) return 'SECURITY';\r\n  if (warningActions.includes(action)) return 'WARNING';\r\n  return 'INFO';\r\n}\r\n\r\n/**\r\n * Determine if action involves PHI access\r\n */\r\nfunction isPHIAction(action: AuditActionTypeEnum): boolean {\r\n  const phiActions: AuditActionTypeEnum[] = [\r\n    'PHI_VIEW',\r\n    'PHI_CREATE',\r\n    'PHI_UPDATE',\r\n    'PHI_DELETE',\r\n    'PHI_EXPORT',\r\n    'PHI_PRINT',\r\n    'PHI_SEARCH',\r\n    'PHI_BULK_ACCESS',\r\n  ];\r\n\r\n  return phiActions.includes(action);\r\n}\r\n\r\n/**\r\n * Sanitize details to remove sensitive information from logs\r\n */\r\nfunction sanitizeDetails(details?: Record<string, any>): Record<string, any> | undefined {\r\n  if (!details) return undefined;\r\n\r\n  const sanitized = { ...details };\r\n  const sensitiveFields = ['password', 'ssn', 'creditCard', 'token', 'secret', 'apiKey'];\r\n\r\n  for (const field of sensitiveFields) {\r\n    if (field in sanitized) {\r\n      sanitized[field] = '[REDACTED]';\r\n    }\r\n  }\r\n\r\n  return sanitized;\r\n}\r\n\r\n/**\r\n * Sanitize changes object to prevent logging sensitive data\r\n */\r\nfunction sanitizeChanges(changes?: {\r\n  before?: Record<string, any>;\r\n  after?: Record<string, any>;\r\n}): typeof changes {\r\n  if (!changes) return undefined;\r\n\r\n  return {\r\n    before: sanitizeDetails(changes.before),\r\n    after: sanitizeDetails(changes.after),\r\n  };\r\n}\r\n\r\n/**\r\n * Detect PHI in data fields\r\n */\r\nexport function detectPHI(data: Record<string, any>): boolean {\r\n  const phiFields = [\r\n    'ssn',\r\n    'dateOfBirth',\r\n    'medicalRecordNumber',\r\n    'diagnosis',\r\n    'medication',\r\n    'allergy',\r\n    'condition',\r\n    'prescription',\r\n    'treatment',\r\n    'labResult',\r\n    'immunization',\r\n    'insurance',\r\n  ];\r\n\r\n  for (const field of phiFields) {\r\n    if (field in data) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Generate compliance flags based on audit context\r\n */\r\nexport function generateComplianceFlags(\r\n  action: AuditActionTypeEnum,\r\n  context: AuditLogContext,\r\n  details?: Record<string, any>\r\n): string[] {\r\n  const flags: string[] = [];\r\n\r\n  // Check for after-hours access\r\n  const hour = new Date().getHours();\r\n  if (hour < 6 || hour > 22) {\r\n    flags.push('AFTER_HOURS_ACCESS');\r\n  }\r\n\r\n  // Check for bulk operations\r\n  if (details?.recordCount && details.recordCount > 50) {\r\n    flags.push('BULK_OPERATION');\r\n  }\r\n\r\n  // Check for emergency access\r\n  if (action === 'EMERGENCY_ACCESS' || action === 'BREAK_GLASS') {\r\n    flags.push('EMERGENCY_ACCESS_USED');\r\n  }\r\n\r\n  // Check for failed actions\r\n  if (details?.status === 'FAILURE') {\r\n    flags.push('FAILED_ACTION');\r\n  }\r\n\r\n  // Check for export actions\r\n  if (action === 'PHI_EXPORT' || action === 'DOCUMENT_DOWNLOAD') {\r\n    flags.push('DATA_EXPORT');\r\n  }\r\n\r\n  return flags;\r\n}\r\n\r\n/**\r\n * Export audit logs with encryption\r\n */\r\nexport async function exportAuditLogs(\r\n  logs: AuditLog[],\r\n  format: 'JSON' | 'CSV' | 'PDF' | 'XLSX',\r\n  encrypt = true,\r\n  password?: string\r\n): Promise<{ data: string | Buffer; encrypted: boolean }> {\r\n  let data: string | Buffer;\r\n\r\n  switch (format) {\r\n    case 'JSON':\r\n      data = JSON.stringify(logs, null, 2);\r\n      break;\r\n    case 'CSV':\r\n      data = convertToCSV(logs);\r\n      break;\r\n    case 'PDF':\r\n      // In production, use a PDF library like pdfkit or puppeteer\r\n      data = `PDF export not implemented in this example`;\r\n      break;\r\n    case 'XLSX':\r\n      // In production, use a library like xlsx or exceljs\r\n      // For now, export as CSV with .xlsx extension\r\n      data = convertToCSV(logs);\r\n      break;\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n\r\n  if (encrypt && password) {\r\n    data = encryptData(data, password);\r\n    return { data, encrypted: true };\r\n  }\r\n\r\n  return { data, encrypted: false };\r\n}\r\n\r\n/**\r\n * Convert audit logs to CSV format\r\n */\r\nfunction convertToCSV(logs: AuditLog[]): string {\r\n  const headers = [\r\n    'Timestamp',\r\n    'Action',\r\n    'Severity',\r\n    'User',\r\n    'Role',\r\n    'Resource Type',\r\n    'Resource ID',\r\n    'IP Address',\r\n    'Status',\r\n    'PHI Accessed',\r\n    'Verification Hash',\r\n  ];\r\n\r\n  const rows = logs.map((log) => [\r\n    log.timestamp,\r\n    log.action,\r\n    log.severity,\r\n    log.userName,\r\n    log.userRole,\r\n    log.resourceType || '',\r\n    log.resourceId || '',\r\n    log.ipAddress,\r\n    log.status,\r\n    log.phiAccessed ? 'Yes' : 'No',\r\n    log.verificationHash.substring(0, 16) + '...',\r\n  ]);\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...rows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')),\r\n  ].join('\\n');\r\n\r\n  return csvContent;\r\n}\r\n\r\n/**\r\n * Encrypt data using AES-256-GCM\r\n */\r\nfunction encryptData(data: string | Buffer, password: string): Buffer {\r\n  const algorithm = 'aes-256-gcm';\r\n  const key = crypto.scryptSync(password, 'salt', 32);\r\n  const iv = crypto.randomBytes(16);\r\n  const cipher = crypto.createCipheriv(algorithm, key, iv);\r\n\r\n  let encrypted = cipher.update(\r\n    typeof data === 'string' ? data : data.toString(),\r\n    'utf8',\r\n    'hex'\r\n  );\r\n  encrypted += cipher.final('hex');\r\n\r\n  const authTag = cipher.getAuthTag();\r\n\r\n  // Combine IV, encrypted data, and auth tag\r\n  return Buffer.concat([\r\n    iv,\r\n    Buffer.from(encrypted, 'hex'),\r\n    authTag,\r\n  ]);\r\n}\r\n\r\n/**\r\n * Audit log retention checker\r\n */\r\nexport function shouldRetainLog(log: AuditLog, retentionYears = 6): boolean {\r\n  const logDate = new Date(log.timestamp);\r\n  const now = new Date();\r\n  const yearsDiff = (now.getTime() - logDate.getTime()) / (1000 * 60 * 60 * 24 * 365);\r\n\r\n  // HIPAA requires 6 years minimum retention\r\n  if (yearsDiff < retentionYears) {\r\n    return true;\r\n  }\r\n\r\n  // Extended retention for critical events\r\n  if (log.severity === 'CRITICAL' || log.severity === 'SECURITY') {\r\n    return yearsDiff < retentionYears + 1; // Extra year for critical logs\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Batch audit log creation for high-volume operations\r\n */\r\nexport function createBatchAuditLogs(\r\n  context: AuditLogContext,\r\n  entries: AuditLogEntry[],\r\n  previousHash?: string\r\n): Omit<AuditLog, 'id'>[] {\r\n  const logs: Omit<AuditLog, 'id'>[] = [];\r\n  let currentHash = previousHash;\r\n\r\n  for (const entry of entries) {\r\n    const log = createAuditLogEntry(context, entry, currentHash);\r\n    logs.push(log);\r\n    currentHash = log.verificationHash;\r\n  }\r\n\r\n  return logs;\r\n}\r\n\r\n/**\r\n * Validate audit log completeness\r\n */\r\nexport function validateAuditLog(log: Partial<AuditLog>): {\r\n  valid: boolean;\r\n  errors: string[];\r\n} {\r\n  const errors: string[] = [];\r\n\r\n  if (!log.timestamp) errors.push('Missing timestamp');\r\n  if (!log.action) errors.push('Missing action');\r\n  if (!log.userId) errors.push('Missing userId');\r\n  if (!log.userName) errors.push('Missing userName');\r\n  if (!log.ipAddress) errors.push('Missing ipAddress');\r\n  if (!log.verificationHash) errors.push('Missing verificationHash');\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2075, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.audit.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Audit Actions - Next.js v16 App Router\r\n *\r\n * Server actions for audit log management including creation,\r\n * retrieval, export, and integrity verification.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache';\r\nimport type {\r\n  AuditLog,\r\n  AuditLogFilter,\r\n  AuditLogExport,\r\n} from '@/schemas/compliance/compliance.schemas';\r\nimport { createAuditLogEntry, exportAuditLogs, verifyAuditChain } from '@/lib/compliance/audit';\r\n\r\nimport type {\r\n  ActionResult,\r\n  AuditLogContext,\r\n  CreateAuditLogInput,\r\n  PaginatedResult\r\n} from './compliance.types';\r\nimport {\r\n  BACKEND_URL,\r\n  getAuthToken,\r\n  getLatestAuditLog,\r\n  logHIPAAAuditEntry,\r\n  logToSecondaryStore,\r\n  detectAndLogViolations,\r\n  getCurrentUserId,\r\n} from './compliance.cache';\r\n\r\n// ============================================================================\r\n// Audit Log Actions\r\n// ============================================================================\r\n\r\n/**\r\n * Create Audit Log Entry\r\n * Cache: 1 minute for created audit logs\r\n */\r\nexport async function createAuditLogAction(\r\n  context: AuditLogContext,\r\n  input: CreateAuditLogInput\r\n): Promise<ActionResult<AuditLog>> {\r\n  try {\r\n    // Log HIPAA compliance audit entry\r\n    await logHIPAAAuditEntry({\r\n      userId: context.userId,\r\n      action: 'AUDIT_LOG_CREATE',\r\n      resourceType: input.resourceType || 'SYSTEM',\r\n      resourceId: input.resourceId || crypto.randomUUID(),\r\n      details: {\r\n        action: input.action,\r\n        severity: input.severity,\r\n        phiAccessed: input.phiAccessed || false,\r\n        complianceFlags: input.complianceFlags || []\r\n      },\r\n      ipAddress: context.ipAddress,\r\n      userAgent: context.userAgent\r\n    });\r\n\r\n    // Get the most recent audit log to chain hashes\r\n    const previousLog = await getLatestAuditLog();\r\n    const previousHash = previousLog?.verificationHash;\r\n\r\n    // Create audit log entry with automatic hash generation\r\n    const auditLogEntry = createAuditLogEntry(context, input, previousHash);\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/audit-logs`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID(),\r\n        'X-Source': 'compliance-actions'\r\n      },\r\n      body: JSON.stringify(auditLogEntry),\r\n      next: {\r\n        revalidate: 60,\r\n        tags: ['audit-logs']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const createdLog = await response.json() as AuditLog;\r\n\r\n    // Revalidate caches\r\n    revalidateTag('audit-logs', 'compliance');\r\n    revalidateTag('compliance-metrics', 'compliance');\r\n    revalidatePath('/compliance/audits');\r\n\r\n    // Fire-and-forget secondary logging (never fails the operation)\r\n    await logToSecondaryStore(auditLogEntry).catch(() => {});\r\n\r\n    // Check for compliance violations\r\n    await detectAndLogViolations(auditLogEntry).catch(() => {});\r\n\r\n    return {\r\n      success: true,\r\n      data: createdLog,\r\n      message: 'Audit log created successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Create audit log error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to create audit log',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Audit Logs with hash chain verification\r\n * Cache: 2 minutes for audit log queries\r\n */\r\nexport async function getAuditLogsAction(\r\n  filters: Partial<AuditLogFilter>\r\n): Promise<ActionResult<PaginatedResult<AuditLog> & { chainStatus: { valid: boolean; firstInvalidIndex?: number } }>> {\r\n  try {\r\n    // Build query parameters\r\n    const params = new URLSearchParams();\r\n    Object.entries(filters).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        params.append(key, String(value));\r\n      }\r\n    });\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/audit-logs?${params}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID(),\r\n        'X-Cache-Control': 'max-age=120'\r\n      },\r\n      next: {\r\n        revalidate: 120,\r\n        tags: ['audit-logs']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const result = await response.json();\r\n\r\n            // Verify audit chain integrity\r\n    const chainResult = verifyAuditChain(result.data);\r\n    const chainStatus = typeof chainResult === 'object' ? chainResult : { valid: chainResult, firstInvalidIndex: undefined };\r\n\r\n    // Log PHI access if accessing audit logs containing PHI\r\n    const containsPHI = result.data.some((log: AuditLog) => log.phiAccessed);\r\n    if (containsPHI) {\r\n      await logHIPAAAuditEntry({\r\n        userId: await getCurrentUserId(),\r\n        action: 'PHI_ACCESS',\r\n        resourceType: 'AUDIT_LOG',\r\n        details: {\r\n          action: 'view_audit_logs_with_phi',\r\n          logCount: result.data.length,\r\n          containsPHI: true\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        ...result,\r\n        chainStatus,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Get audit logs error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve audit logs',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Export Audit Logs with encryption\r\n * Cache: No cache for exports (always fresh)\r\n */\r\nexport async function exportAuditLogsAction(\r\n  exportConfig: AuditLogExport\r\n): Promise<ActionResult<{ data: string | Buffer; encrypted: boolean; filename: string }>> {\r\n  try {\r\n    // Log PHI export attempt\r\n    await logHIPAAAuditEntry({\r\n      userId: await getCurrentUserId(),\r\n      action: 'PHI_EXPORT',\r\n      resourceType: 'AUDIT_LOG',\r\n      details: {\r\n        format: exportConfig.format,\r\n        encrypted: exportConfig.encryptOutput || false,\r\n        filters: exportConfig.filters\r\n      }\r\n    });\r\n\r\n    // Get filtered audit logs\r\n    const logsResult = await getAuditLogsAction(exportConfig.filters);\r\n    if (!logsResult.success || !logsResult.data) {\r\n      throw new Error('Failed to retrieve logs for export');\r\n    }\r\n\r\n    // Export with encryption\r\n    const exportData = await exportAuditLogs(\r\n      logsResult.data.data,\r\n      exportConfig.format,\r\n      exportConfig.encryptOutput,\r\n      exportConfig.password\r\n    );\r\n\r\n    const timestamp = new Date().toISOString().split('T')[0];\r\n    const filename = `audit-logs-${timestamp}.${exportConfig.format.toLowerCase()}${exportData.encrypted ? '.enc' : ''}`;\r\n\r\n    // Revalidate export tracking\r\n    revalidateTag('audit-exports', 'compliance');\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        ...exportData,\r\n        filename,\r\n      },\r\n      message: 'Audit logs exported successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Export audit logs error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to export audit logs',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Verify Audit Chain Integrity\r\n * Cache: 5 minutes for integrity verification\r\n */\r\nexport async function verifyAuditIntegrityAction(\r\n  startDate?: string,\r\n  endDate?: string\r\n): Promise<ActionResult<{ valid: boolean; totalLogs: number; verifiedLogs: number; firstInvalidIndex?: number }>> {\r\n  try {\r\n    const logsResult = await getAuditLogsAction({\r\n      startDate,\r\n      endDate,\r\n      sortBy: 'timestamp',\r\n      sortOrder: 'asc',\r\n    });\r\n\r\n    if (!logsResult.success || !logsResult.data) {\r\n      throw new Error('Failed to retrieve logs for verification');\r\n    }\r\n\r\n    const { valid, firstInvalidIndex } = verifyAuditChain(logsResult.data.data);\r\n\r\n    // Log verification action\r\n    await logHIPAAAuditEntry({\r\n      userId: await getCurrentUserId(),\r\n      action: valid ? 'SECURITY_VERIFICATION' : 'SECURITY_ALERT',\r\n      resourceType: 'SYSTEM',\r\n      details: {\r\n        verificationResult: valid,\r\n        logsVerified: logsResult.data.data.length,\r\n        firstInvalidIndex,\r\n        integrityStatus: valid ? 'INTACT' : 'COMPROMISED'\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        valid,\r\n        totalLogs: logsResult.data.pagination.total,\r\n        verifiedLogs: logsResult.data.data.length,\r\n        firstInvalidIndex,\r\n      },\r\n      message: valid ? 'Audit chain verified successfully' : 'Audit chain integrity compromised',\r\n    };\r\n  } catch (error) {\r\n    console.error('Verify audit integrity error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to verify audit chain integrity',\r\n    };\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2322, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.policy.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Policy Actions - Next.js v16 App Router\r\n *\r\n * Server actions for policy management including creation,\r\n * acknowledgment, and retrieval.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache';\r\nimport type {\r\n  PolicyDocument,\r\n  PolicyAcknowledgment,\r\n} from '@/schemas/compliance/compliance.schemas';\r\n\r\nimport type {\r\n  ActionResult,\r\n  PaginatedResult,\r\n  UIPolicy\r\n} from './compliance.types';\r\nimport {\r\n  BACKEND_URL,\r\n  getAuthToken,\r\n  logHIPAAAuditEntry,\r\n  getCurrentUserContext,\r\n} from './compliance.cache';\r\n\r\n// ============================================================================\r\n// Policy Management Actions\r\n// ============================================================================\r\n\r\n/**\r\n * Create Policy Document\r\n * Cache: 5 minutes for created policies\r\n */\r\nexport async function createPolicyAction(\r\n  policyData: Omit<PolicyDocument, 'id' | 'createdAt' | 'updatedAt'>\r\n): Promise<ActionResult<PolicyDocument>> {\r\n  try {\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/policies`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      body: JSON.stringify(policyData),\r\n      next: {\r\n        revalidate: 300,\r\n        tags: ['policies']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const createdPolicy = await response.json() as PolicyDocument;\r\n\r\n    // Revalidate policy caches\r\n    revalidateTag('policies', 'compliance');\r\n    revalidatePath('/compliance/policies');\r\n\r\n    // Log policy creation\r\n    await logHIPAAAuditEntry({\r\n      userId: await getCurrentUserContext().then(ctx => ctx.userId),\r\n      action: 'RECORD_CREATE',\r\n      resourceType: 'POLICY',\r\n      resourceId: createdPolicy.id,\r\n      details: {\r\n        policyTitle: createdPolicy.title,\r\n        policyType: createdPolicy.policyType,\r\n        version: createdPolicy.version\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: createdPolicy,\r\n      message: 'Policy created successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Create policy error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to create policy',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Acknowledge Policy\r\n * Cache: 10 minutes for acknowledgments\r\n */\r\nexport async function acknowledgePolicyAction(\r\n  policyId: string,\r\n  userId: string\r\n): Promise<ActionResult<PolicyAcknowledgment>> {\r\n  try {\r\n    const context = await getCurrentUserContext();\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/policies/${policyId}/acknowledge`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      body: JSON.stringify({\r\n        userId,\r\n        acknowledgedAt: new Date().toISOString(),\r\n        ipAddress: context.ipAddress,\r\n      }),\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['policies', `policy-${policyId}`]\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const acknowledgment = await response.json() as PolicyAcknowledgment;\r\n\r\n    // Revalidate related caches\r\n    revalidateTag('policies', 'compliance');\r\n    revalidateTag(`policy-${policyId}`, 'compliance');\r\n    revalidatePath('/compliance/policies');\r\n\r\n    // Log policy acknowledgment\r\n    await logHIPAAAuditEntry({\r\n      userId: context.userId,\r\n      action: 'POLICY_ACKNOWLEDGMENT',\r\n      resourceType: 'POLICY',\r\n      resourceId: policyId,\r\n      details: { acknowledgedUserId: userId }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: acknowledgment,\r\n      message: 'Policy acknowledged successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Acknowledge policy error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to acknowledge policy',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Policy Acknowledgments\r\n * Cache: 5 minutes for acknowledgment lists\r\n */\r\nexport async function getPolicyAcknowledgmentsAction(\r\n  policyId: string\r\n): Promise<ActionResult<PolicyAcknowledgment[]>> {\r\n  try {\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/policies/${policyId}/acknowledgments`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 300,\r\n        tags: ['policies', `policy-${policyId}`]\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const acknowledgments = await response.json() as PolicyAcknowledgment[];\r\n\r\n    return {\r\n      success: true,\r\n      data: acknowledgments,\r\n    };\r\n  } catch (error) {\r\n    console.error('Get policy acknowledgments error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve policy acknowledgments',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Policies with filtering and pagination\r\n * Cache: 5 minutes for policy lists\r\n */\r\nexport async function getPoliciesAction(\r\n  filters?: {\r\n    category?: string;\r\n    status?: string;\r\n    search?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n  }\r\n): Promise<ActionResult<PaginatedResult<UIPolicy> & { stats: { active: number; total: number; acknowledgmentRate: number; acknowledged: number; required: number; pending: number; reviewDue: number } }>> {\r\n\r\n  try {\r\n    // Build query parameters\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null) {\r\n          params.append(key, String(value));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/policies?${params}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID(),\r\n        'X-Cache-Control': 'max-age=300'\r\n      },\r\n      next: {\r\n        revalidate: 300,\r\n        tags: ['policies']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const result = await response.json() as PaginatedResult<PolicyDocument>;\r\n\r\n    // Transform policies to match UI expectations\r\n    const transformedPolicies: UIPolicy[] = result.data.map((policy: PolicyDocument) => ({\r\n      id: policy.id,\r\n      title: policy.title,\r\n      category: policy.policyType.replace('_', ' ').toLowerCase().replace(/\\b\\w/g, (l: string) => l.toUpperCase()),\r\n      status: policy.status,\r\n      version: policy.version,\r\n      effectiveDate: policy.effectiveDate,\r\n      reviewDate: policy.reviewDate,\r\n      acknowledgments: {\r\n        completed: 0, // TODO: Calculate from acknowledgments API\r\n        pending: 0,   // TODO: Calculate from acknowledgments API\r\n        total: 0,     // TODO: Calculate from applicable users\r\n      },\r\n    }));\r\n\r\n    // Get policy statistics\r\n    const statsResponse = await fetch(`${BACKEND_URL}/compliance/policies/stats`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 300,\r\n        tags: ['policies', 'compliance-stats']\r\n      }\r\n    });\r\n\r\n    let stats = {\r\n      active: 0,\r\n      total: 0,\r\n      acknowledgmentRate: 0,\r\n      acknowledged: 0,\r\n      required: 0,\r\n      pending: 0,\r\n      reviewDue: 0,\r\n    };\r\n\r\n    if (statsResponse.ok) {\r\n      stats = await statsResponse.json();\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        data: transformedPolicies,\r\n        pagination: result.pagination,\r\n        stats,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Get policies error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve policies',\r\n    };\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2582, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.reports.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Reports Actions - Next.js v16 App Router\r\n *\r\n * Server actions for compliance reporting and metrics.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache';\r\nimport type {\r\n  HIPAAReport,\r\n  ComplianceMetrics,\r\n  ComplianceAlert,\r\n  ComplianceViolation,\r\n} from '@/schemas/compliance/compliance.schemas';\r\n\r\nimport type {\r\n  ActionResult,\r\n  PaginatedResult,\r\n  UIComplianceReport,\r\n  UIReportTemplate\r\n} from './compliance.types';\r\nimport {\r\n  BACKEND_URL,\r\n  getAuthToken,\r\n  logHIPAAAuditEntry,\r\n  getCurrentUserContext,\r\n} from './compliance.cache';\r\n\r\n// ============================================================================\r\n// Compliance Reporting Actions\r\n// ============================================================================\r\n\r\n/**\r\n * Generate Compliance Report\r\n * Cache: 15 minutes for generated reports\r\n */\r\nexport async function generateComplianceReportAction(\r\n  reportType: string,\r\n  period: { start: string; end: string }\r\n): Promise<ActionResult<HIPAAReport>> {\r\n  try {\r\n    // Get compliance metrics for the period\r\n    const metricsResult = await getComplianceMetricsAction(period);\r\n    if (!metricsResult.success || !metricsResult.data) {\r\n      throw new Error('Failed to retrieve compliance metrics');\r\n    }\r\n\r\n    const context = await getCurrentUserContext();\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/reports/generate`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      body: JSON.stringify({\r\n        reportType,\r\n        period,\r\n        generatedBy: context.userId,\r\n        metrics: metricsResult.data,\r\n      }),\r\n      next: {\r\n        revalidate: 900,\r\n        tags: ['compliance-reports']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const report = await response.json() as HIPAAReport;\r\n\r\n    // Revalidate report caches\r\n    revalidateTag('compliance-reports', 'compliance');\r\n    revalidatePath('/compliance/reports');\r\n\r\n    // Log report generation\r\n    await logHIPAAAuditEntry({\r\n      userId: context.userId,\r\n      action: 'RECORD_CREATE',\r\n      resourceType: 'SYSTEM',\r\n      details: {\r\n        reportType,\r\n        period,\r\n        reportId: report.id\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: report,\r\n      message: 'Compliance report generated successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Generate compliance report error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to generate compliance report',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Compliance Metrics\r\n * Cache: 10 minutes for metrics\r\n */\r\nexport async function getComplianceMetricsAction(\r\n  period?: { start: string; end: string }\r\n): Promise<ActionResult<ComplianceMetrics>> {\r\n  try {\r\n    const params = period ? new URLSearchParams({\r\n      start: period.start,\r\n      end: period.end\r\n    }) : '';\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/metrics${params ? `?${params}` : ''}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['compliance-metrics']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const metrics = await response.json() as ComplianceMetrics;\r\n\r\n    return {\r\n      success: true,\r\n      data: metrics,\r\n    };\r\n  } catch (error) {\r\n    console.error('Get compliance metrics error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve compliance metrics',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Compliance Alerts\r\n * Cache: 2 minutes for alerts (need fresh data)\r\n */\r\nexport async function getComplianceAlertsAction(\r\n  filters?: { severity?: string; status?: string }\r\n): Promise<ActionResult<ComplianceAlert[]>> {\r\n  try {\r\n    const params = filters ? new URLSearchParams(\r\n      Object.entries(filters).filter(([, value]) => value !== undefined)\r\n    ) : '';\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/alerts${params ? `?${params}` : ''}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 120,\r\n        tags: ['compliance-alerts']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const alerts = await response.json() as ComplianceAlert[];\r\n\r\n    return {\r\n      success: true,\r\n      data: alerts,\r\n    };\r\n  } catch (error) {\r\n    console.error('Get compliance alerts error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve compliance alerts',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Resolve Compliance Violation\r\n * No cache for violation resolution (always fresh)\r\n */\r\nexport async function resolveComplianceViolationAction(\r\n  violationId: string,\r\n  resolution: {\r\n    resolutionNotes: string;\r\n    remediationSteps: string[];\r\n  }\r\n): Promise<ActionResult<ComplianceViolation>> {\r\n  try {\r\n    const context = await getCurrentUserContext();\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/violations/${violationId}/resolve`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      body: JSON.stringify({\r\n        ...resolution,\r\n        resolvedBy: context.userId,\r\n        resolvedAt: new Date().toISOString(),\r\n      }),\r\n      next: {\r\n        tags: ['compliance-alerts', 'compliance-violations']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const resolvedViolation = await response.json() as ComplianceViolation;\r\n\r\n    // Revalidate related caches\r\n    revalidateTag('compliance-alerts', 'compliance');\r\n    revalidateTag('compliance-violations', 'compliance');\r\n    revalidatePath('/compliance');\r\n\r\n    // Log violation resolution\r\n    await logHIPAAAuditEntry({\r\n      userId: context.userId,\r\n      action: 'RECORD_UPDATE',\r\n      resourceType: 'SYSTEM',\r\n      resourceId: violationId,\r\n      details: {\r\n        action: 'resolve_violation',\r\n        resolutionNotes: resolution.resolutionNotes\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: resolvedViolation,\r\n      message: 'Compliance violation resolved successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Resolve compliance violation error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to resolve compliance violation',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Compliance Reports and Templates\r\n * Cache: 10 minutes for reports list\r\n */\r\nexport async function getComplianceReportsAction(\r\n  filters?: {\r\n    type?: string;\r\n    status?: string;\r\n    search?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n  }\r\n): Promise<ActionResult<{\r\n  reports: PaginatedResult<UIComplianceReport>;\r\n  templates: UIReportTemplate[];\r\n}>> {\r\n  try {\r\n    // Build query parameters\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null) {\r\n          params.append(key, String(value));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Fetch reports\r\n    const reportsResponse = await fetch(`${BACKEND_URL}/compliance/reports?${params}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID(),\r\n        'X-Cache-Control': 'max-age=600'\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['compliance-reports']\r\n      }\r\n    });\r\n\r\n    let reports: PaginatedResult<UIComplianceReport> = { data: [], pagination: { page: 1, limit: 10, total: 0, totalPages: 0 } };\r\n    if (reportsResponse.ok) {\r\n      reports = await reportsResponse.json();\r\n    }\r\n\r\n    // Fetch report templates\r\n    const templatesResponse = await fetch(`${BACKEND_URL}/compliance/reports/templates`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 3600, // 1 hour for templates\r\n        tags: ['compliance-report-templates']\r\n      }\r\n    });\r\n\r\n    let templates: UIReportTemplate[] = [];\r\n    if (templatesResponse.ok) {\r\n      templates = await templatesResponse.json();\r\n    } else {\r\n      // Fallback to default templates if API not available\r\n      templates = [\r\n        {\r\n          id: 'hipaa-security',\r\n          name: 'HIPAA Security Assessment',\r\n          description: 'Comprehensive security risk assessment report',\r\n          category: 'HIPAA',\r\n          requiredParams: ['period']\r\n        },\r\n        {\r\n          id: 'audit-trail',\r\n          name: 'Audit Trail Report',\r\n          description: 'Detailed audit log analysis and compliance verification',\r\n          category: 'AUDIT',\r\n          requiredParams: ['period']\r\n        },\r\n        {\r\n          id: 'training-compliance',\r\n          name: 'Training Compliance',\r\n          description: 'Staff training completion and certification status',\r\n          category: 'TRAINING',\r\n          requiredParams: ['period']\r\n        },\r\n        {\r\n          id: 'data-breach',\r\n          name: 'Data Breach Analysis',\r\n          description: 'Breach notification and incident response report',\r\n          category: 'INCIDENT',\r\n          requiredParams: ['period']\r\n        }\r\n      ];\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        reports,\r\n        templates,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Get compliance reports error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve compliance reports',\r\n    };\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2913, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.training.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Training Actions - Next.js v16 App Router\r\n *\r\n * Server actions for training compliance management.\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache';\r\n\r\nimport type { ActionResult } from './compliance.types';\r\nimport {\r\n  BACKEND_URL,\r\n  getAuthToken,\r\n  logHIPAAAuditEntry,\r\n  getCurrentUserContext,\r\n} from './compliance.cache';\r\n\r\n// ============================================================================\r\n// Training Compliance Actions\r\n// ============================================================================\r\n\r\n/**\r\n * Record Training Completion\r\n * Cache: 30 minutes for training records\r\n */\r\nexport async function recordTrainingCompletionAction(\r\n  userId: string,\r\n  courseId: string,\r\n  completedAt: string\r\n): Promise<ActionResult<Record<string, unknown>>> {\r\n  try {\r\n    const context = await getCurrentUserContext();\r\n\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/training/complete`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      body: JSON.stringify({\r\n        userId,\r\n        courseId,\r\n        completedAt,\r\n        verifiedBy: context.userId,\r\n      }),\r\n      next: {\r\n        revalidate: 1800,\r\n        tags: ['training', `user-training-${userId}`]\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const trainingRecord = await response.json();\r\n\r\n    // Revalidate training caches\r\n    revalidateTag('training', 'compliance');\r\n    revalidateTag(`user-training-${userId}`, 'compliance');\r\n    revalidatePath('/compliance/training');\r\n\r\n    // Log training completion\r\n    await logHIPAAAuditEntry({\r\n      userId: context.userId,\r\n      action: 'RECORD_CREATE',\r\n      resourceType: 'SYSTEM',\r\n      details: {\r\n        action: 'training_completion',\r\n        userId,\r\n        courseId,\r\n        completedAt\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: trainingRecord,\r\n      message: 'Training completion recorded successfully',\r\n    };\r\n  } catch (error) {\r\n    console.error('Record training completion error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to record training completion',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get User Training Status\r\n * Cache: 15 minutes for training status\r\n */\r\nexport async function getUserTrainingStatusAction(\r\n  userId: string\r\n): Promise<ActionResult<Record<string, unknown>>> {\r\n  try {\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/training/user/${userId}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 900,\r\n        tags: ['training', `user-training-${userId}`]\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const trainingStatus = await response.json();\r\n\r\n    return {\r\n      success: true,\r\n      data: trainingStatus,\r\n    };\r\n  } catch (error) {\r\n    console.error('Get user training status error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve user training status',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Overdue Training\r\n * Cache: 10 minutes for overdue training\r\n */\r\nexport async function getOverdueTrainingAction(): Promise<ActionResult<Record<string, unknown>[]>> {\r\n  try {\r\n    // Enhanced fetch with Next.js v16 capabilities\r\n    const response = await fetch(`${BACKEND_URL}/compliance/training/overdue`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['training', 'overdue-training']\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const overdueTraining = await response.json() as Record<string, unknown>[];\r\n\r\n    return {\r\n      success: true,\r\n      data: overdueTraining,\r\n    };\r\n  } catch (error) {\r\n    console.error('Get overdue training error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve overdue training',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get Training Records and Compliance Data\r\n * Cache: 10 minutes for training data\r\n */\r\nexport async function getTrainingRecordsAction(\r\n  filters?: {\r\n    userId?: string;\r\n    courseId?: string;\r\n    status?: string;\r\n    priority?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n  }\r\n): Promise<ActionResult<{\r\n  stats: {\r\n    total: number;\r\n    completed: number;\r\n    inProgress: number;\r\n    overdue: number;\r\n    completionRate: number;\r\n    certifications: number;\r\n    expiringSoon: number;\r\n  };\r\n  courses: Array<{\r\n    id: string;\r\n    title: string;\r\n    description: string;\r\n    priority: string;\r\n    stats: { completed: number; inProgress: number; overdue: number };\r\n  }>;\r\n  users: Array<{\r\n    id: string;\r\n    name: string;\r\n    role: string;\r\n    training: {\r\n      required: number;\r\n      completed: number;\r\n      overdue: number;\r\n      status: string;\r\n    };\r\n  }>;\r\n}>> {\r\n  try {\r\n    // Build query parameters\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null) {\r\n          params.append(key, String(value));\r\n        }\r\n      });\r\n    }\r\n\r\n    // Fetch training stats\r\n    const statsResponse = await fetch(`${BACKEND_URL}/compliance/training/stats`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['training', 'training-stats']\r\n      }\r\n    });\r\n\r\n    let stats = {\r\n      total: 0,\r\n      completed: 0,\r\n      inProgress: 0,\r\n      overdue: 0,\r\n      completionRate: 0,\r\n      certifications: 0,\r\n      expiringSoon: 0,\r\n    };\r\n\r\n    if (statsResponse.ok) {\r\n      stats = await statsResponse.json();\r\n    }\r\n\r\n    // Fetch training courses\r\n    const coursesResponse = await fetch(`${BACKEND_URL}/compliance/training/courses?${params}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['training', 'training-courses']\r\n      }\r\n    });\r\n\r\n    let courses: Array<{\r\n      id: string;\r\n      title: string;\r\n      description: string;\r\n      priority: string;\r\n      stats: { completed: number; inProgress: number; overdue: number };\r\n    }> = [];\r\n\r\n    if (coursesResponse.ok) {\r\n      courses = await coursesResponse.json();\r\n    }\r\n\r\n    // Fetch user training status\r\n    const usersResponse = await fetch(`${BACKEND_URL}/compliance/training/users?${params}`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${await getAuthToken()}`,\r\n        'X-Request-ID': crypto.randomUUID()\r\n      },\r\n      next: {\r\n        revalidate: 600,\r\n        tags: ['training', 'user-training']\r\n      }\r\n    });\r\n\r\n    let users: Array<{\r\n      id: string;\r\n      name: string;\r\n      role: string;\r\n      training: {\r\n        required: number;\r\n        completed: number;\r\n        overdue: number;\r\n        status: string;\r\n      };\r\n    }> = [];\r\n\r\n    if (usersResponse.ok) {\r\n      users = await usersResponse.json();\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      data: {\r\n        stats,\r\n        courses,\r\n        users,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Get training records error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Failed to retrieve training records',\r\n    };\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3160, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/compliance.actions.ts"],"sourcesContent":["/**\r\n * @fileoverview Compliance Server Actions - Next.js v16 App Router\r\n *\r\n * HIPAA-compliant server actions for compliance management including:\r\n * - Audit log creation with cryptographic hash chain\r\n * - Policy management and acknowledgment tracking\r\n * - Compliance report generation\r\n * - Training compliance tracking\r\n * - Real-time compliance monitoring\r\n *\r\n * All actions follow the ActionResult<T> pattern for consistent error handling\r\n * and implement fire-and-forget audit logging that never blocks operations.\r\n */\r\n\r\n// Re-export all compliance actions from split files\r\nexport * from './compliance.types';\r\nexport * from './compliance.cache';\r\nexport * from './compliance.audit';\r\nexport * from './compliance.policy';\r\nexport * from './compliance.reports';\r\nexport * from './compliance.training';\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;CAYC,GAED,oDAAoD;;AACpD;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 3190, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/compliance/training/page.tsx"],"sourcesContent":["/**\r\n * @fileoverview Training Compliance Management Page\r\n *\r\n * Comprehensive staff training tracking system for HIPAA-required training,\r\n * certifications, and continuing education. Ensures all healthcare staff maintain\r\n * required competencies and certifications as mandated by regulatory requirements.\r\n *\r\n * @module compliance/training\r\n *\r\n * @description\r\n * This page manages the complete training compliance lifecycle:\r\n * - Required HIPAA training tracking (annual requirement)\r\n * - Medication administration certification management\r\n * - Emergency response training compliance\r\n * - Continuing education credit tracking\r\n * - Training deadline monitoring and notifications\r\n * - Certification expiration tracking\r\n * - Training assignment and scheduling\r\n *\r\n * @see {@link https://www.hhs.gov/hipaa/for-professionals/security/laws-regulations/index.html | HIPAA Security Rule}\r\n *\r\n * @remarks\r\n * **HIPAA Training Requirements:**\r\n * - All staff must receive HIPAA training upon hire (Â§ 164.530(b)(1))\r\n * - Annual HIPAA refresher training required\r\n * - Training documentation must be retained for 6 years\r\n * - Training must be appropriate to staff role and responsibilities\r\n * - Periodic security reminders required (Â§ 164.308(a)(5)(ii)(A))\r\n *\r\n * **Training Categories:**\r\n * - MANDATORY: Required for all staff (HIPAA, Emergency Response)\r\n * - REQUIRED: Required for specific roles (Medication Administration for nurses)\r\n * - RECOMMENDED: Optional but encouraged (Advanced First Aid)\r\n * - CONTINUING_EDUCATION: Professional development credits\r\n *\r\n * **Compliance Status:**\r\n * - COMPLIANT: All required training current\r\n * - IN_PROGRESS: Training partially complete\r\n * - OVERDUE: Training past deadline, immediate action required\r\n * - EXPIRED: Certification expired, re-training needed\r\n *\r\n * @since 1.0.0\r\n */\r\n\r\nimport { Metadata } from 'next';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Users, CheckCircle, AlertTriangle, Clock, Award } from 'lucide-react';\r\nimport { getTrainingRecordsAction } from '@/lib/actions/compliance.actions';\r\n\r\n/**\r\n * Page metadata for SEO and browser display\r\n */\r\nexport const metadata: Metadata = {\r\n  title: 'Training Compliance | White Cross',\r\n  description: 'Track staff training completion, certifications, and deadlines',\r\n};\r\n\r\n/**\r\n * Force dynamic rendering for this route\r\n * Required for real-time training status and user-specific assignments\r\n */\r\n\r\n\r\n/**\r\n * Training Compliance Page Component\r\n *\r\n * React Server Component for managing staff training compliance, tracking\r\n * certification status, and monitoring training deadlines. Provides comprehensive\r\n * view of organizational training compliance status.\r\n *\r\n * @async\r\n * @returns {Promise<JSX.Element>} Rendered training compliance page\r\n *\r\n * @description\r\n * **Key Features:**\r\n * - Organization-wide training completion rate dashboard\r\n * - Individual staff training status tracking\r\n * - Course-level completion statistics\r\n * - Overdue training alerts and notifications\r\n * - Certification expiration monitoring\r\n * - Training assignment management\r\n * - Progress tracking for in-progress courses\r\n *\r\n * **Statistics Displayed:**\r\n * - Overall completion rate percentage\r\n * - Count of overdue training assignments\r\n * - Number of in-progress courses\r\n * - Active certifications count\r\n * - Certifications expiring soon\r\n *\r\n * **Training Courses Tracked:**\r\n * 1. HIPAA Privacy and Security Training (Annual, Mandatory)\r\n * 2. Medication Administration Certification (Role-specific, Mandatory)\r\n * 3. Emergency Response Procedures (Annual, Required)\r\n * 4. Bloodborne Pathogens Training (Annual, Mandatory)\r\n * 5. First Aid/CPR Certification (Biennial, Recommended)\r\n *\r\n * **User Training Status:**\r\n * - Completed training count vs required\r\n * - Overdue training list\r\n * - In-progress course progress\r\n * - Certification expiration dates\r\n * - Next deadline dates\r\n *\r\n * @example\r\n * ```tsx\r\n * // Rendered at route: /compliance/training\r\n * <TrainingCompliancePage />\r\n * ```\r\n *\r\n * @remarks\r\n * This is a Next.js 16 Server Component with dynamic rendering.\r\n * Training data aggregated from Learning Management System (LMS).\r\n * Automated notifications sent for upcoming deadlines and overdue training.\r\n *\r\n * @see {@link getTrainingData} for server-side data fetching\r\n */\r\nexport default async function TrainingCompliancePage() {\r\n  // Fetch training data using server action\r\n  const trainingResult = await getTrainingRecordsAction();\r\n  if (!trainingResult.success || !trainingResult.data) {\r\n    throw new Error(trainingResult.error || 'Failed to load training data');\r\n  }\r\n  const { stats, users, courses } = trainingResult.data;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Training Compliance</h1>\r\n          <p className=\"text-muted-foreground mt-1\">\r\n            Track staff training completion, certifications, and deadlines\r\n          </p>\r\n        </div>\r\n        <Button>\r\n          Assign Training\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid gap-4 md:grid-cols-4\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Completion Rate</CardTitle>\r\n            <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.completionRate}%</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {stats.completed} / {stats.total} courses\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Overdue Training</CardTitle>\r\n            <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.overdue}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Requires immediate attention\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">In Progress</CardTitle>\r\n            <Clock className=\"h-4 w-4 text-amber-600\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.inProgress}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Currently being completed\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Active Certifications</CardTitle>\r\n            <Award className=\"h-4 w-4 text-blue-600\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.certifications}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {stats.expiringSoon} expiring soon\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Training Courses */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Required Training Courses</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-3\">\r\n            {courses.map((course) => (\r\n              <div\r\n                key={course.id}\r\n                className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors\"\r\n              >\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <h4 className=\"font-semibold\">{course.title}</h4>\r\n                    <Badge variant={getCourseVariant(course.priority)}>\r\n                      {course.priority}\r\n                    </Badge>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    {course.description}\r\n                  </p>\r\n                  <div className=\"flex items-center gap-4 mt-2 text-sm\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n                      <span>{course.stats.completed} completed</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-amber-600\" />\r\n                      <span>{course.stats.inProgress} in progress</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <AlertTriangle className=\"h-4 w-4 text-red-600\" />\r\n                      <span>{course.stats.overdue} overdue</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                  View Details\r\n                </Button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* User Training Status */}\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle>Staff Training Status</CardTitle>\r\n            <Button variant=\"outline\" size=\"sm\">\r\n              View All Users\r\n            </Button>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"space-y-3\">\r\n            {users.map((user) => (\r\n              <div\r\n                key={user.id}\r\n                className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Users className=\"h-5 w-5 text-muted-foreground\" />\r\n                  <div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <h4 className=\"font-semibold\">{user.name}</h4>\r\n                      <Badge variant=\"outline\">{user.role}</Badge>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4 mt-1 text-sm text-muted-foreground\">\r\n                      <span>Completed: {user.training.completed}/{user.training.required}</span>\r\n                      {user.training.overdue > 0 && (\r\n                        <span className=\"text-red-600\">\r\n                          {user.training.overdue} overdue\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Badge variant={getUserStatusVariant(user.training.status)}>\r\n                    {user.training.status}\r\n                  </Badge>\r\n                  <Button variant=\"outline\" size=\"sm\">\r\n                    View\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Maps training priority to UI badge variant\r\n *\r\n * Determines the visual styling for training course priority badges.\r\n * Critical mandatory training is highlighted with destructive (red) variant.\r\n *\r\n * @param {string} priority - Training course priority level\r\n * @returns {'default' | 'destructive' | 'outline'} Badge variant for styling\r\n *\r\n * @description\r\n * **Priority Variant Mapping:**\r\n * - MANDATORY: Destructive (red) - Required by regulation, no exceptions\r\n * - REQUIRED: Default (blue) - Required for specific roles\r\n * - RECOMMENDED: Outline (bordered) - Optional but encouraged\r\n *\r\n * @example\r\n * ```tsx\r\n * <Badge variant={getCourseVariant('MANDATORY')}>MANDATORY</Badge>\r\n * // Renders: <Badge variant=\"destructive\">MANDATORY</Badge>\r\n * ```\r\n */\r\nfunction getCourseVariant(priority: string): 'default' | 'destructive' | 'outline' {\r\n  return priority === 'MANDATORY' ? 'destructive' : 'default';\r\n}\r\n\r\n/**\r\n * Maps user training status to UI badge variant\r\n *\r\n * Determines the visual styling for user training compliance status badges.\r\n * Provides clear visual feedback on compliance status.\r\n *\r\n * @param {string} status - User training compliance status\r\n * @returns {'default' | 'destructive' | 'outline' | 'secondary'} Badge variant\r\n *\r\n * @description\r\n * **Status Variant Mapping:**\r\n * - COMPLIANT: Default (blue) - All training current\r\n * - IN_PROGRESS: Outline (bordered) - Training partially complete\r\n * - OVERDUE: Destructive (red) - Training past deadline\r\n * - EXPIRED: Destructive (red) - Certification expired\r\n *\r\n * @example\r\n * ```tsx\r\n * <Badge variant={getUserStatusVariant('OVERDUE')}>OVERDUE</Badge>\r\n * // Renders: <Badge variant=\"destructive\">OVERDUE</Badge>\r\n * ```\r\n */\r\nfunction getUserStatusVariant(status: string): 'default' | 'destructive' | 'outline' | 'secondary' {\r\n  const variants = {\r\n    COMPLIANT: 'default' as const,\r\n    IN_PROGRESS: 'outline' as const,\r\n    OVERDUE: 'destructive' as const,\r\n  };\r\n  return variants[status as keyof typeof variants] || 'secondary';\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA0CC;;;;;;;AAGD;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;;;;;;;AAKO,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;AACf;AA8De,eAAe;IAC5B,0CAA0C;IAC1C,MAAM,iBAAiB,MAAM,IAAA,2KAAwB;IACrD,IAAI,CAAC,eAAe,OAAO,IAAI,CAAC,eAAe,IAAI,EAAE;QACnD,MAAM,IAAI,MAAM,eAAe,KAAK,IAAI;IAC1C;IACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,eAAe,IAAI;IAErD,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,8OAAC,4IAAM;kCAAC;;;;;;;;;;;;0BAMV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;;kDACpB,8OAAC,6IAAS;wCAAC,WAAU;kDAAsB;;;;;;kDAC3C,8OAAC,0OAAW;wCAAC,WAAU;;;;;;;;;;;;0CAEzB,8OAAC,+IAAW;;kDACV,8OAAC;wCAAI,WAAU;;4CAAsB,MAAM,cAAc;4CAAC;;;;;;;kDAC1D,8OAAC;wCAAE,WAAU;;4CACV,MAAM,SAAS;4CAAC;4CAAI,MAAM,KAAK;4CAAC;;;;;;;;;;;;;;;;;;;kCAKvC,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;;kDACpB,8OAAC,6IAAS;wCAAC,WAAU;kDAAsB;;;;;;kDAC3C,8OAAC,yOAAa;wCAAC,WAAU;;;;;;;;;;;;0CAE3B,8OAAC,+IAAW;;kDACV,8OAAC;wCAAI,WAAU;kDAAsB,MAAM,OAAO;;;;;;kDAClD,8OAAC;wCAAE,WAAU;kDAAgC;;;;;;;;;;;;;;;;;;kCAMjD,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;;kDACpB,8OAAC,6IAAS;wCAAC,WAAU;kDAAsB;;;;;;kDAC3C,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;;0CAEnB,8OAAC,+IAAW;;kDACV,8OAAC;wCAAI,WAAU;kDAAsB,MAAM,UAAU;;;;;;kDACrD,8OAAC;wCAAE,WAAU;kDAAgC;;;;;;;;;;;;;;;;;;kCAMjD,8OAAC,wIAAI;;0CACH,8OAAC,8IAAU;gCAAC,WAAU;;kDACpB,8OAAC,6IAAS;wCAAC,WAAU;kDAAsB;;;;;;kDAC3C,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;;0CAEnB,8OAAC,+IAAW;;kDACV,8OAAC;wCAAI,WAAU;kDAAsB,MAAM,cAAc;;;;;;kDACzD,8OAAC;wCAAE,WAAU;;4CACV,MAAM,YAAY;4CAAC;;;;;;;;;;;;;;;;;;;;;;;;;0BAO5B,8OAAC,wIAAI;;kCACH,8OAAC,8IAAU;kCACT,cAAA,8OAAC,6IAAS;sCAAC;;;;;;;;;;;kCAEb,8OAAC,+IAAW;kCACV,cAAA,8OAAC;4BAAI,WAAU;sCACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;oCAEC,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAG,WAAU;sEAAiB,OAAO,KAAK;;;;;;sEAC3C,8OAAC,0IAAK;4DAAC,SAAS,iBAAiB,OAAO,QAAQ;sEAC7C,OAAO,QAAQ;;;;;;;;;;;;8DAGpB,8OAAC;oDAAE,WAAU;8DACV,OAAO,WAAW;;;;;;8DAErB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,0OAAW;oEAAC,WAAU;;;;;;8EACvB,8OAAC;;wEAAM,OAAO,KAAK,CAAC,SAAS;wEAAC;;;;;;;;;;;;;sEAEhC,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,6MAAK;oEAAC,WAAU;;;;;;8EACjB,8OAAC;;wEAAM,OAAO,KAAK,CAAC,UAAU;wEAAC;;;;;;;;;;;;;sEAEjC,8OAAC;4DAAI,WAAU;;8EACb,8OAAC,yOAAa;oEAAC,WAAU;;;;;;8EACzB,8OAAC;;wEAAM,OAAO,KAAK,CAAC,OAAO;wEAAC;;;;;;;;;;;;;;;;;;;;;;;;;sDAIlC,8OAAC,4IAAM;4CAAC,SAAQ;4CAAU,MAAK;sDAAK;;;;;;;mCA5B/B,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;0BAsCxB,8OAAC,wIAAI;;kCACH,8OAAC,8IAAU;kCACT,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,6IAAS;8CAAC;;;;;;8CACX,8OAAC,4IAAM;oCAAC,SAAQ;oCAAU,MAAK;8CAAK;;;;;;;;;;;;;;;;;kCAKxC,8OAAC,+IAAW;kCACV,cAAA,8OAAC;4BAAI,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;oCAEC,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,6MAAK;oDAAC,WAAU;;;;;;8DACjB,8OAAC;;sEACC,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAG,WAAU;8EAAiB,KAAK,IAAI;;;;;;8EACxC,8OAAC,0IAAK;oEAAC,SAAQ;8EAAW,KAAK,IAAI;;;;;;;;;;;;sEAErC,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;wEAAK;wEAAY,KAAK,QAAQ,CAAC,SAAS;wEAAC;wEAAE,KAAK,QAAQ,CAAC,QAAQ;;;;;;;gEACjE,KAAK,QAAQ,CAAC,OAAO,GAAG,mBACvB,8OAAC;oEAAK,WAAU;;wEACb,KAAK,QAAQ,CAAC,OAAO;wEAAC;;;;;;;;;;;;;;;;;;;;;;;;;sDAMjC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,0IAAK;oDAAC,SAAS,qBAAqB,KAAK,QAAQ,CAAC,MAAM;8DACtD,KAAK,QAAQ,CAAC,MAAM;;;;;;8DAEvB,8OAAC,4IAAM;oDAAC,SAAQ;oDAAU,MAAK;8DAAK;;;;;;;;;;;;;mCAxBjC,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmC5B;AAEA;;;;;;;;;;;;;;;;;;;;CAoBC,GACD,SAAS,iBAAiB,QAAgB;IACxC,OAAO,aAAa,cAAc,gBAAgB;AACpD;AAEA;;;;;;;;;;;;;;;;;;;;;CAqBC,GACD,SAAS,qBAAqB,MAAc;IAC1C,MAAM,WAAW;QACf,WAAW;QACX,aAAa;QACb,SAAS;IACX;IACA,OAAO,QAAQ,CAAC,OAAgC,IAAI;AACtD","debugId":null}}]
}