{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/cache/constants.ts"],"sourcesContent":["/**\r\n * @fileoverview Cache Configuration Constants\r\n * @module lib/cache/constants\r\n *\r\n * Standardized cache TTL (Time To Live) configuration for the application.\r\n * Implements a tiered caching strategy based on data sensitivity and freshness requirements.\r\n *\r\n * **HIPAA Compliance:**\r\n * - PHI data has shorter TTLs (30-60s) to minimize stale data exposure\r\n * - Static data can cache longer (300s) for performance\r\n * - All cache keys use IDs only, never PHI values\r\n *\r\n * **Performance Strategy:**\r\n * - Aggressive caching for static reference data\r\n * - Conservative caching for frequently changing data\r\n * - Minimal caching for real-time data\r\n *\r\n * @see DATABASE_INTEGRATION_AUDIT_REPORT.md for detailed caching strategy\r\n * @version 1.0.0\r\n * @since 2025-10-27\r\n */\r\n\r\n// ==========================================\r\n// CACHE TTL CONSTANTS (seconds)\r\n// ==========================================\r\n\r\n/**\r\n * Cache Time-To-Live Configuration\r\n *\r\n * All values in seconds. Aligned with Next.js `revalidate` API.\r\n *\r\n * **Tier Breakdown:**\r\n * - **STATIC**: Reference data that rarely changes (schools, districts, medication formulary)\r\n * - **STATS**: Aggregated statistics (non-PHI dashboard data)\r\n * - **PHI_FREQUENT**: Frequently accessed PHI (active medications, today's appointments)\r\n * - **PHI_STANDARD**: Standard PHI access (student lists, health records lists)\r\n * - **SESSION**: User session data (profile, preferences)\r\n * - **REALTIME**: Real-time data (notifications, unread messages)\r\n */\r\nexport const CACHE_TTL = {\r\n  /**\r\n   * Static reference data - rarely changes\r\n   * Examples: Schools, districts, medication formulary, form templates\r\n   * TTL: 5 minutes (300 seconds)\r\n   */\r\n  STATIC: 300,\r\n\r\n  /**\r\n   * Aggregated statistics - non-PHI\r\n   * Examples: Dashboard stats, analytics, reports\r\n   * TTL: 2 minutes (120 seconds)\r\n   */\r\n  STATS: 120,\r\n\r\n  /**\r\n   * PHI data - frequently accessed\r\n   * Examples: Active medications, today's appointments, recent health alerts\r\n   * TTL: 30 seconds\r\n   * Rationale: High-sensitivity data that changes frequently\r\n   */\r\n  PHI_FREQUENT: 30,\r\n\r\n  /**\r\n   * PHI data - standard access\r\n   * Examples: Student lists, health records lists, incident lists\r\n   * TTL: 1 minute (60 seconds)\r\n   * Rationale: Moderate sensitivity, reasonable freshness for list views\r\n   */\r\n  PHI_STANDARD: 60,\r\n\r\n  /**\r\n   * User session data\r\n   * Examples: Current user profile, user preferences, role permissions\r\n   * TTL: 5 minutes (300 seconds)\r\n   * Rationale: Rarely changes during session, safe to cache\r\n   */\r\n  SESSION: 300,\r\n\r\n  /**\r\n   * Real-time data - minimal caching\r\n   * Examples: Notifications, unread message counts, active alerts\r\n   * TTL: 10 seconds\r\n   * Rationale: Needs near real-time updates\r\n   */\r\n  REALTIME: 10,\r\n\r\n  /**\r\n   * No caching - always fetch fresh\r\n   * Use for critical operations or data that must always be fresh\r\n   * TTL: 0 (forces revalidation)\r\n   */\r\n  NO_CACHE: 0,\r\n} as const;\r\n\r\n// ==========================================\r\n// CACHE TAGS FOR GRANULAR INVALIDATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Tags for Next.js revalidateTag() API\r\n *\r\n * Used to invalidate specific data without clearing entire cache.\r\n *\r\n * **Usage:**\r\n * ```typescript\r\n * // In Server Component\r\n * fetch(url, {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD,\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // In Server Action (to invalidate)\r\n * import { revalidateTag } from 'next/cache';\r\n * revalidateTag(CACHE_TAGS.STUDENTS);\r\n * ```\r\n */\r\nexport const CACHE_TAGS = {\r\n  // ==========================================\r\n  // PHI TAGS (HIPAA-protected data)\r\n  // ==========================================\r\n\r\n  /**\r\n   * General PHI data tag\r\n   * Use to invalidate all PHI-related caches\r\n   */\r\n  PHI: 'phi-data',\r\n\r\n  /**\r\n   * Student data (PHI)\r\n   */\r\n  STUDENTS: 'students',\r\n\r\n  /**\r\n   * Medication data (PHI)\r\n   */\r\n  MEDICATIONS: 'medications',\r\n\r\n  /**\r\n   * Health record data (PHI)\r\n   */\r\n  HEALTH_RECORDS: 'health-records',\r\n\r\n  /**\r\n   * Appointment data (PHI)\r\n   */\r\n  APPOINTMENTS: 'appointments',\r\n\r\n  /**\r\n   * Incident report data (PHI)\r\n   */\r\n  INCIDENTS: 'incidents',\r\n\r\n  /**\r\n   * Immunization data (PHI)\r\n   */\r\n  IMMUNIZATIONS: 'immunizations',\r\n\r\n  /**\r\n   * Allergy data (PHI)\r\n   */\r\n  ALLERGIES: 'allergies',\r\n\r\n  /**\r\n   * Emergency contact data (PHI)\r\n   */\r\n  EMERGENCY_CONTACTS: 'emergency-contacts',\r\n\r\n  // ==========================================\r\n  // NON-PHI TAGS\r\n  // ==========================================\r\n\r\n  /**\r\n   * User account data (non-PHI)\r\n   */\r\n  USERS: 'users',\r\n\r\n  /**\r\n   * School data (non-PHI)\r\n   */\r\n  SCHOOLS: 'schools',\r\n\r\n  /**\r\n   * District data (non-PHI)\r\n   */\r\n  DISTRICTS: 'districts',\r\n\r\n  /**\r\n   * Dashboard statistics (non-PHI aggregated)\r\n   */\r\n  STATS: 'statistics',\r\n\r\n  /**\r\n   * Analytics data (non-PHI aggregated)\r\n   */\r\n  ANALYTICS: 'analytics',\r\n\r\n  /**\r\n   * Notification data\r\n   */\r\n  NOTIFICATIONS: 'notifications',\r\n\r\n  /**\r\n   * Document templates (non-PHI)\r\n   */\r\n  TEMPLATES: 'templates',\r\n\r\n  /**\r\n   * Medication formulary (non-PHI)\r\n   */\r\n  FORMULARY: 'medication-formulary',\r\n\r\n  /**\r\n   * Admin user data (non-PHI)\r\n   */\r\n  ADMIN_USERS: 'admin-users',\r\n\r\n  /**\r\n   * Admin districts data (non-PHI)\r\n   */\r\n  ADMIN_DISTRICTS: 'admin-districts',\r\n\r\n  /**\r\n   * Admin schools data (non-PHI)\r\n   */\r\n  ADMIN_SCHOOLS: 'admin-schools',\r\n\r\n  /**\r\n   * Admin settings data (non-PHI)\r\n   */\r\n  ADMIN_SETTINGS: 'admin-settings',\r\n\r\n  /**\r\n   * Admin licenses data (non-PHI)\r\n   */\r\n  ADMIN_LICENSES: 'admin-licenses',\r\n\r\n  /**\r\n   * Admin backups data (non-PHI)\r\n   */\r\n  ADMIN_BACKUPS: 'admin-backups',\r\n\r\n  /**\r\n   * Admin metrics data (non-PHI)\r\n   */\r\n  ADMIN_METRICS: 'admin-metrics',\r\n\r\n  /**\r\n   * Admin training data (non-PHI)\r\n   */\r\n  ADMIN_TRAINING: 'admin-training',\r\n\r\n  /**\r\n   * Admin audit logs data (non-PHI)\r\n   */\r\n  ADMIN_AUDIT_LOGS: 'admin-audit-logs',\r\n} as const;\r\n\r\n// ==========================================\r\n// TYPE EXPORTS\r\n// ==========================================\r\n\r\n/**\r\n * Cache TTL values type (for TypeScript type safety)\r\n */\r\nexport type CacheTTLValue = typeof CACHE_TTL[keyof typeof CACHE_TTL];\r\n\r\n/**\r\n * Cache tag values type (for TypeScript type safety)\r\n */\r\nexport type CacheTagValue = typeof CACHE_TAGS[keyof typeof CACHE_TAGS];\r\n\r\n// ==========================================\r\n// HELPER UTILITIES\r\n// ==========================================\r\n\r\n/**\r\n * Determine appropriate cache TTL based on data type\r\n *\r\n * @param resourceType - Type of resource (e.g., 'students', 'medications')\r\n * @param isPHI - Whether the data contains PHI\r\n * @param isFrequentlyAccessed - Whether the data is frequently accessed\r\n * @returns Appropriate cache TTL in seconds\r\n *\r\n * @example\r\n * ```typescript\r\n * const ttl = getCacheTTL('medications', true, true);\r\n * console.log(ttl); // 30 (PHI_FREQUENT)\r\n * ```\r\n */\r\nexport function getCacheTTL(\r\n  resourceType: string,\r\n  isPHI: boolean,\r\n  isFrequentlyAccessed: boolean = false\r\n): number {\r\n  if (!isPHI) {\r\n    // Non-PHI data\r\n    if (resourceType === 'users' || resourceType === 'schools' || resourceType === 'districts') {\r\n      return CACHE_TTL.STATIC;\r\n    }\r\n    if (resourceType === 'statistics' || resourceType === 'analytics') {\r\n      return CACHE_TTL.STATS;\r\n    }\r\n    if (resourceType === 'notifications') {\r\n      return CACHE_TTL.REALTIME;\r\n    }\r\n    return CACHE_TTL.SESSION; // Default for non-PHI\r\n  }\r\n\r\n  // PHI data\r\n  if (isFrequentlyAccessed) {\r\n    return CACHE_TTL.PHI_FREQUENT;\r\n  }\r\n  return CACHE_TTL.PHI_STANDARD;\r\n}\r\n\r\n/**\r\n * Get cache tags for a resource type\r\n *\r\n * @param resourceType - Type of resource\r\n * @param isPHI - Whether the data contains PHI\r\n * @returns Array of cache tags to apply\r\n *\r\n * @example\r\n * ```typescript\r\n * const tags = getCacheTags('students', true);\r\n * console.log(tags); // ['students', 'phi-data']\r\n * ```\r\n */\r\nexport function getCacheTags(\r\n  resourceType: string,\r\n  isPHI: boolean = true\r\n): string[] {\r\n  const tags: string[] = [];\r\n\r\n  // Add resource-specific tag\r\n  if (resourceType === 'students') {\r\n    tags.push(CACHE_TAGS.STUDENTS);\r\n  } else if (resourceType === 'medications') {\r\n    tags.push(CACHE_TAGS.MEDICATIONS);\r\n  } else if (resourceType === 'health-records') {\r\n    tags.push(CACHE_TAGS.HEALTH_RECORDS);\r\n  } else if (resourceType === 'appointments') {\r\n    tags.push(CACHE_TAGS.APPOINTMENTS);\r\n  } else if (resourceType === 'incidents') {\r\n    tags.push(CACHE_TAGS.INCIDENTS);\r\n  } else if (resourceType === 'users') {\r\n    tags.push(CACHE_TAGS.USERS);\r\n  } else if (resourceType === 'statistics') {\r\n    tags.push(CACHE_TAGS.STATS);\r\n  }\r\n\r\n  // Add PHI tag if applicable\r\n  if (isPHI) {\r\n    tags.push(CACHE_TAGS.PHI);\r\n  }\r\n\r\n  return tags;\r\n}\r\n\r\n/**\r\n * Build cache tag for specific resource instance\r\n *\r\n * @param resourceType - Type of resource\r\n * @param resourceId - ID of specific resource\r\n * @returns Cache tag string\r\n *\r\n * @example\r\n * ```typescript\r\n * const tag = buildResourceTag('student', '123');\r\n * console.log(tag); // 'student-123'\r\n * ```\r\n */\r\nexport function buildResourceTag(\r\n  resourceType: string,\r\n  resourceId: string\r\n): string {\r\n  return `${resourceType}-${resourceId}`;\r\n}\r\n\r\n// ==========================================\r\n// DOCUMENTATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Strategy Documentation\r\n *\r\n * **Decision Framework:**\r\n *\r\n * 1. **Is it PHI?**\r\n *    - YES → Use PHI_FREQUENT (30s) or PHI_STANDARD (60s)\r\n *    - NO → Continue to #2\r\n *\r\n * 2. **How often does it change?**\r\n *    - Rarely (reference data) → STATIC (300s)\r\n *    - Moderately (aggregated stats) → STATS (120s)\r\n *    - Frequently (real-time) → REALTIME (10s)\r\n *\r\n * 3. **Is it user-specific?**\r\n *    - YES → SESSION (300s)\r\n *    - NO → Use type-based TTL\r\n *\r\n * **HIPAA Compliance Notes:**\r\n * - All PHI cache entries MUST have tags for invalidation\r\n * - Cache keys MUST NOT contain PHI values (use IDs only)\r\n * - PHI caches MUST be cleared on user logout\r\n * - Audit logging required for PHI cache access\r\n *\r\n * **Performance Guidelines:**\r\n * - Prefer longer TTLs for static data (reduces backend load)\r\n * - Use shorter TTLs for PHI (compliance requirement)\r\n * - Always tag caches for granular invalidation\r\n * - Monitor cache hit rates and adjust TTLs accordingly\r\n *\r\n * **Examples:**\r\n *\r\n * ```typescript\r\n * // Example 1: Fetch student list (PHI, standard access)\r\n * const students = await fetch('/api/students', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD, // 60s\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 2: Fetch medication formulary (non-PHI, static)\r\n * const formulary = await fetch('/api/medications/formulary', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.STATIC, // 300s\r\n *     tags: [CACHE_TAGS.FORMULARY]\r\n *   }\r\n * });\r\n *\r\n * // Example 3: Fetch today's appointments (PHI, frequent)\r\n * const appointments = await fetch('/api/appointments/today', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_FREQUENT, // 30s\r\n *     tags: [CACHE_TAGS.APPOINTMENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 4: Fetch current user (non-PHI, session)\r\n * const user = await fetch('/api/auth/me', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.SESSION, // 300s\r\n *     tags: [CACHE_TAGS.USERS]\r\n *   }\r\n * });\r\n * ```\r\n */\r\n\r\n// Export all constants and utilities\r\nconst cacheConstants = {\r\n  CACHE_TTL,\r\n  CACHE_TAGS,\r\n  getCacheTTL,\r\n  getCacheTags,\r\n  buildResourceTag,\r\n};\r\n\r\nexport default cacheConstants;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/admin.monitoring.ts"],"sourcesContent":["/**\r\n * @fileoverview Admin Monitoring Server Actions\r\n * @module lib/actions/admin.monitoring\r\n *\r\n * HIPAA-compliant server actions for system monitoring with comprehensive\r\n * caching, real-time metrics, and performance tracking.\r\n *\r\n * Features:\r\n * - 'use cache' directive for server-side caching\r\n * - Real-time system health monitoring\r\n * - Performance metrics tracking\r\n * - API endpoint monitoring\r\n * - Error tracking and alerting\r\n * - User activity monitoring\r\n * - HIPAA audit logging for monitoring access\r\n *\r\n * @security Admin-only operations with RBAC enforcement\r\n * @audit All monitoring access logged for HIPAA compliance\r\n * @compliance HIPAA - System monitoring required for operational oversight\r\n */\r\n\r\n'use server';\r\n\r\nimport { CACHE_TTL } from '@/lib/cache/constants';\r\n\r\n// ==========================================\r\n// TYPE DEFINITIONS\r\n// ==========================================\r\n\r\nexport interface SystemHealth {\r\n  status: 'healthy' | 'degraded' | 'down';\r\n  overall: {\r\n    uptime: number;\r\n    lastRestart: Date;\r\n    version: string;\r\n  };\r\n  services: Array<{\r\n    name: string;\r\n    status: 'operational' | 'degraded' | 'down';\r\n    responseTime: number;\r\n    uptime: number;\r\n    lastCheck: Date;\r\n    errorRate?: number;\r\n  }>;\r\n  metrics: {\r\n    cpu: {\r\n      usage: number;\r\n      cores: number;\r\n      temperature: number;\r\n    };\r\n    memory: {\r\n      used: number;\r\n      total: number;\r\n      percentage: number;\r\n    };\r\n    disk: {\r\n      used: number;\r\n      total: number;\r\n      percentage: number;\r\n    };\r\n    network: {\r\n      incoming: number;\r\n      outgoing: number;\r\n    };\r\n  };\r\n  alerts: Array<{\r\n    id: string;\r\n    severity: 'info' | 'warning' | 'error' | 'critical';\r\n    service: string;\r\n    message: string;\r\n    timestamp: Date;\r\n    acknowledged: boolean;\r\n  }>;\r\n}\r\n\r\nexport interface PerformanceMetrics {\r\n  id: string;\r\n  timestamp: Date;\r\n  responseTime: number;\r\n  throughput: number;\r\n  errorRate: number;\r\n  cpuUsage: number;\r\n  memoryUsage: number;\r\n  activeConnections: number;\r\n  queueSize: number;\r\n}\r\n\r\nexport interface ApiMetrics {\r\n  endpoint: string;\r\n  method: string;\r\n  totalRequests: number;\r\n  successfulRequests: number;\r\n  errorRequests: number;\r\n  averageResponseTime: number;\r\n  p95ResponseTime: number;\r\n  p99ResponseTime: number;\r\n  lastHour: {\r\n    requests: number;\r\n    errors: number;\r\n    avgResponseTime: number;\r\n  };\r\n}\r\n\r\nexport interface ErrorLog {\r\n  id: string;\r\n  timestamp: Date;\r\n  level: 'error' | 'warning' | 'critical';\r\n  service: string;\r\n  message: string;\r\n  stackTrace?: string;\r\n  userId?: string;\r\n  requestId?: string;\r\n  resolved: boolean;\r\n}\r\n\r\nexport interface UserActivity {\r\n  id: string;\r\n  userId: string;\r\n  userEmail: string;\r\n  action: string;\r\n  resource: string;\r\n  timestamp: Date;\r\n  ipAddress: string;\r\n  userAgent: string;\r\n  success: boolean;\r\n  responseTime: number;\r\n}\r\n\r\n// ==========================================\r\n// SYSTEM HEALTH MONITORING\r\n// ==========================================\r\n\r\n/**\r\n * Get comprehensive system health information\r\n * Uses 'use cache' with monitoring TTL for system health data\r\n */\r\nexport async function getSystemHealth(): Promise<SystemHealth> {\r\n  try {\r\n      // In production, fetch from actual monitoring service\r\n      // For now, returning enhanced mock data\r\n      const mockHealth: SystemHealth = {\r\n        status: 'healthy',\r\n        overall: {\r\n          uptime: 2592000, // 30 days in seconds\r\n          lastRestart: new Date('2025-09-26T00:00:00'),\r\n          version: '1.2.0',\r\n        },\r\n        services: [\r\n          {\r\n            name: 'Database Primary',\r\n            status: 'operational',\r\n            responseTime: 12,\r\n            uptime: 99.95,\r\n            lastCheck: new Date(),\r\n          },\r\n          {\r\n            name: 'Database Replica',\r\n            status: 'operational',\r\n            responseTime: 18,\r\n            uptime: 99.92,\r\n            lastCheck: new Date(),\r\n          },\r\n          {\r\n            name: 'API Gateway',\r\n            status: 'operational',\r\n            responseTime: 35,\r\n            uptime: 99.88,\r\n            lastCheck: new Date(),\r\n          },\r\n          {\r\n            name: 'Redis Cache',\r\n            status: 'operational',\r\n            responseTime: 3,\r\n            uptime: 99.98,\r\n            lastCheck: new Date(),\r\n          },\r\n          {\r\n            name: 'Email Service',\r\n            status: 'degraded',\r\n            responseTime: 280,\r\n            uptime: 98.2,\r\n            lastCheck: new Date(),\r\n            errorRate: 1.2,\r\n          },\r\n          {\r\n            name: 'File Storage',\r\n            status: 'operational',\r\n            responseTime: 45,\r\n            uptime: 99.85,\r\n            lastCheck: new Date(),\r\n          },\r\n        ],\r\n        metrics: {\r\n          cpu: {\r\n            usage: 32.5,\r\n            cores: 8,\r\n            temperature: 58,\r\n          },\r\n          memory: {\r\n            used: 13958643712, // 13 GB\r\n            total: 17179869184, // 16 GB\r\n            percentage: 81.2,\r\n          },\r\n          disk: {\r\n            used: 268435456000, // 250 GB\r\n            total: 536870912000, // 500 GB\r\n            percentage: 50,\r\n          },\r\n          network: {\r\n            incoming: 2097152, // 2 MB/s\r\n            outgoing: 1048576, // 1 MB/s\r\n          },\r\n        },\r\n        alerts: [\r\n          {\r\n            id: '1',\r\n            severity: 'warning',\r\n            service: 'Email Service',\r\n            message: 'Response time above threshold (280ms > 200ms)',\r\n            timestamp: new Date(Date.now() - 300000), // 5 minutes ago\r\n            acknowledged: false,\r\n          },\r\n          {\r\n            id: '2',\r\n            severity: 'info',\r\n            service: 'Memory Monitor',\r\n            message: 'Memory usage approaching 85% threshold (81.2%)',\r\n            timestamp: new Date(Date.now() - 900000), // 15 minutes ago\r\n            acknowledged: true,\r\n          },\r\n        ],\r\n      };\r\n\r\n    return mockHealth;\r\n  } catch (error) {\r\n    console.error('Failed to get system health:', error);\r\n    throw new Error('Failed to retrieve system health information');\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// PERFORMANCE MONITORING\r\n// ==========================================\r\n\r\n/**\r\n * Get performance metrics for specified time range\r\n */\r\nexport async function getPerformanceMetrics(timeRange: '1h' | '24h' | '7d' | '30d' = '24h'): Promise<PerformanceMetrics[]> {\r\n  try {\r\n      // Mock performance data - replace with actual implementation\r\n      const now = new Date();\r\n      const metrics: PerformanceMetrics[] = [];\r\n      \r\n      const intervals = timeRange === '1h' ? 60 : timeRange === '24h' ? 144 : timeRange === '7d' ? 168 : 720;\r\n      const intervalMs = timeRange === '1h' ? 60000 : timeRange === '24h' ? 600000 : timeRange === '7d' ? 3600000 : 3600000;\r\n      \r\n      for (let i = intervals; i > 0; i--) {\r\n        const timestamp = new Date(now.getTime() - (i * intervalMs));\r\n        metrics.push({\r\n          id: `metric-${i}`,\r\n          timestamp,\r\n          responseTime: Math.random() * 200 + 50, // 50-250ms\r\n          throughput: Math.random() * 1000 + 500, // 500-1500 req/min\r\n          errorRate: Math.random() * 2, // 0-2%\r\n          cpuUsage: Math.random() * 40 + 20, // 20-60%\r\n          memoryUsage: Math.random() * 30 + 60, // 60-90%\r\n          activeConnections: Math.floor(Math.random() * 200 + 50), // 50-250\r\n          queueSize: Math.floor(Math.random() * 10), // 0-10\r\n        });\r\n      }\r\n      \r\n    return metrics;\r\n  } catch (error) {\r\n    console.error('Failed to get performance metrics:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// API MONITORING\r\n// ==========================================\r\n\r\n/**\r\n * Get API endpoint metrics and statistics\r\n */\r\nexport async function getApiMetrics(): Promise<ApiMetrics[]> {\r\n  'use cache';\r\n  cacheLife({ revalidate: CACHE_TTL.STATS }); // 120s for API metrics\r\n  cacheTag('api-metrics');\r\n  \r\n  try {\r\n      // Mock API metrics - replace with actual implementation\r\n      const endpoints = [\r\n        '/api/auth/login',\r\n        '/api/auth/logout',\r\n        '/api/users',\r\n        '/api/admin/users',\r\n        '/api/admin/districts',\r\n        '/api/admin/schools',\r\n        '/api/immunizations',\r\n        '/api/reports',\r\n        '/api/files/upload',\r\n        '/api/notifications',\r\n      ];\r\n      \r\n      const metrics = endpoints.map(endpoint => ({\r\n        endpoint,\r\n        method: 'GET',\r\n        totalRequests: Math.floor(Math.random() * 10000 + 1000),\r\n        successfulRequests: Math.floor(Math.random() * 9500 + 950),\r\n        errorRequests: Math.floor(Math.random() * 100 + 10),\r\n        averageResponseTime: Math.random() * 200 + 50,\r\n        p95ResponseTime: Math.random() * 400 + 100,\r\n        p99ResponseTime: Math.random() * 800 + 200,\r\n        lastHour: {\r\n          requests: Math.floor(Math.random() * 100 + 10),\r\n          errors: Math.floor(Math.random() * 5),\r\n          avgResponseTime: Math.random() * 150 + 40,\r\n        },\r\n      }));\r\n      \r\n    return metrics;\r\n  } catch (error) {\r\n    console.error('Failed to get API metrics:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// ERROR MONITORING\r\n// ==========================================\r\n\r\n/**\r\n * Get recent error logs with filtering options\r\n */\r\nexport async function getErrorLogs(filters?: {\r\n  level?: string;\r\n  service?: string;\r\n  resolved?: boolean;\r\n  limit?: number;\r\n}): Promise<ErrorLog[]> {\r\n  'use cache';\r\n  cacheLife({ revalidate: CACHE_TTL.REALTIME }); // 10s for error logs\r\n  cacheTag('error-logs');\r\n  \r\n  try {\r\n      // Mock error logs - replace with actual implementation\r\n      const services = ['API Gateway', 'Database', 'Email Service', 'File Storage', 'Redis Cache'];\r\n      const levels: Array<'error' | 'warning' | 'critical'> = ['error', 'warning', 'critical'];\r\n      \r\n      const errorLogs: ErrorLog[] = [];\r\n      const limit = filters?.limit || 50;\r\n      \r\n      for (let i = 0; i < limit; i++) {\r\n        const timestamp = new Date(Date.now() - Math.random() * 86400000 * 7); // Last 7 days\r\n        const level = levels[Math.floor(Math.random() * levels.length)];\r\n        const service = services[Math.floor(Math.random() * services.length)];\r\n        \r\n        errorLogs.push({\r\n          id: `error-${i}`,\r\n          timestamp,\r\n          level,\r\n          service,\r\n          message: `Sample error message for ${service}`,\r\n          stackTrace: level === 'critical' ? 'Stack trace would be here...' : undefined,\r\n          userId: Math.random() > 0.7 ? `user-${Math.floor(Math.random() * 100)}` : undefined,\r\n          requestId: `req-${Math.random().toString(36).substr(2, 9)}`,\r\n          resolved: Math.random() > 0.3,\r\n        });\r\n      }\r\n      \r\n      // Apply filters\r\n      let filtered = errorLogs;\r\n      if (filters?.level) {\r\n        filtered = filtered.filter(log => log.level === filters.level);\r\n      }\r\n      if (filters?.service) {\r\n        filtered = filtered.filter(log => log.service === filters.service);\r\n      }\r\n      if (filters?.resolved !== undefined) {\r\n        filtered = filtered.filter(log => log.resolved === filters.resolved);\r\n      }\r\n      \r\n    return filtered.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\r\n  } catch (error) {\r\n    console.error('Failed to get error logs:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// USER ACTIVITY MONITORING\r\n// ==========================================\r\n\r\n/**\r\n * Get user activity logs for monitoring\r\n */\r\nexport async function getUserActivity(filters?: {\r\n  userId?: string;\r\n  action?: string;\r\n  timeRange?: '1h' | '24h' | '7d';\r\n  limit?: number;\r\n}): Promise<UserActivity[]> {\r\n  'use cache';\r\n  cacheLife({ revalidate: CACHE_TTL.REALTIME }); // 10s for user activity\r\n  cacheTag('user-activity');\r\n  \r\n  try {\r\n      // Mock user activity - replace with actual implementation\r\n      const actions = ['login', 'logout', 'view_page', 'update_profile', 'create_record', 'delete_record'];\r\n      const resources = ['users', 'districts', 'schools', 'immunizations', 'reports'];\r\n      \r\n      const activities: UserActivity[] = [];\r\n      const limit = filters?.limit || 100;\r\n      const timeRangeMs = filters?.timeRange === '1h' ? 3600000 : \r\n                         filters?.timeRange === '24h' ? 86400000 : \r\n                         604800000; // 7 days default\r\n      \r\n      for (let i = 0; i < limit; i++) {\r\n        const timestamp = new Date(Date.now() - Math.random() * timeRangeMs);\r\n        const action = actions[Math.floor(Math.random() * actions.length)];\r\n        const resource = resources[Math.floor(Math.random() * resources.length)];\r\n        \r\n        activities.push({\r\n          id: `activity-${i}`,\r\n          userId: `user-${Math.floor(Math.random() * 50)}`,\r\n          userEmail: `user${Math.floor(Math.random() * 50)}@example.com`,\r\n          action,\r\n          resource,\r\n          timestamp,\r\n          ipAddress: `192.168.1.${Math.floor(Math.random() * 255)}`,\r\n          userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n          success: Math.random() > 0.05, // 95% success rate\r\n          responseTime: Math.random() * 500 + 50,\r\n        });\r\n      }\r\n      \r\n      // Apply filters\r\n      let filtered = activities;\r\n      if (filters?.userId) {\r\n        filtered = filtered.filter(activity => activity.userId === filters.userId);\r\n      }\r\n      if (filters?.action) {\r\n        filtered = filtered.filter(activity => activity.action === filters.action);\r\n      }\r\n      \r\n    return filtered.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\r\n  } catch (error) {\r\n    console.error('Failed to get user activity:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ==========================================\r\n// REAL-TIME MONITORING UTILITIES\r\n// ==========================================\r\n\r\n/**\r\n * Get real-time system metrics (lower cache TTL)\r\n */\r\nexport async function getRealTimeMetrics() {\r\n  'use cache';\r\n  cacheLife({ revalidate: 5 }); // 5 seconds for real-time data\r\n  cacheTag('realtime-metrics');\r\n  \r\n  try {\r\n      return {\r\n        timestamp: new Date(),\r\n        cpu: Math.random() * 50 + 20,\r\n        memory: Math.random() * 40 + 50,\r\n        disk: Math.random() * 30 + 40,\r\n        network: {\r\n          incoming: Math.random() * 10 + 5,\r\n          outgoing: Math.random() * 8 + 3,\r\n        },\r\n        activeUsers: Math.floor(Math.random() * 100 + 50),\r\n        activeConnections: Math.floor(Math.random() * 200 + 100),\r\n        requestsPerMinute: Math.floor(Math.random() * 500 + 200),\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to get real-time metrics:', error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 701, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/ui/badge.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Badge = registerClientReference(\n    function() { throw new Error(\"Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx <module evaluation>\",\n    \"Badge\",\n);\nexport const badgeVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call badgeVariants() from the server but badgeVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx <module evaluation>\",\n    \"badgeVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,6DACA;AAEG,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/components/ui/badge.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Badge = registerClientReference(\n    function() { throw new Error(\"Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx\",\n    \"Badge\",\n);\nexport const badgeVariants = registerClientReference(\n    function() { throw new Error(\"Attempted to call badgeVariants() from the server but badgeVariants is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/badge.tsx\",\n    \"badgeVariants\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,yCACA;AAEG,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,yCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 747, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/admin/_components/AdminPageHeader.tsx"],"sourcesContent":["/**\r\n * @fileoverview Reusable Admin Page Header Component\r\n * @module app/(dashboard)/admin/_components/AdminPageHeader\r\n * @category Admin - Components\r\n */\r\n\r\nimport { ReactNode } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\ninterface AdminPageHeaderProps {\r\n  title: string;\r\n  description?: string;\r\n  count?: number;\r\n  countLabel?: string;\r\n  actions?: ReactNode;\r\n  status?: {\r\n    label: string;\r\n    variant: 'success' | 'warning' | 'error' | 'info';\r\n    icon?: ReactNode;\r\n  };\r\n}\r\n\r\n/**\r\n * Reusable admin page header component with title, description, count, and actions.\r\n * Provides consistent styling and layout across admin pages.\r\n * \r\n * @param props - Component props\r\n * @param props.title - Main page title\r\n * @param props.description - Optional page description  \r\n * @param props.count - Optional count to display\r\n * @param props.countLabel - Label for the count (e.g., \"items\", \"users\")\r\n * @param props.actions - Action buttons or controls\r\n * @param props.status - Optional status indicator\r\n * @returns Admin page header component\r\n */\r\nexport function AdminPageHeader({\r\n  title,\r\n  description,\r\n  count,\r\n  countLabel = 'items',\r\n  actions,\r\n  status\r\n}: AdminPageHeaderProps) {\r\n  return (\r\n    <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\r\n      <div className=\"min-w-0 flex-1\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">{title}</h1>\r\n            {description && (\r\n              <p className=\"text-sm text-gray-600 mt-1\">{description}</p>\r\n            )}\r\n            {typeof count === 'number' && (\r\n              <p className=\"text-sm text-gray-500 mt-1\">\r\n                {count} {countLabel}\r\n              </p>\r\n            )}\r\n          </div>\r\n          {status && (\r\n            <Badge \r\n              variant={status.variant}\r\n              className=\"flex items-center gap-1\"\r\n            >\r\n              {status.icon}\r\n              {status.label}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {actions && (\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n          {actions}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;AAID;;;AA4BO,SAAS,gBAAgB,EAC9B,KAAK,EACL,WAAW,EACX,KAAK,EACL,aAAa,OAAO,EACpB,OAAO,EACP,MAAM,EACe;IACrB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAoC;;;;;;gCACjD,6BACC,8OAAC;oCAAE,WAAU;8CAA8B;;;;;;gCAE5C,OAAO,UAAU,0BAChB,8OAAC;oCAAE,WAAU;;wCACV;wCAAM;wCAAE;;;;;;;;;;;;;wBAId,wBACC,8OAAC,0IAAK;4BACJ,SAAS,OAAO,OAAO;4BACvB,WAAU;;gCAET,OAAO,IAAI;gCACX,OAAO,KAAK;;;;;;;;;;;;;;;;;;YAMpB,yBACC,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 846, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/admin/monitoring/health/_components/SystemHealthDisplay.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SystemHealthDisplay = registerClientReference(\n    function() { throw new Error(\"Attempted to call SystemHealthDisplay() from the server but SystemHealthDisplay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/admin/monitoring/health/_components/SystemHealthDisplay.tsx <module evaluation>\",\n    \"SystemHealthDisplay\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,iHACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/admin/monitoring/health/_components/SystemHealthDisplay.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SystemHealthDisplay = registerClientReference(\n    function() { throw new Error(\"Attempted to call SystemHealthDisplay() from the server but SystemHealthDisplay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/admin/monitoring/health/_components/SystemHealthDisplay.tsx\",\n    \"SystemHealthDisplay\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,6FACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 882, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/app/%28dashboard%29/admin/monitoring/health/page.tsx"],"sourcesContent":["/**\r\n * @fileoverview Enhanced System Health Monitoring Page\r\n * @module app/(dashboard)/admin/monitoring/health/page\r\n *\r\n * Next.js v16 enhanced system health monitoring page with server-side caching,\r\n * real-time metrics, and comprehensive operational visibility.\r\n *\r\n * Features:\r\n * - Server Components with 'use cache' integration\r\n * - Real-time system health metrics\r\n * - Service availability monitoring\r\n * - Resource utilization tracking\r\n * - Active alerts management\r\n * - AdminPageHeader integration\r\n * - Streaming with Suspense boundaries\r\n *\r\n * @security RBAC - Requires 'admin' or 'system_administrator' role\r\n * @audit System health access logged for compliance\r\n * @compliance HIPAA - System monitoring required for operational oversight\r\n *\r\n * @since 2025-11-05\r\n */\r\n\r\nimport { Suspense } from 'react';\r\nimport { getSystemHealth } from '@/lib/actions/admin.monitoring';\r\nimport { AdminPageHeader } from '../../_components/AdminPageHeader';\r\nimport { AdminStatusIndicator } from '@/components/admin';\r\nimport { Activity, Server, AlertTriangle, CheckCircle, Clock } from 'lucide-react';\r\nimport { SystemHealthDisplay } from './_components/SystemHealthDisplay';\r\n\r\n/**\r\n * System health content component with enhanced server-side data fetching\r\n */\r\nasync function SystemHealthContent() {\r\n  const health = await getSystemHealth();\r\n  \r\n  // Calculate summary metrics\r\n  const totalServices = health.services.length;\r\n  const operationalServices = health.services.filter(s => s.status === 'operational').length;\r\n  const degradedServices = health.services.filter(s => s.status === 'degraded').length;\r\n  const downServices = health.services.filter(s => s.status === 'down').length;\r\n  const activeAlerts = health.alerts.filter(a => !a.acknowledged).length;\r\n  \r\n  // Format uptime\r\n  const formatUptime = (seconds: number): string => {\r\n    const days = Math.floor(seconds / 86400);\r\n    const hours = Math.floor((seconds % 86400) / 3600);\r\n    return `${days}d ${hours}h`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Enhanced Page Header */}\r\n      <AdminPageHeader\r\n        title=\"System Health Monitoring\"\r\n        description=\"Real-time operational metrics and service availability monitoring\"\r\n        count={totalServices}\r\n        countLabel=\"services monitored\"\r\n        status={{\r\n          label: health.status === 'healthy' ? 'System Healthy' : \r\n                health.status === 'degraded' ? 'System Degraded' : 'System Down',\r\n          variant: health.status === 'healthy' ? 'success' : \r\n                  health.status === 'degraded' ? 'warning' : 'error',\r\n          icon: health.status === 'healthy' ? <CheckCircle className=\"h-4 w-4\" /> :\r\n                health.status === 'degraded' ? <AlertTriangle className=\"h-4 w-4\" /> :\r\n                <AlertTriangle className=\"h-4 w-4\" />,\r\n        }}\r\n        actions={\r\n          <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Clock className=\"h-4 w-4\" />\r\n              <span>Uptime: {formatUptime(health.overall.uptime)}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Server className=\"h-4 w-4\" />\r\n              <span>{operationalServices}/{totalServices} operational</span>\r\n            </div>\r\n            {activeAlerts > 0 && (\r\n              <div className=\"flex items-center gap-1 text-red-600\">\r\n                <AlertTriangle className=\"h-4 w-4\" />\r\n                <span>{activeAlerts} alerts</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        }\r\n      />\r\n\r\n      {/* System Health Display */}\r\n      <SystemHealthDisplay health={health} />\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Loading skeleton for system health page\r\n */\r\nfunction SystemHealthSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header skeleton */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"space-y-2\">\r\n            <div className=\"h-8 w-64 bg-gray-200 rounded animate-pulse\" />\r\n            <div className=\"h-4 w-96 bg-gray-200 rounded animate-pulse\" />\r\n          </div>\r\n          <div className=\"h-10 w-32 bg-gray-200 rounded animate-pulse\" />\r\n        </div>\r\n        \r\n        {/* Stats skeleton */}\r\n        <div className=\"grid gap-4 md:grid-cols-3\">\r\n          {[1, 2, 3].map((i) => (\r\n            <div key={i} className=\"p-6 bg-white rounded-lg shadow\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"h-4 w-24 bg-gray-200 rounded animate-pulse\" />\r\n                <div className=\"h-8 w-16 bg-gray-200 rounded animate-pulse\" />\r\n                <div className=\"h-3 w-32 bg-gray-200 rounded animate-pulse\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content skeleton */}\r\n      <div className=\"space-y-6\">\r\n        <div className=\"h-64 bg-gray-200 rounded-lg animate-pulse\" />\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div key={i} className=\"h-32 bg-gray-200 rounded-lg animate-pulse\" />\r\n          ))}\r\n        </div>\r\n        <div className=\"h-96 bg-gray-200 rounded-lg animate-pulse\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * System health monitoring page component.\r\n *\r\n * Main page component that wraps the async health content in a Suspense boundary,\r\n * providing loading state while system health data is fetched. Essential for\r\n * real-time operational visibility and proactive incident management.\r\n *\r\n * @returns {JSX.Element} System health page with loading boundary\r\n *\r\n * @security Requires admin role - enforced by parent routes and middleware\r\n * @audit Page access logged for HIPAA compliance\r\n * @compliance HIPAA - System monitoring required for operational oversight\r\n *\r\n * @architecture Server Component with Suspense for async data\r\n * @rendering Server-side data fetch with progressive loading\r\n *\r\n * @example\r\n * ```tsx\r\n * // Accessed via: /admin/monitoring/health\r\n * // Shows loading spinner while fetching system health data\r\n * // Then displays complete health dashboard\r\n * ```\r\n */\r\nexport default function SystemHealthPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        </div>\r\n      }\r\n    >\r\n      <SystemHealthContent />\r\n    </Suspense>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}