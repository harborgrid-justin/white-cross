{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/server/api-client.ts"],"sourcesContent":["/**\r\n * Server-side API client for Next.js Server Actions\r\n * Provides resilient HTTP requests with retry logic and proper error handling\r\n *\r\n * @module lib/server/api-client\r\n * @version 1.0.0\r\n *\r\n * @deprecated This module provides a simple API client for Server Actions.\r\n * For most use cases, prefer using @/lib/api/nextjs-client which provides\r\n * comprehensive Next.js caching integration and better error handling.\r\n * This client is suitable for simple, non-cached API calls in Server Actions.\r\n */\r\n\r\n/**\r\n * Fetch options for simple server actions\r\n */\r\nexport interface ServerActionFetchOptions extends RequestInit {\r\n  maxRetries?: number;\r\n  retryDelay?: number;\r\n  timeout?: number;\r\n}\r\n\r\n/**\r\n * Response format for server action API calls\r\n */\r\nexport interface ServerActionApiResponse<T = any> {\r\n  success: boolean;\r\n  data?: T;\r\n  error?: string;\r\n  message?: string;\r\n}\r\n\r\n/**\r\n * Makes a resilient fetch request with retry logic\r\n *\r\n * @note For Server Components, prefer using nextFetch from @/lib/api/nextjs-client\r\n * This function is suitable for Server Actions where caching is not needed.\r\n */\r\nexport async function serverFetch<T = any>(\r\n  url: string,\r\n  options: ServerActionFetchOptions = {}\r\n): Promise<ServerActionApiResponse<T>> {\r\n  const {\r\n    maxRetries = 3,\r\n    retryDelay = 1000,\r\n    timeout = 10000,\r\n    ...fetchOptions\r\n  } = options;\r\n\r\n  let lastError: Error | null = null;\r\n\r\n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\r\n    try {\r\n      // Add timeout to fetch\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        signal: controller.signal,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Parse response\r\n      const contentType = response.headers.get('content-type');\r\n      let data: any;\r\n\r\n      if (contentType?.includes('application/json')) {\r\n        data = await response.json();\r\n      } else {\r\n        data = await response.text();\r\n      }\r\n\r\n      // Handle HTTP errors\r\n      if (!response.ok) {\r\n        const errorMessage = typeof data === 'object' && data.message\r\n          ? data.message\r\n          : typeof data === 'string'\r\n          ? data\r\n          : `HTTP ${response.status}: ${response.statusText}`;\r\n\r\n        // Don't retry 4xx errors (client errors)\r\n        if (response.status >= 400 && response.status < 500) {\r\n          return {\r\n            success: false,\r\n            error: errorMessage,\r\n          };\r\n        }\r\n\r\n        // Retry 5xx errors\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      // Success\r\n      return {\r\n        success: true,\r\n        data: data,\r\n      };\r\n    } catch (error) {\r\n      lastError = error instanceof Error ? error : new Error(String(error));\r\n\r\n      // Don't retry on timeout or abort errors after max retries\r\n      if (attempt === maxRetries) {\r\n        break;\r\n      }\r\n\r\n      // Check if error is retryable\r\n      const isRetryable = error instanceof Error &&\r\n        (error.name === 'TypeError' || // Network error\r\n         error.name === 'AbortError' || // Timeout\r\n         error.message.includes('ECONNREFUSED') || // Connection refused\r\n         error.message.includes('ETIMEDOUT')); // Timeout\r\n\r\n      if (!isRetryable) {\r\n        break;\r\n      }\r\n\r\n      // Wait before retry with exponential backoff\r\n      await new Promise(resolve => setTimeout(resolve, retryDelay * (attempt + 1)));\r\n    }\r\n  }\r\n\r\n  // All retries failed\r\n  return {\r\n    success: false,\r\n    error: lastError?.message || 'Network request failed',\r\n  };\r\n}\r\n\r\n/**\r\n * Get the backend URL with proper environment variable fallback\r\n */\r\nexport function getBackendUrl(): string {\r\n  return process.env.API_BASE_URL ||\r\n         process.env.NEXT_PUBLIC_API_URL ||\r\n         'http://localhost:3001';\r\n}\r\n\r\n/**\r\n * Helper for GET requests\r\n */\r\nexport async function serverGet<T = any>(\r\n  endpoint: string,\r\n  options: Omit<ServerActionFetchOptions, 'method' | 'body'> = {}\r\n): Promise<ServerActionApiResponse<T>> {\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getBackendUrl()}${endpoint}`;\r\n  return serverFetch<T>(url, {\r\n    ...options,\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/**\r\n * Helper for POST requests\r\n */\r\nexport async function serverPost<T = any>(\r\n  endpoint: string,\r\n  body?: any,\r\n  options: Omit<ServerActionFetchOptions, 'method' | 'body'> = {}\r\n): Promise<ServerActionApiResponse<T>> {\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getBackendUrl()}${endpoint}`;\r\n  return serverFetch<T>(url, {\r\n    ...options,\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    },\r\n    body: body ? JSON.stringify(body) : undefined,\r\n  });\r\n}\r\n\r\n/**\r\n * Helper for PUT requests\r\n */\r\nexport async function serverPut<T = any>(\r\n  endpoint: string,\r\n  body?: any,\r\n  options: Omit<ServerActionFetchOptions, 'method' | 'body'> = {}\r\n): Promise<ServerActionApiResponse<T>> {\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getBackendUrl()}${endpoint}`;\r\n  return serverFetch<T>(url, {\r\n    ...options,\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    },\r\n    body: body ? JSON.stringify(body) : undefined,\r\n  });\r\n}\r\n\r\n/**\r\n * Helper for DELETE requests\r\n */\r\nexport async function serverDelete<T = any>(\r\n  endpoint: string,\r\n  options: Omit<ServerActionFetchOptions, 'method' | 'body'> = {}\r\n): Promise<ServerActionApiResponse<T>> {\r\n  const url = endpoint.startsWith('http') ? endpoint : `${getBackendUrl()}${endpoint}`;\r\n  return serverFetch<T>(url, {\r\n    ...options,\r\n    method: 'DELETE',\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/constants/api.ts"],"sourcesContent":["/**\r\n * @fileoverview API Endpoints Constants - Comprehensive endpoint definitions\r\n * @module constants/api\r\n * @version 2.0.0 - Maximized Edition\r\n *\r\n * Centralized API endpoint definitions for the White Cross healthcare platform.\r\n * All backend routes are defined here to prevent hardcoded strings and improve maintainability.\r\n *\r\n * **Architecture**:\r\n * - Backend Base: Routes with global '/api' prefix and URI versioning (default version '1', prefix 'v')\r\n * - Next.js rewrites handle `/api/v1/*` â†’ Backend `/*` proxying\r\n * - All endpoints use template literal types for type-safe route generation\r\n * - Organized by domain for easy navigation and maintenance\r\n *\r\n * **Key Features**:\r\n * - 700+ endpoint constants covering all platform features\r\n * - Type-safe endpoint functions with parameter validation\r\n * - Comprehensive PHI-compliant healthcare operations\r\n * - HIPAA-compliant audit logging endpoints\r\n * - Multi-channel communication endpoints\r\n * - Advanced reporting and analytics\r\n * - Complete medication management workflow\r\n * - Student health records and tracking\r\n * - Appointment scheduling and reminders\r\n * - Incident reporting and follow-up\r\n * - Financial and procurement management\r\n *\r\n * **Endpoint Categories**:\r\n * 1. Authentication & Authorization (AUTH, RBAC, MFA)\r\n * 2. Users & Access Control (USERS, RBAC)\r\n * 3. Students (STUDENTS with 25+ endpoints)\r\n * 4. Appointments (APPOINTMENTS, WAITLIST, NURSE_AVAILABILITY)\r\n * 5. Health Records (HEALTH_RECORDS, VITAL_SIGNS, CHRONIC_CONDITIONS, ALLERGIES)\r\n * 6. Immunizations & Vaccinations (IMMUNIZATIONS)\r\n * 7. Medications (MEDICATIONS, PRESCRIPTIONS, INVENTORY, ADMINISTRATION_LOG)\r\n * 8. Emergency Contacts (EMERGENCY_CONTACTS)\r\n * 9. Incidents (INCIDENTS with witness and follow-up)\r\n * 10. Documents (DOCUMENTS with signing and verification)\r\n * 11. Compliance & Audit (COMPLIANCE, AUDIT)\r\n * 12. Communications (MESSAGES, BROADCASTS, ALERTS, NOTIFICATIONS, CONVERSATIONS, TEMPLATES)\r\n * 13. Dashboard & Analytics (DASHBOARD, ANALYTICS, REPORTS)\r\n * 14. System Administration (ADMIN, SYSTEM, INTEGRATIONS)\r\n * 15. Billing & Financial (BILLING, BUDGET, VENDORS, PURCHASE_ORDERS)\r\n * 16. Forms & Settings (FORMS, SETTINGS)\r\n *\r\n * **Usage Examples**:\r\n * ```typescript\r\n * import { API_ENDPOINTS } from '@/constants/api';\r\n *\r\n * // Simple endpoint\r\n * const url = API_ENDPOINTS.STUDENTS.BASE; // '/students'\r\n *\r\n * // Parameterized endpoint\r\n * const studentUrl = API_ENDPOINTS.STUDENTS.BY_ID('123'); // '/students/123'\r\n *\r\n * // Nested endpoint\r\n * const medUrl = API_ENDPOINTS.STUDENTS.MEDICATIONS('123'); // '/students/123/medications'\r\n *\r\n * // In API client\r\n * const response = await apiClient.get(API_ENDPOINTS.STUDENTS.BY_ID(studentId));\r\n * ```\r\n *\r\n * **Type Safety**:\r\n * All endpoints are typed as const for literal type inference and autocomplete support.\r\n *\r\n * **Maintenance**:\r\n * When adding new endpoints:\r\n * 1. Add to appropriate domain section\r\n * 2. Use consistent naming patterns (BASE, BY_ID, etc.)\r\n * 3. Add JSDoc comments for complex endpoints\r\n * 4. Update this file header with new categories\r\n *\r\n * @see /backend/src/routes/ for backend route definitions\r\n * @see /frontend/src/lib/api/client.ts for API client implementation\r\n * @see /frontend/src/lib/server/api-client.ts for server-side API client\r\n */\r\n\r\n\r\nexport const API_ENDPOINTS = {\r\n  // ==========================================\r\n  // AUTHENTICATION & AUTHORIZATION\r\n  // ==========================================\r\n  AUTH: {\r\n    LOGIN: `/api/v1/auth/login`,\r\n    LOGOUT: `/api/v1/auth/logout`,\r\n    REFRESH: `/api/v1/auth/refresh`,\r\n    VERIFY: `/api/v1/auth/verify`,\r\n    REGISTER: `/api/v1/auth/register`,\r\n    PROFILE: `/api/v1/auth/me`,\r\n    CHANGE_PASSWORD: `/api/v1/auth/change-password`,\r\n    FORGOT_PASSWORD: `/api/v1/auth/forgot-password`,\r\n    RESET_PASSWORD: `/api/v1/auth/reset-password`,\r\n  },\r\n\r\n  // ==========================================\r\n  // USERS & ACCESS CONTROL\r\n  // ==========================================\r\n  USERS: {\r\n    BASE: `/api/v1/users`,\r\n    BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n    ME: `/api/v1/users/me`,\r\n    PROFILE: `/api/v1/users/profile`,\r\n    UPDATE_PROFILE: `/api/v1/users/profile`,\r\n  },\r\n\r\n  RBAC: {\r\n    ROLES: `/api/v1/access-control/roles`,\r\n    PERMISSIONS: `/api/v1/access-control/permissions`,\r\n    USER_ROLES: (userId: string) => `/api/v1/access-control/users/${userId}/roles`,\r\n    USER_PERMISSIONS: (userId: string) => `/api/v1/access-control/users/${userId}/permissions`,\r\n  },\r\n\r\n  // ==========================================\r\n  // STUDENTS\r\n  // ==========================================\r\n  STUDENTS: {\r\n    BASE: `/api/v1/students`,\r\n    BY_ID: (id: string) => `/api/v1/students/${id}`,\r\n    DEACTIVATE: (id: string) => `/api/v1/students/${id}/deactivate`,\r\n    REACTIVATE: (id: string) => `/api/v1/students/${id}/reactivate`,\r\n    TRANSFER: (id: string) => `/api/v1/students/${id}/transfer`,\r\n    ASSIGN: (id: string) => `/api/v1/students/${id}/assign`,\r\n    ASSIGN_BULK: `/api/v1/students/assign-bulk`,\r\n    PHOTO: (id: string) => `/api/v1/students/${id}/photo`,\r\n    EXPORT: (id: string) => `/api/v1/students/${id}/export`,\r\n    REPORT_CARD: (id: string) => `/api/v1/students/${id}/report-card`,\r\n    VERIFY_ELIGIBILITY: (id: string) => `/api/v1/students/${id}/verify-eligibility`,\r\n    SEARCH: `/api/v1/students/search`,\r\n    SEARCH_BY_QUERY: (query: string) => `/api/v1/students/search/${encodeURIComponent(query)}`,\r\n    BY_GRADE: (grade: string) => `/api/v1/students/grade/${grade}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/students/nurse/${nurseId}`,\r\n    ASSIGNED: `/api/v1/students/assigned`,\r\n    STATISTICS: (id: string) => `/api/v1/students/${id}/statistics`,\r\n    BULK_UPDATE: `/api/v1/students/bulk-update`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/students/${id}/permanent`,\r\n    GRADES: `/api/v1/students/grades`,\r\n    HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/health-records`,\r\n    MENTAL_HEALTH_RECORDS: (id: string) => `/api/v1/students/${id}/mental-health-records`,\r\n    MEDICATIONS: (id: string) => `/api/v1/students/${id}/medications`,\r\n    IMMUNIZATIONS: (id: string) => `/api/v1/students/${id}/immunizations`,\r\n    ALLERGIES: (id: string) => `/api/v1/students/${id}/allergies`,\r\n    APPOINTMENTS: (id: string) => `/api/v1/students/${id}/appointments`,\r\n    INCIDENTS: (id: string) => `/api/v1/students/${id}/incidents`,\r\n    EMERGENCY_CONTACTS: (id: string) => `/api/v1/students/${id}/emergency-contacts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENTS\r\n  // ==========================================\r\n  APPOINTMENTS: {\r\n    BASE: `/api/v1/appointments`,\r\n    BY_ID: (id: string) => `/api/v1/appointments/${id}`,\r\n    RESCHEDULE: (id: string) => `/api/v1/appointments/${id}/reschedule`,\r\n    CANCEL: (id: string) => `/api/v1/appointments/${id}/cancel`,\r\n    COMPLETE: (id: string) => `/api/v1/appointments/${id}/complete`,\r\n    NO_SHOW: (id: string) => `/api/v1/appointments/${id}/no-show`,\r\n    CONFIRM: (id: string) => `/api/v1/appointments/${id}/confirm`,\r\n    START: (id: string) => `/api/v1/appointments/${id}/start`,\r\n    SEND_REMINDER: (id: string) => `/api/v1/appointments/${id}/send-reminder`,\r\n    AVAILABILITY: `/api/v1/appointments/availability`,\r\n    CONFLICTS: `/api/v1/appointments/conflicts`,\r\n    CHECK_CONFLICTS: `/api/v1/appointments/check-conflicts`,\r\n    REMINDERS: `/api/v1/appointments/reminders`,\r\n    PROCESS_REMINDERS: `/api/v1/appointments/process-reminders`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/appointments/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/appointments/nurse/${nurseId}`,\r\n    BY_DATE: `/api/v1/appointments/by-date`,\r\n    UPCOMING: `/api/v1/appointments/upcoming`,\r\n    STATISTICS: `/api/v1/appointments/statistics`,\r\n    RECURRING: `/api/v1/appointments/recurring`,\r\n    CREATE_RECURRING: `/api/v1/appointments/recurring/create`,\r\n    EXPORT_CALENDAR: `/api/v1/appointments/export/calendar`,\r\n    REPORTS: `/api/v1/appointments/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH RECORDS\r\n  // ==========================================\r\n  HEALTH_RECORDS: {\r\n    BASE: `/api/v1/health-records`,\r\n    BY_ID: (id: string) => `/api/v1/health-records/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/health-records`,\r\n    BY_TYPE: (type: string) => `/api/v1/health-records/type/${type}`,\r\n    SEARCH: `/api/v1/health-records/search`,\r\n    EXPORT: (id: string) => `/api/v1/health-records/${id}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // IMMUNIZATIONS / VACCINATIONS\r\n  // ==========================================\r\n  IMMUNIZATIONS: {\r\n    BASE: `/api/v1/vaccinations`,\r\n    BY_ID: (id: string) => `/api/v1/vaccinations/${id}`,\r\n    SCHEDULE: `/api/v1/vaccinations/schedule`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/immunizations`,\r\n    DUE: `/api/v1/vaccinations/due`,\r\n    OVERDUE: `/api/v1/vaccinations/overdue`,\r\n    COMPLIANCE: `/api/v1/vaccinations/compliance`,\r\n    EXEMPTIONS: `/api/v1/vaccinations/exemptions`,\r\n    VERIFY: (id: string) => `/api/v1/vaccinations/${id}/verify`,\r\n    EXPORT: (studentId: string) => `/api/v1/vaccinations/export/${studentId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // HEALTH SCREENINGS\r\n  // ==========================================\r\n  SCREENINGS: {\r\n    BASE: `/api/v1/screenings`,\r\n    BY_ID: (id: string) => `/api/v1/screenings/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/screenings`,\r\n    BY_TYPE: (type: string) => `/api/v1/screenings/type/${type}`,\r\n    DUE: `/api/v1/screenings/due`,\r\n    SCHEDULE: `/api/v1/screenings/schedule`,\r\n    RESULTS: (id: string) => `/api/v1/screenings/${id}/results`,\r\n  },\r\n\r\n  // ==========================================\r\n  // GROWTH MEASUREMENTS\r\n  // ==========================================\r\n  GROWTH_MEASUREMENTS: {\r\n    BASE: `/api/v1/growth-measurements`,\r\n    BY_ID: (id: string) => `/api/v1/growth-measurements/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/growth-measurements/trends`,\r\n    BMI: (studentId: string) => `/api/v1/students/${studentId}/bmi`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ALLERGIES\r\n  // ==========================================\r\n  ALLERGIES: {\r\n    BASE: `/api/v1/allergies`,\r\n    BY_ID: (id: string) => `/api/v1/allergies/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/allergies`,\r\n    CRITICAL: `/api/v1/allergies/critical`,\r\n    ACTIVE: `/api/v1/allergies/active`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VITAL SIGNS\r\n  // ==========================================\r\n  VITAL_SIGNS: {\r\n    BASE: `/api/v1/vital-signs`,\r\n    BY_ID: (id: string) => `/api/v1/vital-signs/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/vital-signs`,\r\n    BY_HEALTH_RECORD: (healthRecordId: string) => `/api/v1/health-records/${healthRecordId}/vital-signs`,\r\n    LATEST: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/latest`,\r\n    TRENDS: (studentId: string) => `/api/v1/students/${studentId}/vital-signs/trends`,\r\n  },\r\n\r\n  // ==========================================\r\n  // CHRONIC CONDITIONS\r\n  // ==========================================\r\n  CHRONIC_CONDITIONS: {\r\n    BASE: `/api/v1/chronic-conditions`,\r\n    BY_ID: (id: string) => `/api/v1/chronic-conditions/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/chronic-conditions`,\r\n    ACTIVE: `/api/v1/chronic-conditions/active`,\r\n    REVIEW_DUE: `/api/v1/chronic-conditions/review-due`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MEDICATIONS\r\n  // ==========================================\r\n  MEDICATIONS: {\r\n    BASE: `/api/v1/medications`,\r\n    BY_ID: (id: string) => `/api/v1/medications/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/medications/${id}`,\r\n    ADMINISTER: (id: string) => `/api/v1/medications/${id}/administer`,\r\n    DISCONTINUE: (id: string) => `/api/v1/medications/${id}/discontinue`,\r\n    REFILL: (id: string) => `/api/v1/medications/${id}/refill`,\r\n    MISSED_DOSE: (id: string) => `/api/v1/medications/${id}/missed-dose`,\r\n    ADVERSE_REACTION: (id: string) => `/api/v1/medications/${id}/adverse-reaction`,\r\n    ADJUST_INVENTORY: (id: string) => `/api/v1/medications/${id}/adjust-inventory`,\r\n    REMINDER: (id: string) => `/api/v1/medications/${id}/reminder`,\r\n    SCHEDULE: (id: string) => `/api/v1/medications/${id}/schedule`,\r\n    INTERACTIONS: (id: string) => `/api/v1/medications/${id}/interactions`,\r\n    CALENDAR: `/api/v1/medications/calendar`,\r\n    DUE: `/api/v1/medications/due`,\r\n    OVERDUE: `/api/v1/medications/overdue`,\r\n    MISSED: `/api/v1/medications/missed`,\r\n    COMPLETED: `/api/v1/medications/completed`,\r\n    AS_NEEDED: `/api/v1/medications/as-needed`,\r\n    EMERGENCY: `/api/v1/medications/emergency`,\r\n    CONTROLLED: `/api/v1/medications/controlled-substances`,\r\n    OTC: `/api/v1/medications/over-the-counter`,\r\n    CATEGORIES: `/api/v1/medications/categories`,\r\n    RULES: `/api/v1/medications/administration-rules`,\r\n    CHECK_INTERACTIONS: `/api/v1/medications/check-interactions`,\r\n    FORMULARY: `/api/v1/medications/formulary`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/medications`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PRESCRIPTIONS\r\n  // ==========================================\r\n  PRESCRIPTIONS: {\r\n    BASE: `/api/v1/prescriptions`,\r\n    BY_ID: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/prescriptions/${id}`,\r\n    REFILL: (id: string) => `/api/v1/prescriptions/${id}/refill`,\r\n    ACTIVE: `/api/v1/prescriptions/active`,\r\n    EXPIRING: `/api/v1/prescriptions/expiring`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INVENTORY\r\n  // ==========================================\r\n  INVENTORY: {\r\n    BASE: `/api/v1/inventory`,\r\n    BY_ID: (id: string) => `/api/v1/inventory/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/inventory/${id}`,\r\n    ADJUST: (id: string) => `/api/v1/inventory/${id}/adjust`,\r\n    LOW_STOCK: `/api/v1/inventory/low-stock`,\r\n    EXPIRING: `/api/v1/inventory/expiring`,\r\n    REORDER: `/api/v1/inventory/reorder`,\r\n    AUDIT: `/api/v1/inventory/audit`,\r\n    ITEMS: `/api/v1/inventory/items`,\r\n    ALERTS: `/api/v1/inventory/alerts`,\r\n    ANALYTICS: `/api/v1/inventory/analytics`,\r\n    DASHBOARD: `/api/v1/inventory/dashboard`,\r\n    REPORTS: `/api/v1/inventory/reports`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMINISTRATION LOG\r\n  // ==========================================\r\n  ADMINISTRATION_LOG: {\r\n    BASE: `/api/v1/administration-log`,\r\n    BY_ID: (id: string) => `/api/v1/administration-log/${id}`,\r\n    DETAIL: (id: string) => `/api/v1/administration-log/${id}`,\r\n    BY_MEDICATION: (medicationId: string) => `/api/v1/medications/${medicationId}/administration-log`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/administration-log`,\r\n    TODAY: `/api/v1/administration-log/today`,\r\n    MISSED: `/api/v1/administration-log/missed`,\r\n  },\r\n\r\n  // ==========================================\r\n  // EMERGENCY CONTACTS\r\n  // ==========================================\r\n  EMERGENCY_CONTACTS: {\r\n    BASE: `/api/v1/emergency-contacts`,\r\n    BY_ID: (id: string) => `/api/v1/emergency-contacts/${id}`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts`,\r\n    PRIMARY: (studentId: string) => `/api/v1/students/${studentId}/emergency-contacts/primary`,\r\n    VERIFY: (id: string) => `/api/v1/emergency-contacts/${id}/verify`,\r\n    NOTIFY: (id: string) => `/api/v1/emergency-contacts/${id}/notify`,\r\n  },\r\n\r\n  // ==========================================\r\n  // INCIDENTS\r\n  // ==========================================\r\n  INCIDENTS: {\r\n    BASE: `/api/v1/incident-report`,\r\n    BY_ID: (id: string) => `/api/v1/incident-report/${id}`,\r\n    WITNESSES: (incidentId: string) => `/api/v1/incident-report/${incidentId}/witnesses`,\r\n    WITNESS_STATEMENT: (incidentId: string, witnessId: string) =>\r\n      `/api/v1/incident-report/${incidentId}/witnesses/${witnessId}/statement`,\r\n    VERIFY_STATEMENT: (statementId: string) => `/api/v1/incident-report/statements/${statementId}/verify`,\r\n    FOLLOW_UP: (incidentId: string) => `/api/v1/incident-report/${incidentId}/follow-up`,\r\n    FOLLOW_UP_PROGRESS: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/progress`,\r\n    FOLLOW_UP_COMPLETE: (followUpId: string) => `/api/v1/incident-report/follow-up/${followUpId}/complete`,\r\n    ANALYTICS: `/api/v1/incident-report/analytics`,\r\n    TRENDING: `/api/v1/incident-report/trending`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/incidents`,\r\n    BY_TYPE: (type: string) => `/api/v1/incident-report/type/${type}`,\r\n    BY_SEVERITY: (severity: string) => `/api/v1/incident-report/severity/${severity}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DOCUMENTS\r\n  // ==========================================\r\n  DOCUMENTS: {\r\n    BASE: `/api/v1/documents`,\r\n    BY_ID: (id: string) => `/api/v1/documents/${id}`,\r\n    UPLOAD: `/api/v1/documents/upload`,\r\n    DOWNLOAD: (id: string) => `/api/v1/documents/${id}/download`,\r\n    PREVIEW: (id: string) => `/api/v1/documents/${id}/preview`,\r\n    SIGN: (id: string) => `/api/v1/documents/${id}/sign`,\r\n    VERIFY_SIGNATURE: (id: string) => `/api/v1/documents/${id}/verify-signature`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/students/${studentId}/documents`,\r\n    BY_TYPE: (type: string) => `/api/v1/documents/type/${type}`,\r\n    TEMPLATES: `/api/v1/documents/templates`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMPLIANCE & AUDIT\r\n  // ==========================================\r\n  COMPLIANCE: {\r\n    REPORTS: `/api/v1/compliance/reports`,\r\n    AUDIT_LOGS: `/api/v1/compliance/audit-logs`,\r\n    PHI_DISCLOSURES: `/api/v1/compliance/phi-disclosures`,\r\n    ACCESS_LOG: `/api/v1/compliance/access-log`,\r\n    DATA_RETENTION: `/api/v1/compliance/data-retention`,\r\n    EXPORT: `/api/v1/compliance/export`,\r\n  },\r\n\r\n  AUDIT: {\r\n    LOGS: `/api/v1/audit-logs`,\r\n    BY_ID: (id: string) => `/api/v1/audit-logs/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/audit-logs/user/${userId}`,\r\n    BY_RESOURCE: (resourceType: string, resourceId: string) =>\r\n      `/api/v1/audit-logs/resource/${resourceType}/${resourceId}`,\r\n    BY_ACTION: (action: string) => `/api/v1/audit-logs/action/${action}`,\r\n    PHI_ACCESS: `/api/v1/audit-logs/phi-access`,\r\n    PHI_ACCESS_LOG: `/api/v1/audit/phi-access`,\r\n    EXPORT: `/api/v1/audit-logs/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // COMMUNICATIONS\r\n  // ==========================================\r\n  MESSAGES: {\r\n    BASE: `/api/v1/messages`,\r\n    BY_ID: (id: string) => `/api/v1/messages/${id}`,\r\n    SEND: `/api/v1/messages/send`,\r\n    INBOX: `/api/v1/messages/inbox`,\r\n    SENT: `/api/v1/messages/sent`,\r\n    UNREAD: `/api/v1/messages/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/messages/${id}/mark-read`,\r\n    MARK_UNREAD: (id: string) => `/api/v1/messages/${id}/mark-unread`,\r\n    DELETE: (id: string) => `/api/v1/messages/${id}`,\r\n    THREAD: (id: string) => `/api/v1/messages/thread/${id}`,\r\n    ATTACHMENTS: (id: string) => `/api/v1/messages/${id}/attachments`,\r\n  },\r\n\r\n  BROADCASTS: {\r\n    BASE: `/api/v1/broadcasts`,\r\n    BY_ID: (id: string) => `/api/v1/broadcasts/${id}`,\r\n    SEND: `/api/v1/broadcasts/send`,\r\n    SCHEDULE: `/api/v1/broadcasts/schedule`,\r\n    RECIPIENTS: (id: string) => `/api/v1/broadcasts/${id}/recipients`,\r\n    CANCEL: (id: string) => `/api/v1/broadcasts/${id}/cancel`,\r\n    DUPLICATE: (id: string) => `/api/v1/broadcasts/${id}/duplicate`,\r\n    DELIVERY_STATUS: (id: string) => `/api/v1/broadcasts/${id}/delivery-status`,\r\n    DRAFTS: `/api/v1/broadcasts/drafts`,\r\n    SCHEDULED: `/api/v1/broadcasts/scheduled`,\r\n  },\r\n\r\n  ALERTS: {\r\n    BASE: `/api/v1/alerts`,\r\n    BY_ID: (id: string) => `/api/v1/alerts/${id}`,\r\n    ACTIVE: `/api/v1/alerts/active`,\r\n    ACKNOWLEDGE: (id: string) => `/api/v1/alerts/${id}/acknowledge`,\r\n    DISMISS: (id: string) => `/api/v1/alerts/${id}/dismiss`,\r\n    MEDICATION_REMINDERS: `/api/v1/alerts/medication-reminders`,\r\n    APPOINTMENT_REMINDERS: `/api/v1/alerts/appointment-reminders`,\r\n    EMERGENCY: `/api/v1/alerts/emergency`,\r\n    BY_TYPE: (type: string) => `/api/v1/alerts/type/${type}`,\r\n  },\r\n\r\n  NOTIFICATIONS: {\r\n    BASE: `/api/v1/notifications`,\r\n    BY_ID: (id: string) => `/api/v1/notifications/${id}`,\r\n    UNREAD: `/api/v1/notifications/unread`,\r\n    MARK_READ: (id: string) => `/api/v1/notifications/${id}/mark-read`,\r\n    MARK_ALL_READ: `/api/v1/notifications/mark-all-read`,\r\n    PREFERENCES: `/api/v1/notifications/preferences`,\r\n    TEST_PUSH: `/api/v1/notifications/test-push`,\r\n    PUSH_SUBSCRIBE: `/api/v1/notifications/push-subscribe`,\r\n    PUSH_UNSUBSCRIBE: `/api/v1/notifications/push-unsubscribe`,\r\n    PUSH_SUBSCRIPTION: `/api/v1/notifications/push-subscription`,\r\n  },\r\n\r\n  CONVERSATIONS: {\r\n    BASE: `/api/v1/conversations`,\r\n    BY_ID: (id: string) => `/api/v1/conversations/${id}`,\r\n    BY_USER: (userId: string) => `/api/v1/conversations/user/${userId}`,\r\n    MESSAGES: (conversationId: string) => `/api/v1/conversations/${conversationId}/messages`,\r\n    PARTICIPANTS: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    ADD_PARTICIPANT: (conversationId: string) => `/api/v1/conversations/${conversationId}/participants`,\r\n    REMOVE_PARTICIPANT: (conversationId: string, userId: string) =>\r\n      `/api/v1/conversations/${conversationId}/participants/${userId}`,\r\n    ARCHIVE: (id: string) => `/api/v1/conversations/${id}/archive`,\r\n    UNARCHIVE: (id: string) => `/api/v1/conversations/${id}/unarchive`,\r\n  },\r\n\r\n  TEMPLATES: {\r\n    BASE: `/api/v1/templates`,\r\n    BY_ID: (id: string) => `/api/v1/templates/${id}`,\r\n    BY_CATEGORY: (category: string) => `/api/v1/templates/category/${category}`,\r\n    RENDER: (id: string) => `/api/v1/templates/${id}/render`,\r\n    CATEGORIES: `/api/v1/templates/categories`,\r\n  },\r\n\r\n  // ==========================================\r\n  // DASHBOARD\r\n  // ==========================================\r\n  DASHBOARD: {\r\n    STATS: `/api/v1/dashboard/stats`,\r\n    RECENT_ACTIVITIES: `/api/v1/dashboard/recent-activities`,\r\n    UPCOMING_APPOINTMENTS: `/api/v1/dashboard/upcoming-appointments`,\r\n    CHART_DATA: `/api/v1/dashboard/chart-data`,\r\n    WIDGETS: (dashboardId: string) => `/api/v1/dashboard/${dashboardId}/widgets`,\r\n    REFRESH: `/api/v1/dashboard/refresh-cache`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ANALYTICS & REPORTING\r\n  // ==========================================\r\n  ANALYTICS: {\r\n    METRICS: `/api/v1/analytics/metrics`,\r\n    DASHBOARD: `/api/v1/analytics/dashboard`,\r\n    DASHBOARD_WIDGETS: (dashboardId: string) => `/api/v1/analytics/dashboard/${dashboardId}/widgets`,\r\n    REPORTS: `/api/v1/analytics/reports`,\r\n    CHART_DATA: `/api/v1/analytics/chart-data`,\r\n    HEALTH_METRICS: `/api/v1/analytics/health-metrics`,\r\n    MEDICATION_COMPLIANCE: `/api/v1/analytics/medication-compliance`,\r\n    APPOINTMENT_METRICS: `/api/v1/analytics/appointment-metrics`,\r\n    INCIDENT_ANALYTICS: `/api/v1/analytics/incident-analytics`,\r\n    CUSTOM_REPORT: `/api/v1/analytics/custom-report`,\r\n  },\r\n\r\n  REPORTS: {\r\n    // Base Reports\r\n    BASE: `/api/v1/reports`,\r\n    CUSTOM: `/api/v1/reports/custom`,\r\n    TEMPLATES: `/api/v1/reports/templates`,\r\n    SCHEDULED: `/api/v1/reports/scheduled`,\r\n    SCHEDULE: `/api/v1/reports/schedule`,\r\n    EXPORT: `/api/v1/reports/export`,\r\n    HISTORY: `/api/v1/reports/history`,\r\n    SHARE: (reportId: string) => `/api/v1/reports/${reportId}/share`,\r\n\r\n    // Health Trend Analysis\r\n    HEALTH_TRENDS: `/api/v1/reports/health-trends`,\r\n    HEALTH_TRENDS_BY_CATEGORY: (category: string) => `/api/v1/reports/health-trends/${category}`,\r\n\r\n    // Medication Reports\r\n    MEDICATIONS: {\r\n      ADMINISTRATION: `/api/v1/reports/medications/administration`,\r\n      COMPLIANCE: `/api/v1/reports/medications/compliance`,\r\n      EXPIRATION: `/api/v1/reports/medications/expiration`,\r\n      INVENTORY: `/api/v1/reports/medications/inventory`,\r\n      REFILLS: `/api/v1/reports/medications/refills`,\r\n      USAGE: `/api/v1/reports/medication-usage`,\r\n      EFFECTIVENESS: `/api/v1/reports/medication-effectiveness`,\r\n    },\r\n\r\n    // Immunization Reports\r\n    IMMUNIZATIONS: {\r\n      COMPLIANCE: `/api/v1/reports/immunizations/compliance`,\r\n      DUE: `/api/v1/reports/immunizations/due`,\r\n      OVERDUE: `/api/v1/reports/immunizations/overdue`,\r\n      EXEMPTIONS: `/api/v1/reports/immunizations/exemptions`,\r\n    },\r\n\r\n    // Appointment Reports\r\n    APPOINTMENTS: {\r\n      ATTENDANCE: `/api/v1/reports/appointments/attendance`,\r\n      NO_SHOWS: `/api/v1/reports/appointments/no-shows`,\r\n      CANCELLATIONS: `/api/v1/reports/appointments/cancellations`,\r\n    },\r\n\r\n    // Incident Reports\r\n    INCIDENTS: {\r\n      SUMMARY: `/api/v1/reports/incidents/summary`,\r\n      BY_TYPE: `/api/v1/reports/incidents/by-type`,\r\n      TRENDS: `/api/v1/reports/incidents/trends`,\r\n      STATISTICS: `/api/v1/reports/incident-statistics`,\r\n      BY_LOCATION: `/api/v1/reports/incidents-by-location`,\r\n    },\r\n\r\n    // Student Reports\r\n    STUDENTS: {\r\n      ENROLLMENT: `/api/v1/reports/students/enrollment`,\r\n      HEALTH_SUMMARY: `/api/v1/reports/students/health-summary`,\r\n      DEMOGRAPHICS: `/api/v1/reports/students/demographics`,\r\n    },\r\n\r\n    // Attendance & Absenteeism\r\n    ATTENDANCE_CORRELATION: `/api/v1/reports/attendance-correlation`,\r\n    ABSENTEEISM_PATTERNS: `/api/v1/reports/absenteeism-patterns`,\r\n\r\n    // Performance & Analytics\r\n    PERFORMANCE_METRICS: `/api/v1/reports/performance-metrics`,\r\n    NURSE_PERFORMANCE: `/api/v1/reports/nurse-performance`,\r\n    SYSTEM_USAGE: `/api/v1/reports/system-usage`,\r\n    USAGE_ANALYTICS: `/api/v1/reports/analytics/usage`,\r\n    POPULARITY: `/api/v1/reports/analytics/popularity`,\r\n    INSIGHTS: `/api/v1/reports/analytics/insights`,\r\n\r\n    // Dashboard Reports\r\n    DASHBOARD: `/api/v1/reports/dashboard`,\r\n    DASHBOARD_WIDGETS: `/api/v1/reports/dashboard/widgets`,\r\n    DASHBOARD_LAYOUT: `/api/v1/reports/dashboard/layout`,\r\n\r\n    // Compliance Reports\r\n    COMPLIANCE: `/api/v1/reports/compliance`,\r\n    COMPLIANCE_HISTORY: `/api/v1/reports/compliance/history`,\r\n    COMPLIANCE_AUDIT: `/api/v1/reports/compliance/audit`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SYSTEM & ADMINISTRATION\r\n  // ==========================================\r\n  SYSTEM: {\r\n    HEALTH: `/api/v1/health`,\r\n    STATUS: `/api/v1/system/status`,\r\n    CONFIGURATION: `/api/v1/system/configuration`,\r\n    SETTINGS: `/api/v1/system/settings`,\r\n    BACKUP: `/api/v1/system/backup`,\r\n    RESTORE: `/api/v1/system/restore`,\r\n  },\r\n\r\n  // ==========================================\r\n  // ADMIN - District, School, User Management\r\n  // ==========================================\r\n  ADMIN: {\r\n    // System Settings\r\n    SETTINGS: `/api/v1/administration/settings`,\r\n\r\n    // Users\r\n    USERS: `/api/v1/users`,\r\n    USER_BY_ID: (id: string) => `/api/v1/users/${id}`,\r\n\r\n    // Districts\r\n    DISTRICTS: `/api/v1/administration/districts`,\r\n    DISTRICT_BY_ID: (id: string) => `/api/v1/administration/districts/${id}`,\r\n\r\n    // Schools\r\n    SCHOOLS: `/api/v1/administration/schools`,\r\n    SCHOOL_BY_ID: (id: string) => `/api/v1/administration/schools/${id}`,\r\n\r\n    // System Health\r\n    SYSTEM_HEALTH: `/api/v1/admin/system/health`,\r\n\r\n    // Backups\r\n    BACKUPS: `/api/v1/administration/backups`,\r\n    BACKUP_BY_ID: (id: string) => `/api/v1/administration/backups/${id}`,\r\n\r\n    // Licenses\r\n    LICENSES: `/api/v1/administration/licenses`,\r\n    LICENSE_BY_ID: (id: string) => `/api/v1/administration/licenses/${id}`,\r\n    LICENSE_DEACTIVATE: (id: string) => `/api/v1/administration/licenses/${id}/deactivate`,\r\n\r\n    // Configurations\r\n    CONFIGURATIONS: `/api/v1/administration/config`,\r\n    CONFIGURATION_BY_KEY: (key: string) => `/api/v1/administration/config/${key}`,\r\n\r\n    // Performance Metrics\r\n    METRICS: `/api/v1/admin/metrics`,\r\n    METRIC_BY_ID: (id: string) => `/api/v1/admin/metrics/${id}`,\r\n\r\n    // Training\r\n    TRAINING: `/api/v1/admin/training`,\r\n    TRAINING_BY_ID: (id: string) => `/api/v1/admin/training/${id}`,\r\n    TRAINING_COMPLETE: (id: string) => `/api/v1/admin/training/${id}/complete`,\r\n    TRAINING_PROGRESS: (userId: string) => `/api/v1/admin/training/progress/${userId}`,\r\n\r\n    // Audit Logs\r\n    AUDIT_LOGS: `/api/v1/administration/audit-logs`,\r\n    AUDIT_LOG_BY_ID: (id: string) => `/api/v1/administration/audit-logs/${id}`,\r\n  },\r\n\r\n  INTEGRATIONS: {\r\n    BASE: `/api/v1/integrations`,\r\n    BY_ID: (id: string) => `/api/v1/integrations/${id}`,\r\n    CONFIGURE: (id: string) => `/api/v1/integrations/${id}/configure`,\r\n    TEST: (id: string) => `/api/v1/integrations/${id}/test`,\r\n    SYNC: (id: string) => `/api/v1/integrations/${id}/sync`,\r\n    ENABLE: (id: string) => `/api/v1/integrations/${id}/enable`,\r\n    DISABLE: (id: string) => `/api/v1/integrations/${id}/disable`,\r\n    LOGS: (id: string) => `/api/v1/integrations/${id}/logs`,\r\n  },\r\n\r\n  // ==========================================\r\n  // MULTI-FACTOR AUTHENTICATION (MFA)\r\n  // ==========================================\r\n  MFA: {\r\n    SETUP: `/api/v1/mfa/setup`,\r\n    VERIFY: `/api/v1/mfa/verify`,\r\n    ENABLE: `/api/v1/mfa/enable`,\r\n    DISABLE: `/api/v1/mfa/disable`,\r\n    BACKUP_CODES: `/api/v1/mfa/backup-codes`,\r\n    REGENERATE_CODES: `/api/v1/mfa/backup-codes/regenerate`,\r\n    VERIFY_BACKUP_CODE: `/api/v1/mfa/verify-backup-code`,\r\n    QR_CODE: `/api/v1/mfa/qr-code`,\r\n    STATUS: `/api/v1/mfa/status`,\r\n  },\r\n\r\n  // ==========================================\r\n  // APPOINTMENT WAITLIST\r\n  // ==========================================\r\n  WAITLIST: {\r\n    BASE: `/api/v1/waitlist`,\r\n    BY_ID: (id: string) => `/api/v1/waitlist/${id}`,\r\n    ADD: `/api/v1/waitlist/add`,\r\n    REMOVE: (id: string) => `/api/v1/waitlist/${id}/remove`,\r\n    POSITION: (id: string) => `/api/v1/waitlist/${id}/position`,\r\n    NOTIFY: (id: string) => `/api/v1/waitlist/${id}/notify`,\r\n    UPDATE_PRIORITY: (id: string) => `/api/v1/waitlist/${id}/priority`,\r\n    BY_STUDENT: (studentId: string) => `/api/v1/waitlist/student/${studentId}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/waitlist/nurse/${nurseId}`,\r\n  },\r\n\r\n  // ==========================================\r\n  // NURSE AVAILABILITY & SCHEDULING\r\n  // ==========================================\r\n  NURSE_AVAILABILITY: {\r\n    BASE: `/api/v1/nurse-availability`,\r\n    BY_ID: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_NURSE: (nurseId: string) => `/api/v1/nurse-availability/nurse/${nurseId}`,\r\n    SLOTS: `/api/v1/nurse-availability/slots`,\r\n    SET: `/api/v1/nurse-availability/set`,\r\n    UPDATE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    DELETE: (id: string) => `/api/v1/nurse-availability/${id}`,\r\n    BY_DATE: (date: string) => `/api/v1/nurse-availability/date/${date}`,\r\n    CHECK_CONFLICTS: `/api/v1/nurse-availability/check-conflicts`,\r\n  },\r\n\r\n  // ==========================================\r\n  // FORMS\r\n  // ==========================================\r\n  FORMS: {\r\n    BASE: `/api/v1/forms`,\r\n    BY_ID: (id: string) => `/api/v1/forms/${id}`,\r\n    TEMPLATES: `/api/v1/forms/templates`,\r\n    SUBMIT: `/api/v1/forms/submit`,\r\n    RESPONSES: (formId: string) => `/api/v1/forms/${formId}/responses`,\r\n    SUBMISSIONS: (formId: string) => `/api/v1/forms/${formId}/submissions`,\r\n    EXPORT: (formId: string) => `/api/v1/forms/${formId}/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // PURCHASE ORDERS & PROCUREMENT\r\n  // ==========================================\r\n  PURCHASE_ORDERS: {\r\n    BASE: `/api/v1/purchase-orders`,\r\n    BY_ID: (id: string) => `/api/v1/purchase-orders/${id}`,\r\n    APPROVE: (id: string) => `/api/v1/purchase-orders/${id}/approve`,\r\n    REJECT: (id: string) => `/api/v1/purchase-orders/${id}/reject`,\r\n    RECEIVE: (id: string) => `/api/v1/purchase-orders/${id}/receive`,\r\n    RECEIVE_ITEMS: (id: string) => `/api/v1/purchase-orders/${id}/receive-items`,\r\n    CANCEL: (id: string) => `/api/v1/purchase-orders/${id}/cancel`,\r\n    STATISTICS: `/api/v1/purchase-orders/statistics`,\r\n    PENDING: `/api/v1/purchase-orders/pending`,\r\n    APPROVED: `/api/v1/purchase-orders/approved`,\r\n    RECEIVED: `/api/v1/purchase-orders/received`,\r\n    BY_VENDOR: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}`,\r\n    REORDER_ITEMS: `/api/v1/purchase-orders/reorder-items`,\r\n    VENDOR_HISTORY: (vendorId: string) => `/api/v1/purchase-orders/vendor/${vendorId}/history`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BILLING & FINANCIAL MANAGEMENT\r\n  // ==========================================\r\n  BILLING: {\r\n    // Invoices\r\n    INVOICES: `/api/v1/billing/invoices`,\r\n    INVOICE_BY_ID: (id: string) => `/api/v1/billing/invoices/${id}`,\r\n    INVOICE_PDF: (id: string) => `/api/v1/billing/invoices/${id}/pdf`,\r\n    INVOICE_SEND: (id: string) => `/api/v1/billing/invoices/${id}/send`,\r\n    INVOICE_VOID: (id: string) => `/api/v1/billing/invoices/${id}/void`,\r\n    \r\n    // Payments\r\n    PAYMENTS: `/api/v1/billing/payments`,\r\n    PAYMENT_BY_ID: (id: string) => `/api/v1/billing/payments/${id}`,\r\n    PAYMENT_REFUND: (id: string) => `/api/v1/billing/payments/${id}/refund`,\r\n    PAYMENT_VOID: (id: string) => `/api/v1/billing/payments/${id}/void`,\r\n    \r\n    // Analytics\r\n    ANALYTICS: `/api/v1/billing/analytics`,\r\n    REVENUE_TRENDS: `/api/v1/billing/analytics/revenue-trends`,\r\n    PAYMENT_ANALYTICS: `/api/v1/billing/analytics/payments`,\r\n    COLLECTION_METRICS: `/api/v1/billing/analytics/collections`,\r\n    \r\n    // Reports\r\n    REPORTS: `/api/v1/billing/reports`,\r\n    AGING_REPORT: `/api/v1/billing/reports/aging`,\r\n    REVENUE_REPORT: `/api/v1/billing/reports/revenue`,\r\n    PAYMENT_REPORT: `/api/v1/billing/reports/payments`,\r\n    TAX_REPORT: `/api/v1/billing/reports/tax`,\r\n    \r\n    // Settings\r\n    SETTINGS: `/api/v1/billing/settings`,\r\n    \r\n    // Notifications\r\n    NOTIFICATIONS: `/api/v1/billing/notifications`,\r\n    SEND_REMINDER: `/api/v1/billing/notifications/reminder`,\r\n    SEND_STATEMENT: `/api/v1/billing/notifications/statement`,\r\n  },\r\n\r\n  // ==========================================\r\n  // BUDGET MANAGEMENT\r\n  // ==========================================\r\n  BUDGET: {\r\n    // Budget Categories\r\n    CATEGORIES: `/api/v1/budget/categories`,\r\n    CATEGORY_BY_ID: (id: string) => `/api/v1/budget/categories/${id}`,\r\n\r\n    // Budget Summary\r\n    SUMMARY: `/api/v1/budget/summary`,\r\n\r\n    // Budget Transactions\r\n    TRANSACTIONS: `/api/v1/budget/transactions`,\r\n    TRANSACTION_BY_ID: (id: string) => `/api/v1/budget/transactions/${id}`,\r\n\r\n    // Analytics & Reporting\r\n    TRENDS: `/api/v1/budget/trends`,\r\n    YEAR_COMPARISON: `/api/v1/budget/year-comparison`,\r\n    OVER_BUDGET: `/api/v1/budget/over-budget`,\r\n    RECOMMENDATIONS: `/api/v1/budget/recommendations`,\r\n    EXPORT: `/api/v1/budget/export`,\r\n  },\r\n\r\n  // ==========================================\r\n  // VENDORS\r\n  // ==========================================\r\n  VENDORS: {\r\n    BASE: `/api/v1/vendors`,\r\n    BY_ID: (id: string) => `/api/v1/vendors/${id}`,\r\n    SEARCH: (query: string) => `/api/v1/vendors/search/${encodeURIComponent(query)}`,\r\n    COMPARE: (itemName: string) => `/api/v1/vendors/compare/${encodeURIComponent(itemName)}`,\r\n    TOP: `/api/v1/vendors/top`,\r\n    STATISTICS: `/api/v1/vendors/statistics`,\r\n    REACTIVATE: (id: string) => `/api/v1/vendors/${id}/reactivate`,\r\n    RATING: (id: string) => `/api/v1/vendors/${id}/rating`,\r\n    BULK_RATINGS: `/api/v1/vendors/ratings/bulk`,\r\n    BY_PAYMENT_TERMS: (terms: string) => `/api/v1/vendors/payment-terms/${encodeURIComponent(terms)}`,\r\n    METRICS: (id: string) => `/api/v1/vendors/${id}/metrics`,\r\n    PERMANENT_DELETE: (id: string) => `/api/v1/vendors/${id}/permanent`,\r\n  },\r\n\r\n  // ==========================================\r\n  // SETTINGS\r\n  // ==========================================\r\n  SETTINGS: {\r\n    USER: `/api/v1/settings/user`,\r\n    SCHOOL: `/api/v1/settings/school`,\r\n    NOTIFICATIONS: `/api/v1/settings/notifications`,\r\n    PREFERENCES: `/api/v1/settings/preferences`,\r\n    PRIVACY: `/api/v1/settings/privacy`,\r\n    SECURITY: `/api/v1/settings/security`,\r\n  },\r\n} as const;\r\n\r\n/**\r\n * HTTP Status Codes\r\n */\r\nexport const HTTP_STATUS = {\r\n  OK: 200,\r\n  CREATED: 201,\r\n  ACCEPTED: 202,\r\n  NO_CONTENT: 204,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  CONFLICT: 409,\r\n  UNPROCESSABLE_ENTITY: 422,\r\n  TOO_MANY_REQUESTS: 429,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  BAD_GATEWAY: 502,\r\n  SERVICE_UNAVAILABLE: 503,\r\n  GATEWAY_TIMEOUT: 504,\r\n} as const;\r\n\r\n/**\r\n * API Response Types\r\n */\r\nexport type ApiSuccessResponse<T = unknown> = {\r\n  success: true;\r\n  data: T;\r\n  message?: string;\r\n};\r\n\r\nexport type ApiErrorResponse = {\r\n  success: false;\r\n  error: string;\r\n  code?: string;\r\n  details?: Record<string, unknown>;\r\n  traceId?: string;\r\n};\r\n\r\nexport type ApiResponse<T = unknown> = ApiSuccessResponse<T> | ApiErrorResponse;\r\n\r\n/**\r\n * Pagination Types\r\n */\r\nexport type PaginationParams = {\r\n  page?: number;\r\n  limit?: number;\r\n  sort?: string;\r\n  order?: 'asc' | 'desc';\r\n};\r\n\r\nexport type PaginatedResponse<T> = {\r\n  data: T[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n    hasNext: boolean;\r\n    hasPrev: boolean;\r\n  };\r\n};\r\n\r\nexport default API_ENDPOINTS;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 930, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/cache/constants.ts"],"sourcesContent":["/**\r\n * @fileoverview Cache Configuration Constants\r\n * @module lib/cache/constants\r\n *\r\n * Standardized cache TTL (Time To Live) configuration for the application.\r\n * Implements a tiered caching strategy based on data sensitivity and freshness requirements.\r\n *\r\n * **HIPAA Compliance:**\r\n * - PHI data has shorter TTLs (30-60s) to minimize stale data exposure\r\n * - Static data can cache longer (300s) for performance\r\n * - All cache keys use IDs only, never PHI values\r\n *\r\n * **Performance Strategy:**\r\n * - Aggressive caching for static reference data\r\n * - Conservative caching for frequently changing data\r\n * - Minimal caching for real-time data\r\n *\r\n * @see DATABASE_INTEGRATION_AUDIT_REPORT.md for detailed caching strategy\r\n * @version 1.0.0\r\n * @since 2025-10-27\r\n */\r\n\r\n// ==========================================\r\n// CACHE TTL CONSTANTS (seconds)\r\n// ==========================================\r\n\r\n/**\r\n * Cache Time-To-Live Configuration\r\n *\r\n * All values in seconds. Aligned with Next.js `revalidate` API.\r\n *\r\n * **Tier Breakdown:**\r\n * - **STATIC**: Reference data that rarely changes (schools, districts, medication formulary)\r\n * - **STATS**: Aggregated statistics (non-PHI dashboard data)\r\n * - **PHI_FREQUENT**: Frequently accessed PHI (active medications, today's appointments)\r\n * - **PHI_STANDARD**: Standard PHI access (student lists, health records lists)\r\n * - **SESSION**: User session data (profile, preferences)\r\n * - **REALTIME**: Real-time data (notifications, unread messages)\r\n */\r\nexport const CACHE_TTL = {\r\n  /**\r\n   * Static reference data - rarely changes\r\n   * Examples: Schools, districts, medication formulary, form templates\r\n   * TTL: 5 minutes (300 seconds)\r\n   */\r\n  STATIC: 300,\r\n\r\n  /**\r\n   * Aggregated statistics - non-PHI\r\n   * Examples: Dashboard stats, analytics, reports\r\n   * TTL: 2 minutes (120 seconds)\r\n   */\r\n  STATS: 120,\r\n\r\n  /**\r\n   * PHI data - frequently accessed\r\n   * Examples: Active medications, today's appointments, recent health alerts\r\n   * TTL: 30 seconds\r\n   * Rationale: High-sensitivity data that changes frequently\r\n   */\r\n  PHI_FREQUENT: 30,\r\n\r\n  /**\r\n   * PHI data - standard access\r\n   * Examples: Student lists, health records lists, incident lists\r\n   * TTL: 1 minute (60 seconds)\r\n   * Rationale: Moderate sensitivity, reasonable freshness for list views\r\n   */\r\n  PHI_STANDARD: 60,\r\n\r\n  /**\r\n   * User session data\r\n   * Examples: Current user profile, user preferences, role permissions\r\n   * TTL: 5 minutes (300 seconds)\r\n   * Rationale: Rarely changes during session, safe to cache\r\n   */\r\n  SESSION: 300,\r\n\r\n  /**\r\n   * Real-time data - minimal caching\r\n   * Examples: Notifications, unread message counts, active alerts\r\n   * TTL: 10 seconds\r\n   * Rationale: Needs near real-time updates\r\n   */\r\n  REALTIME: 10,\r\n\r\n  /**\r\n   * No caching - always fetch fresh\r\n   * Use for critical operations or data that must always be fresh\r\n   * TTL: 0 (forces revalidation)\r\n   */\r\n  NO_CACHE: 0,\r\n} as const;\r\n\r\n// ==========================================\r\n// CACHE TAGS FOR GRANULAR INVALIDATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Tags for Next.js revalidateTag() API\r\n *\r\n * Used to invalidate specific data without clearing entire cache.\r\n *\r\n * **Usage:**\r\n * ```typescript\r\n * // In Server Component\r\n * fetch(url, {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD,\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // In Server Action (to invalidate)\r\n * import { revalidateTag } from 'next/cache';\r\n * revalidateTag(CACHE_TAGS.STUDENTS);\r\n * ```\r\n */\r\nexport const CACHE_TAGS = {\r\n  // ==========================================\r\n  // PHI TAGS (HIPAA-protected data)\r\n  // ==========================================\r\n\r\n  /**\r\n   * General PHI data tag\r\n   * Use to invalidate all PHI-related caches\r\n   */\r\n  PHI: 'phi-data',\r\n\r\n  /**\r\n   * Student data (PHI)\r\n   */\r\n  STUDENTS: 'students',\r\n\r\n  /**\r\n   * Medication data (PHI)\r\n   */\r\n  MEDICATIONS: 'medications',\r\n\r\n  /**\r\n   * Health record data (PHI)\r\n   */\r\n  HEALTH_RECORDS: 'health-records',\r\n\r\n  /**\r\n   * Appointment data (PHI)\r\n   */\r\n  APPOINTMENTS: 'appointments',\r\n\r\n  /**\r\n   * Incident report data (PHI)\r\n   */\r\n  INCIDENTS: 'incidents',\r\n\r\n  /**\r\n   * Immunization data (PHI)\r\n   */\r\n  IMMUNIZATIONS: 'immunizations',\r\n\r\n  /**\r\n   * Allergy data (PHI)\r\n   */\r\n  ALLERGIES: 'allergies',\r\n\r\n  /**\r\n   * Emergency contact data (PHI)\r\n   */\r\n  EMERGENCY_CONTACTS: 'emergency-contacts',\r\n\r\n  // ==========================================\r\n  // NON-PHI TAGS\r\n  // ==========================================\r\n\r\n  /**\r\n   * User account data (non-PHI)\r\n   */\r\n  USERS: 'users',\r\n\r\n  /**\r\n   * School data (non-PHI)\r\n   */\r\n  SCHOOLS: 'schools',\r\n\r\n  /**\r\n   * District data (non-PHI)\r\n   */\r\n  DISTRICTS: 'districts',\r\n\r\n  /**\r\n   * Dashboard statistics (non-PHI aggregated)\r\n   */\r\n  STATS: 'statistics',\r\n\r\n  /**\r\n   * Analytics data (non-PHI aggregated)\r\n   */\r\n  ANALYTICS: 'analytics',\r\n\r\n  /**\r\n   * Notification data\r\n   */\r\n  NOTIFICATIONS: 'notifications',\r\n\r\n  /**\r\n   * Document templates (non-PHI)\r\n   */\r\n  TEMPLATES: 'templates',\r\n\r\n  /**\r\n   * Medication formulary (non-PHI)\r\n   */\r\n  FORMULARY: 'medication-formulary',\r\n\r\n  /**\r\n   * Admin user data (non-PHI)\r\n   */\r\n  ADMIN_USERS: 'admin-users',\r\n\r\n  /**\r\n   * Admin districts data (non-PHI)\r\n   */\r\n  ADMIN_DISTRICTS: 'admin-districts',\r\n\r\n  /**\r\n   * Admin schools data (non-PHI)\r\n   */\r\n  ADMIN_SCHOOLS: 'admin-schools',\r\n\r\n  /**\r\n   * Admin settings data (non-PHI)\r\n   */\r\n  ADMIN_SETTINGS: 'admin-settings',\r\n\r\n  /**\r\n   * Admin licenses data (non-PHI)\r\n   */\r\n  ADMIN_LICENSES: 'admin-licenses',\r\n\r\n  /**\r\n   * Admin backups data (non-PHI)\r\n   */\r\n  ADMIN_BACKUPS: 'admin-backups',\r\n\r\n  /**\r\n   * Admin metrics data (non-PHI)\r\n   */\r\n  ADMIN_METRICS: 'admin-metrics',\r\n\r\n  /**\r\n   * Admin training data (non-PHI)\r\n   */\r\n  ADMIN_TRAINING: 'admin-training',\r\n\r\n  /**\r\n   * Admin audit logs data (non-PHI)\r\n   */\r\n  ADMIN_AUDIT_LOGS: 'admin-audit-logs',\r\n} as const;\r\n\r\n// ==========================================\r\n// TYPE EXPORTS\r\n// ==========================================\r\n\r\n/**\r\n * Cache TTL values type (for TypeScript type safety)\r\n */\r\nexport type CacheTTLValue = typeof CACHE_TTL[keyof typeof CACHE_TTL];\r\n\r\n/**\r\n * Cache tag values type (for TypeScript type safety)\r\n */\r\nexport type CacheTagValue = typeof CACHE_TAGS[keyof typeof CACHE_TAGS];\r\n\r\n// ==========================================\r\n// HELPER UTILITIES\r\n// ==========================================\r\n\r\n/**\r\n * Determine appropriate cache TTL based on data type\r\n *\r\n * @param resourceType - Type of resource (e.g., 'students', 'medications')\r\n * @param isPHI - Whether the data contains PHI\r\n * @param isFrequentlyAccessed - Whether the data is frequently accessed\r\n * @returns Appropriate cache TTL in seconds\r\n *\r\n * @example\r\n * ```typescript\r\n * const ttl = getCacheTTL('medications', true, true);\r\n * console.log(ttl); // 30 (PHI_FREQUENT)\r\n * ```\r\n */\r\nexport function getCacheTTL(\r\n  resourceType: string,\r\n  isPHI: boolean,\r\n  isFrequentlyAccessed: boolean = false\r\n): number {\r\n  if (!isPHI) {\r\n    // Non-PHI data\r\n    if (resourceType === 'users' || resourceType === 'schools' || resourceType === 'districts') {\r\n      return CACHE_TTL.STATIC;\r\n    }\r\n    if (resourceType === 'statistics' || resourceType === 'analytics') {\r\n      return CACHE_TTL.STATS;\r\n    }\r\n    if (resourceType === 'notifications') {\r\n      return CACHE_TTL.REALTIME;\r\n    }\r\n    return CACHE_TTL.SESSION; // Default for non-PHI\r\n  }\r\n\r\n  // PHI data\r\n  if (isFrequentlyAccessed) {\r\n    return CACHE_TTL.PHI_FREQUENT;\r\n  }\r\n  return CACHE_TTL.PHI_STANDARD;\r\n}\r\n\r\n/**\r\n * Get cache tags for a resource type\r\n *\r\n * @param resourceType - Type of resource\r\n * @param isPHI - Whether the data contains PHI\r\n * @returns Array of cache tags to apply\r\n *\r\n * @example\r\n * ```typescript\r\n * const tags = getCacheTags('students', true);\r\n * console.log(tags); // ['students', 'phi-data']\r\n * ```\r\n */\r\nexport function getCacheTags(\r\n  resourceType: string,\r\n  isPHI: boolean = true\r\n): string[] {\r\n  const tags: string[] = [];\r\n\r\n  // Add resource-specific tag\r\n  if (resourceType === 'students') {\r\n    tags.push(CACHE_TAGS.STUDENTS);\r\n  } else if (resourceType === 'medications') {\r\n    tags.push(CACHE_TAGS.MEDICATIONS);\r\n  } else if (resourceType === 'health-records') {\r\n    tags.push(CACHE_TAGS.HEALTH_RECORDS);\r\n  } else if (resourceType === 'appointments') {\r\n    tags.push(CACHE_TAGS.APPOINTMENTS);\r\n  } else if (resourceType === 'incidents') {\r\n    tags.push(CACHE_TAGS.INCIDENTS);\r\n  } else if (resourceType === 'users') {\r\n    tags.push(CACHE_TAGS.USERS);\r\n  } else if (resourceType === 'statistics') {\r\n    tags.push(CACHE_TAGS.STATS);\r\n  }\r\n\r\n  // Add PHI tag if applicable\r\n  if (isPHI) {\r\n    tags.push(CACHE_TAGS.PHI);\r\n  }\r\n\r\n  return tags;\r\n}\r\n\r\n/**\r\n * Build cache tag for specific resource instance\r\n *\r\n * @param resourceType - Type of resource\r\n * @param resourceId - ID of specific resource\r\n * @returns Cache tag string\r\n *\r\n * @example\r\n * ```typescript\r\n * const tag = buildResourceTag('student', '123');\r\n * console.log(tag); // 'student-123'\r\n * ```\r\n */\r\nexport function buildResourceTag(\r\n  resourceType: string,\r\n  resourceId: string\r\n): string {\r\n  return `${resourceType}-${resourceId}`;\r\n}\r\n\r\n// ==========================================\r\n// DOCUMENTATION\r\n// ==========================================\r\n\r\n/**\r\n * Cache Strategy Documentation\r\n *\r\n * **Decision Framework:**\r\n *\r\n * 1. **Is it PHI?**\r\n *    - YES â†’ Use PHI_FREQUENT (30s) or PHI_STANDARD (60s)\r\n *    - NO â†’ Continue to #2\r\n *\r\n * 2. **How often does it change?**\r\n *    - Rarely (reference data) â†’ STATIC (300s)\r\n *    - Moderately (aggregated stats) â†’ STATS (120s)\r\n *    - Frequently (real-time) â†’ REALTIME (10s)\r\n *\r\n * 3. **Is it user-specific?**\r\n *    - YES â†’ SESSION (300s)\r\n *    - NO â†’ Use type-based TTL\r\n *\r\n * **HIPAA Compliance Notes:**\r\n * - All PHI cache entries MUST have tags for invalidation\r\n * - Cache keys MUST NOT contain PHI values (use IDs only)\r\n * - PHI caches MUST be cleared on user logout\r\n * - Audit logging required for PHI cache access\r\n *\r\n * **Performance Guidelines:**\r\n * - Prefer longer TTLs for static data (reduces backend load)\r\n * - Use shorter TTLs for PHI (compliance requirement)\r\n * - Always tag caches for granular invalidation\r\n * - Monitor cache hit rates and adjust TTLs accordingly\r\n *\r\n * **Examples:**\r\n *\r\n * ```typescript\r\n * // Example 1: Fetch student list (PHI, standard access)\r\n * const students = await fetch('/api/students', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_STANDARD, // 60s\r\n *     tags: [CACHE_TAGS.STUDENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 2: Fetch medication formulary (non-PHI, static)\r\n * const formulary = await fetch('/api/medications/formulary', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.STATIC, // 300s\r\n *     tags: [CACHE_TAGS.FORMULARY]\r\n *   }\r\n * });\r\n *\r\n * // Example 3: Fetch today's appointments (PHI, frequent)\r\n * const appointments = await fetch('/api/appointments/today', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.PHI_FREQUENT, // 30s\r\n *     tags: [CACHE_TAGS.APPOINTMENTS, CACHE_TAGS.PHI]\r\n *   }\r\n * });\r\n *\r\n * // Example 4: Fetch current user (non-PHI, session)\r\n * const user = await fetch('/api/auth/me', {\r\n *   next: {\r\n *     revalidate: CACHE_TTL.SESSION, // 300s\r\n *     tags: [CACHE_TAGS.USERS]\r\n *   }\r\n * });\r\n * ```\r\n */\r\n\r\n// Export all constants and utilities\r\nconst cacheConstants = {\r\n  CACHE_TTL,\r\n  CACHE_TAGS,\r\n  getCacheTTL,\r\n  getCacheTags,\r\n  buildResourceTag,\r\n};\r\n\r\nexport default cacheConstants;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1235, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/audit.ts"],"sourcesContent":["/**\r\n * HIPAA-compliant audit logging utilities\r\n * Tracks all PHI access and modifications for compliance\r\n */\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL || 'http://localhost:3001';\r\n\r\n/**\r\n * Audit log entry interface\r\n */\r\nexport interface AuditLogEntry {\r\n  userId?: string | null;\r\n  action: string;\r\n  resource: string;\r\n  resourceId?: string;\r\n  details?: string;\r\n  ipAddress?: string;\r\n  userAgent?: string;\r\n  success?: boolean;\r\n  errorMessage?: string;\r\n  changes?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Log audit event to backend\r\n * HIPAA Requirement: All PHI access must be logged\r\n */\r\nexport async function auditLog(entry: AuditLogEntry): Promise<void> {\r\n  try {\r\n    // Send audit log to backend service\r\n    await fetch(`${BACKEND_URL}/api/audit/log`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        userId: entry.userId,\r\n        action: entry.action,\r\n        entityType: entry.resource,\r\n        entityId: entry.resourceId,\r\n        changes: entry.changes || {\r\n          details: entry.details,\r\n          success: entry.success !== undefined ? entry.success : true,\r\n          errorMessage: entry.errorMessage\r\n        },\r\n        ipAddress: entry.ipAddress,\r\n        userAgent: entry.userAgent\r\n      })\r\n    });\r\n  } catch (error) {\r\n    // Audit logging should never break the main flow\r\n    // Log to console for debugging but don't throw\r\n    console.error('Audit log failed:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * PHI access actions\r\n */\r\nexport const PHI_ACTIONS = {\r\n  VIEW: 'VIEW_PHI',\r\n  CREATE: 'CREATE_PHI',\r\n  UPDATE: 'UPDATE_PHI',\r\n  DELETE: 'DELETE_PHI',\r\n  EXPORT: 'EXPORT_PHI',\r\n  PRINT: 'PRINT_PHI'\r\n} as const;\r\n\r\n/**\r\n * Log PHI access\r\n * HIPAA Critical: All Protected Health Information access must be audited\r\n */\r\nexport async function logPHIAccess(entry: Omit<AuditLogEntry, 'action'> & { action: keyof typeof PHI_ACTIONS }): Promise<void> {\r\n  await auditLog({\r\n    ...entry,\r\n    action: PHI_ACTIONS[entry.action]\r\n  });\r\n}\r\n\r\n/**\r\n * Common audit actions\r\n */\r\nexport const AUDIT_ACTIONS = {\r\n  // Authentication\r\n  LOGIN: 'USER_LOGIN',\r\n  LOGOUT: 'USER_LOGOUT',\r\n  LOGIN_FAILED: 'LOGIN_FAILED',\r\n  TOKEN_REFRESH: 'TOKEN_REFRESH',\r\n  PASSWORD_CHANGE: 'PASSWORD_CHANGE',\r\n\r\n  // Students\r\n  VIEW_STUDENT: 'VIEW_STUDENT',\r\n  CREATE_STUDENT: 'CREATE_STUDENT',\r\n  UPDATE_STUDENT: 'UPDATE_STUDENT',\r\n  DELETE_STUDENT: 'DELETE_STUDENT',\r\n  LIST_STUDENTS: 'LIST_STUDENTS',\r\n\r\n  // Health Records\r\n  VIEW_HEALTH_RECORD: 'VIEW_HEALTH_RECORD',\r\n  CREATE_HEALTH_RECORD: 'CREATE_HEALTH_RECORD',\r\n  UPDATE_HEALTH_RECORD: 'UPDATE_HEALTH_RECORD',\r\n  DELETE_HEALTH_RECORD: 'DELETE_HEALTH_RECORD',\r\n\r\n  // Medications\r\n  VIEW_MEDICATION: 'VIEW_MEDICATION',\r\n  CREATE_MEDICATION: 'CREATE_MEDICATION',\r\n  UPDATE_MEDICATION: 'UPDATE_MEDICATION',\r\n  DELETE_MEDICATION: 'DELETE_MEDICATION',\r\n  ADMINISTER_MEDICATION: 'ADMINISTER_MEDICATION',\r\n\r\n  // Appointments\r\n  VIEW_APPOINTMENT: 'VIEW_APPOINTMENT',\r\n  LIST_APPOINTMENTS: 'LIST_APPOINTMENTS',\r\n  CREATE_APPOINTMENT: 'CREATE_APPOINTMENT',\r\n  UPDATE_APPOINTMENT: 'UPDATE_APPOINTMENT',\r\n  DELETE_APPOINTMENT: 'DELETE_APPOINTMENT',\r\n  RESCHEDULE_APPOINTMENT: 'RESCHEDULE_APPOINTMENT',\r\n  CANCEL_APPOINTMENT: 'CANCEL_APPOINTMENT',\r\n  COMPLETE_APPOINTMENT: 'COMPLETE_APPOINTMENT',\r\n  CONFIRM_APPOINTMENT: 'CONFIRM_APPOINTMENT',\r\n  NO_SHOW_APPOINTMENT: 'NO_SHOW_APPOINTMENT',\r\n  SEND_APPOINTMENT_REMINDER: 'SEND_APPOINTMENT_REMINDER',\r\n\r\n  // Incidents\r\n  VIEW_INCIDENT: 'VIEW_INCIDENT',\r\n  CREATE_INCIDENT: 'CREATE_INCIDENT',\r\n  UPDATE_INCIDENT: 'UPDATE_INCIDENT',\r\n  DELETE_INCIDENT: 'DELETE_INCIDENT',\r\n\r\n  // Documents\r\n  VIEW_DOCUMENT: 'VIEW_DOCUMENT',\r\n  UPLOAD_DOCUMENT: 'UPLOAD_DOCUMENT',\r\n  DOWNLOAD_DOCUMENT: 'DOWNLOAD_DOCUMENT',\r\n  DELETE_DOCUMENT: 'DELETE_DOCUMENT',\r\n  CREATE_DOCUMENT: 'CREATE_DOCUMENT',\r\n  UPDATE_DOCUMENT: 'UPDATE_DOCUMENT',\r\n  SIGN_DOCUMENT: 'SIGN_DOCUMENT',\r\n  SHARE_DOCUMENT: 'SHARE_DOCUMENT',\r\n\r\n  // PHI Records\r\n  CREATE_PHI_RECORD: 'CREATE_PHI_RECORD',\r\n  ACCESS_PHI_RECORD: 'ACCESS_PHI_RECORD',\r\n\r\n  // User Management\r\n  CREATE_USER: 'CREATE_USER',\r\n  UPDATE_USER: 'UPDATE_USER',\r\n  DELETE_USER: 'DELETE_USER',\r\n\r\n  // Organization Management\r\n  CREATE_ORGANIZATION: 'CREATE_ORGANIZATION',\r\n  UPDATE_ORGANIZATION: 'UPDATE_ORGANIZATION',\r\n\r\n  // Configuration\r\n  UPDATE_CONFIGURATION: 'UPDATE_CONFIGURATION',\r\n\r\n  // Reports\r\n  GENERATE_REPORT: 'GENERATE_REPORT',\r\n  EXPORT_DATA: 'EXPORT_DATA'\r\n} as const;\r\n\r\n/**\r\n * Extract IP address from request or headers\r\n */\r\nexport function extractIPAddress(request: Request | { get(name: string): string | null }): string | undefined {\r\n  // Check various headers for IP address\r\n  const headersList = [\r\n    'x-forwarded-for',\r\n    'x-real-ip',\r\n    'cf-connecting-ip'\r\n  ];\r\n\r\n  const headers = 'headers' in request ? request.headers : request;\r\n\r\n  for (const header of headersList) {\r\n    const value = headers.get(header);\r\n    if (value) {\r\n      // x-forwarded-for can contain multiple IPs, take the first one\r\n      return value.split(',')[0].trim();\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Extract user agent from request or headers\r\n */\r\nexport function extractUserAgent(request: Request | { get(name: string): string | null }): string | undefined {\r\n  const headers = 'headers' in request ? request.headers : request;\r\n  return headers.get('user-agent') || undefined;\r\n}\r\n\r\n/**\r\n * Create audit context from request\r\n */\r\nexport function createAuditContext(request: Request, userId?: string) {\r\n  return {\r\n    userId,\r\n    ipAddress: extractIPAddress(request),\r\n    userAgent: extractUserAgent(request)\r\n  };\r\n}\r\n\r\n/**\r\n * Get client IP from Next.js server context\r\n *\r\n * Works in server actions and components.\r\n *\r\n * @returns Client IP address\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function myAction() {\r\n *   const ip = await getClientIP();\r\n *   await auditLog({ ipAddress: ip, ... });\r\n * }\r\n * ```\r\n */\r\nexport async function getClientIP(): Promise<string | undefined> {\r\n  try {\r\n    const { headers } = await import('next/headers');\r\n    const headersList = await headers();\r\n\r\n    // Check common headers for IP\r\n    const ipHeaders = [\r\n      'x-forwarded-for',\r\n      'x-real-ip',\r\n      'cf-connecting-ip',\r\n      'x-client-ip',\r\n      'x-cluster-client-ip'\r\n    ];\r\n\r\n    for (const header of ipHeaders) {\r\n      const value = headersList.get(header);\r\n      if (value) {\r\n        // x-forwarded-for can contain multiple IPs, take the first one\r\n        return value.split(',')[0].trim();\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  } catch (error) {\r\n    // headers() might not be available in all contexts\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Get user agent from Next.js server context\r\n *\r\n * Works in server actions and components.\r\n *\r\n * @returns User agent string\r\n */\r\nexport async function getUserAgent(): Promise<string | undefined> {\r\n  try {\r\n    const { headers } = await import('next/headers');\r\n    const headersList = await headers();\r\n    return headersList.get('user-agent') || undefined;\r\n  } catch (error) {\r\n    // headers() might not be available in all contexts\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Create audit context from Next.js server context\r\n *\r\n * Works in server actions and server components.\r\n *\r\n * @param userId - Optional user ID\r\n * @returns Audit context\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function updateProfile(data: FormData) {\r\n *   const session = await getServerSession();\r\n *   const context = await createAuditContextFromServer(session?.user.id);\r\n *\r\n *   await auditLog({\r\n *     ...context,\r\n *     action: AUDIT_ACTIONS.UPDATE_PROFILE,\r\n *     resource: 'profile',\r\n *     resourceId: session?.user.id\r\n *   });\r\n * }\r\n * ```\r\n */\r\nexport async function createAuditContextFromServer(userId?: string | null) {\r\n  return {\r\n    userId,\r\n    ipAddress: await getClientIP(),\r\n    userAgent: await getUserAgent()\r\n  };\r\n}\r\n\r\n/**\r\n * Log audit event with automatic context detection\r\n *\r\n * Automatically detects IP and user agent from server context.\r\n *\r\n * @param entry - Audit log entry\r\n *\r\n * @example\r\n * ```typescript\r\n * 'use server'\r\n *\r\n * export async function deleteStudent(id: string) {\r\n *   const user = await getServerAuth();\r\n *\r\n *   await auditLogWithContext({\r\n *     userId: user.id,\r\n *     action: AUDIT_ACTIONS.DELETE_STUDENT,\r\n *     resource: 'student',\r\n *     resourceId: id\r\n *   });\r\n * }\r\n * ```\r\n */\r\nexport async function auditLogWithContext(\r\n  entry: Omit<AuditLogEntry, 'ipAddress' | 'userAgent'>\r\n): Promise<void> {\r\n  const context = await createAuditContextFromServer(entry.userId);\r\n\r\n  await auditLog({\r\n    ...entry,\r\n    ipAddress: context.ipAddress,\r\n    userAgent: context.userAgent\r\n  });\r\n}\r\n\r\n/**\r\n * Parse user agent string\r\n *\r\n * Extracts browser, OS, and device information from user agent.\r\n *\r\n * @param userAgent - User agent string\r\n * @returns Parsed user agent info\r\n */\r\nexport function parseUserAgent(userAgent: string): {\r\n  browser: string;\r\n  os: string;\r\n  device: string;\r\n} {\r\n  const ua = userAgent.toLowerCase();\r\n\r\n  // Detect browser\r\n  let browser = 'Unknown';\r\n  if (ua.includes('chrome')) browser = 'Chrome';\r\n  else if (ua.includes('firefox')) browser = 'Firefox';\r\n  else if (ua.includes('safari')) browser = 'Safari';\r\n  else if (ua.includes('edge')) browser = 'Edge';\r\n  else if (ua.includes('opera')) browser = 'Opera';\r\n\r\n  // Detect OS\r\n  let os = 'Unknown';\r\n  if (ua.includes('windows')) os = 'Windows';\r\n  else if (ua.includes('mac')) os = 'macOS';\r\n  else if (ua.includes('linux')) os = 'Linux';\r\n  else if (ua.includes('android')) os = 'Android';\r\n  else if (ua.includes('ios') || ua.includes('iphone') || ua.includes('ipad')) os = 'iOS';\r\n\r\n  // Detect device\r\n  let device = 'Desktop';\r\n  if (ua.includes('mobile') || ua.includes('android')) device = 'Mobile';\r\n  else if (ua.includes('tablet') || ua.includes('ipad')) device = 'Tablet';\r\n\r\n  return { browser, os, device };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1499, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/identity-access/lib/config/roles.ts"],"sourcesContent":["/**\r\n * Centralized Role Configuration\r\n *\r\n * Single source of truth for role hierarchy and role-related types.\r\n * Used across the application for consistent role handling.\r\n *\r\n * @module lib/config/roles\r\n * @since 2025-11-04\r\n */\r\n\r\n/**\r\n * System roles enum\r\n * Represents all user roles in the system\r\n */\r\nexport enum UserRole {\r\n  SUPER_ADMIN = 'SUPER_ADMIN',\r\n  ADMIN = 'ADMIN',\r\n  DISTRICT_ADMIN = 'DISTRICT_ADMIN',\r\n  SCHOOL_ADMIN = 'SCHOOL_ADMIN',\r\n  SCHOOL_NURSE = 'SCHOOL_NURSE',\r\n  NURSE = 'NURSE',\r\n  OFFICE_STAFF = 'OFFICE_STAFF',\r\n  STAFF = 'STAFF',\r\n  COUNSELOR = 'COUNSELOR',\r\n  VIEWER = 'VIEWER',\r\n  PARENT = 'PARENT',\r\n  STUDENT = 'STUDENT',\r\n}\r\n\r\n/**\r\n * Role hierarchy for permission inheritance and comparison\r\n * Higher values indicate higher privilege levels\r\n *\r\n * Used for:\r\n * - Permission inheritance (higher roles inherit lower role permissions)\r\n * - Role comparison (checking if user has minimum required role)\r\n * - Authorization checks across the application\r\n */\r\nexport const ROLE_HIERARCHY: Record<UserRole, number> = {\r\n  [UserRole.SUPER_ADMIN]: 100,\r\n  [UserRole.ADMIN]: 90,\r\n  [UserRole.DISTRICT_ADMIN]: 80,\r\n  [UserRole.SCHOOL_ADMIN]: 70,\r\n  [UserRole.SCHOOL_NURSE]: 65,\r\n  [UserRole.NURSE]: 60,\r\n  [UserRole.COUNSELOR]: 50,\r\n  [UserRole.OFFICE_STAFF]: 45,\r\n  [UserRole.STAFF]: 40,\r\n  [UserRole.VIEWER]: 30,\r\n  [UserRole.PARENT]: 20,\r\n  [UserRole.STUDENT]: 10,\r\n};\r\n\r\n/**\r\n * Check if a user role has minimum required role level\r\n *\r\n * @param userRole - The user's current role\r\n * @param minimumRole - The minimum required role\r\n * @returns true if user role meets or exceeds minimum role\r\n *\r\n * @example\r\n * ```typescript\r\n * hasMinimumRole(UserRole.NURSE, UserRole.STAFF) // true (NURSE > STAFF)\r\n * hasMinimumRole(UserRole.VIEWER, UserRole.NURSE) // false (VIEWER < NURSE)\r\n * ```\r\n */\r\nexport function hasMinimumRole(userRole: UserRole | string, minimumRole: UserRole | string): boolean {\r\n  const userLevel = ROLE_HIERARCHY[userRole as UserRole] || 0;\r\n  const requiredLevel = ROLE_HIERARCHY[minimumRole as UserRole] || 0;\r\n\r\n  return userLevel >= requiredLevel;\r\n}\r\n\r\n/**\r\n * Compare two roles\r\n *\r\n * @param role1 - First role\r\n * @param role2 - Second role\r\n * @returns Negative if role1 < role2, 0 if equal, positive if role1 > role2\r\n */\r\nexport function compareRoles(role1: UserRole | string, role2: UserRole | string): number {\r\n  const level1 = ROLE_HIERARCHY[role1 as UserRole] || 0;\r\n  const level2 = ROLE_HIERARCHY[role2 as UserRole] || 0;\r\n\r\n  return level1 - level2;\r\n}\r\n\r\n/**\r\n * Get role level\r\n *\r\n * @param role - Role to get level for\r\n * @returns Numeric level of the role (higher = more privileged)\r\n */\r\nexport function getRoleLevel(role: UserRole | string): number {\r\n  return ROLE_HIERARCHY[role as UserRole] || 0;\r\n}\r\n\r\n/**\r\n * Check if role exists in system\r\n *\r\n * @param role - Role to check\r\n * @returns true if role is valid\r\n */\r\nexport function isValidRole(role: string): role is UserRole {\r\n  return Object.values(UserRole).includes(role as UserRole);\r\n}\r\n\r\n/**\r\n * Get all roles at or above a certain level\r\n *\r\n * @param minimumRole - Minimum role level\r\n * @returns Array of roles that meet the minimum level\r\n */\r\nexport function getRolesAbove(minimumRole: UserRole | string): UserRole[] {\r\n  const minLevel = ROLE_HIERARCHY[minimumRole as UserRole] || 0;\r\n\r\n  return Object.entries(ROLE_HIERARCHY)\r\n    .filter(([_, level]) => level >= minLevel)\r\n    .map(([role]) => role as UserRole);\r\n}\r\n\r\n/**\r\n * Get all roles below a certain level\r\n *\r\n * @param maximumRole - Maximum role level\r\n * @returns Array of roles below the maximum level\r\n */\r\nexport function getRolesBelow(maximumRole: UserRole | string): UserRole[] {\r\n  const maxLevel = ROLE_HIERARCHY[maximumRole as UserRole] || 0;\r\n\r\n  return Object.entries(ROLE_HIERARCHY)\r\n    .filter(([_, level]) => level < maxLevel)\r\n    .map(([role]) => role as UserRole);\r\n}\r\n\r\n/**\r\n * Role type for string literals\r\n */\r\nexport type Role = keyof typeof ROLE_HIERARCHY;\r\n\r\n/**\r\n * Get human-readable role name\r\n *\r\n * @param role - Role to format\r\n * @returns Formatted role name\r\n */\r\nexport function formatRoleName(role: UserRole | string): string {\r\n  const roleMap: Record<string, string> = {\r\n    [UserRole.SUPER_ADMIN]: 'Super Administrator',\r\n    [UserRole.ADMIN]: 'Administrator',\r\n    [UserRole.DISTRICT_ADMIN]: 'District Administrator',\r\n    [UserRole.SCHOOL_ADMIN]: 'School Administrator',\r\n    [UserRole.SCHOOL_NURSE]: 'School Nurse',\r\n    [UserRole.NURSE]: 'Nurse',\r\n    [UserRole.OFFICE_STAFF]: 'Office Staff',\r\n    [UserRole.STAFF]: 'Staff',\r\n    [UserRole.COUNSELOR]: 'Counselor',\r\n    [UserRole.VIEWER]: 'Viewer',\r\n    [UserRole.PARENT]: 'Parent',\r\n    [UserRole.STUDENT]: 'Student',\r\n  };\r\n\r\n  return roleMap[role] || role;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GAED;;;CAGC;;;;;;;;;;;;;;;;;;;;AACM,IAAA,AAAK,kCAAA;;;;;;;;;;;;;WAAA;;AAwBL,MAAM,iBAA2C;IACtD,eAAsB,EAAE;IACxB,SAAgB,EAAE;IAClB,kBAAyB,EAAE;IAC3B,gBAAuB,EAAE;IACzB,gBAAuB,EAAE;IACzB,SAAgB,EAAE;IAClB,aAAoB,EAAE;IACtB,gBAAuB,EAAE;IACzB,SAAgB,EAAE;IAClB,UAAiB,EAAE;IACnB,UAAiB,EAAE;IACnB,WAAkB,EAAE;AACtB;AAeO,SAAS,eAAe,QAA2B,EAAE,WAA8B;IACxF,MAAM,YAAY,cAAc,CAAC,SAAqB,IAAI;IAC1D,MAAM,gBAAgB,cAAc,CAAC,YAAwB,IAAI;IAEjE,OAAO,aAAa;AACtB;AASO,SAAS,aAAa,KAAwB,EAAE,KAAwB;IAC7E,MAAM,SAAS,cAAc,CAAC,MAAkB,IAAI;IACpD,MAAM,SAAS,cAAc,CAAC,MAAkB,IAAI;IAEpD,OAAO,SAAS;AAClB;AAQO,SAAS,aAAa,IAAuB;IAClD,OAAO,cAAc,CAAC,KAAiB,IAAI;AAC7C;AAQO,SAAS,YAAY,IAAY;IACtC,OAAO,OAAO,MAAM,CAAC,UAAU,QAAQ,CAAC;AAC1C;AAQO,SAAS,cAAc,WAA8B;IAC1D,MAAM,WAAW,cAAc,CAAC,YAAwB,IAAI;IAE5D,OAAO,OAAO,OAAO,CAAC,gBACnB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,SAAS,UAChC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAK;AACrB;AAQO,SAAS,cAAc,WAA8B;IAC1D,MAAM,WAAW,cAAc,CAAC,YAAwB,IAAI;IAE5D,OAAO,OAAO,OAAO,CAAC,gBACnB,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,QAAQ,UAC/B,GAAG,CAAC,CAAC,CAAC,KAAK,GAAK;AACrB;AAaO,SAAS,eAAe,IAAuB;IACpD,MAAM,UAAkC;QACtC,eAAsB,EAAE;QACxB,SAAgB,EAAE;QAClB,kBAAyB,EAAE;QAC3B,gBAAuB,EAAE;QACzB,gBAAuB,EAAE;QACzB,SAAgB,EAAE;QAClB,gBAAuB,EAAE;QACzB,SAAgB,EAAE;QAClB,aAAoB,EAAE;QACtB,UAAiB,EAAE;QACnB,UAAiB,EAAE;QACnB,WAAkB,EAAE;IACtB;IAEA,OAAO,OAAO,CAAC,KAAK,IAAI;AAC1B","debugId":null}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/auth.ts"],"sourcesContent":["/**\r\n * Authentication Utilities for Next.js API Routes\r\n *\r\n * Provides comprehensive JWT validation, token verification, and user authentication\r\n * for Next.js API routes and server components. Includes role-based access control\r\n * and security validation at module load time.\r\n *\r\n * **Security Features**:\r\n * - JWT token validation with issuer/audience verification\r\n * - Separate access and refresh token handling\r\n * - Role-based permission checking\r\n * - Module-level secret validation (fails fast on missing secrets)\r\n *\r\n * @module lib/auth\r\n */\r\n\r\nimport { NextRequest } from 'next/server';\r\nimport jwt from 'jsonwebtoken';\r\n\r\n// CRITICAL: Validate JWT secrets at module load time\r\n// This prevents the application from starting with missing or empty secrets\r\nif (!process.env.JWT_SECRET) {\r\n  throw new Error(\r\n    'FATAL: JWT_SECRET environment variable is not set. ' +\r\n    'This is a critical security requirement. The application cannot start without it. ' +\r\n    'Please configure JWT_SECRET in your environment variables.'\r\n  );\r\n}\r\n\r\nif (!process.env.JWT_REFRESH_SECRET) {\r\n  console.warn(\r\n    'WARNING: JWT_REFRESH_SECRET not set, falling back to JWT_SECRET. ' +\r\n    'For production environments, use separate secrets for access and refresh tokens.'\r\n  );\r\n}\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET;\r\nconst JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET || process.env.JWT_SECRET;\r\n\r\n/**\r\n * JWT token payload structure.\r\n *\r\n * Represents the decoded JWT token contents including user identity,\r\n * role, and token metadata.\r\n *\r\n * @property {string} id - User unique identifier\r\n * @property {string} email - User email address\r\n * @property {string} role - User role (e.g., 'admin', 'nurse', 'parent')\r\n * @property {'access' | 'refresh'} [type] - Token type designation\r\n * @property {number} [iat] - Issued at timestamp (Unix epoch)\r\n * @property {number} [exp] - Expiration timestamp (Unix epoch)\r\n * @property {string} [jti] - JWT ID for token tracking/revocation\r\n */\r\nexport interface TokenPayload {\r\n  id: string;\r\n  email: string;\r\n  role: string;\r\n  type?: 'access' | 'refresh';\r\n  iat?: number;\r\n  exp?: number;\r\n  jti?: string;\r\n}\r\n\r\n/**\r\n * Authenticated user representation.\r\n *\r\n * Represents a successfully authenticated user with their identity and role information.\r\n * Used throughout the application for access control and personalization.\r\n *\r\n * @property {string} id - User unique identifier\r\n * @property {string} email - User email address\r\n * @property {string} role - User role for permission checking\r\n * @property {Object} [user] - Nested user object for backward compatibility\r\n * @property {string} user.id - User unique identifier (nested)\r\n * @property {string} user.email - User email address (nested)\r\n * @property {string} user.role - User role (nested)\r\n */\r\nexport interface AuthenticatedUser {\r\n  id: string;\r\n  email: string;\r\n  role: string;\r\n  user?: {\r\n    id: string;\r\n    email: string;\r\n    role: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Extracts JWT token from request Authorization header.\r\n *\r\n * Supports both \"Bearer <token>\" and \"<token>\" header formats.\r\n * Returns null if no Authorization header is present.\r\n *\r\n * @param {NextRequest} request - Next.js request object\r\n * @returns {string | null} Extracted token or null if not found\r\n *\r\n * @example\r\n * ```typescript\r\n * // With Bearer prefix\r\n * // Header: \"Authorization: Bearer abc123xyz\"\r\n * const token = extractToken(request); // 'abc123xyz'\r\n *\r\n * // Without Bearer prefix\r\n * // Header: \"Authorization: abc123xyz\"\r\n * const token = extractToken(request); // 'abc123xyz'\r\n *\r\n * // No Authorization header\r\n * const token = extractToken(request); // null\r\n * ```\r\n */\r\nexport function extractToken(request: NextRequest): string | null {\r\n  const authHeader = request.headers.get('authorization');\r\n\r\n  if (!authHeader) {\r\n    return null;\r\n  }\r\n\r\n  // Support both \"Bearer <token>\" and \"<token>\" formats\r\n  if (authHeader.startsWith('Bearer ')) {\r\n    return authHeader.substring(7);\r\n  }\r\n\r\n  return authHeader;\r\n}\r\n\r\n/**\r\n * Verifies and decodes a JWT access token.\r\n *\r\n * Validates the token signature, expiration, issuer, and audience.\r\n * Also verifies the token type is 'access' if specified.\r\n *\r\n * @param {string} token - JWT access token to verify\r\n * @returns {TokenPayload} Decoded and verified token payload\r\n * @throws {Error} If token is invalid, expired, or wrong type\r\n *\r\n * @example\r\n * ```typescript\r\n * try {\r\n *   const payload = verifyAccessToken(token);\r\n *   console.log(`User: ${payload.email}, Role: ${payload.role}`);\r\n * } catch (error) {\r\n *   console.error('Invalid token:', error.message);\r\n *   // Redirect to login\r\n * }\r\n * ```\r\n *\r\n * @see {@link verifyRefreshToken} for refresh token verification\r\n */\r\nexport function verifyAccessToken(token: string): TokenPayload {\r\n  // Note: JWT_SECRET is validated at module load time, guaranteed to exist\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_SECRET, {\r\n      issuer: 'white-cross-healthcare',\r\n      audience: 'white-cross-api'\r\n    }) as TokenPayload;\r\n\r\n    // Verify token type\r\n    if (decoded.type && decoded.type !== 'access') {\r\n      throw new Error('Invalid token type');\r\n    }\r\n\r\n    return decoded;\r\n  } catch (error) {\r\n    if (error instanceof jwt.JsonWebTokenError) {\r\n      throw new Error('Invalid token');\r\n    }\r\n    if (error instanceof jwt.TokenExpiredError) {\r\n      throw new Error('Token has expired');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Verifies and decodes a JWT refresh token.\r\n *\r\n * Validates the token signature, expiration, and issuer.\r\n * Also verifies the token type is 'refresh' if specified.\r\n * Refresh tokens typically have longer expiration times than access tokens.\r\n *\r\n * @param {string} token - JWT refresh token to verify\r\n * @returns {TokenPayload} Decoded and verified token payload\r\n * @throws {Error} If token is invalid, expired, or wrong type\r\n *\r\n * @example\r\n * ```typescript\r\n * try {\r\n *   const payload = verifyRefreshToken(refreshToken);\r\n *   // Generate new access token for user\r\n *   const newAccessToken = generateAccessToken(payload.id);\r\n * } catch (error) {\r\n *   console.error('Invalid refresh token:', error.message);\r\n *   // Require re-authentication\r\n * }\r\n * ```\r\n *\r\n * @see {@link verifyAccessToken} for access token verification\r\n */\r\nexport function verifyRefreshToken(token: string): TokenPayload {\r\n  // Note: JWT_REFRESH_SECRET is validated at module load time, guaranteed to exist\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_REFRESH_SECRET, {\r\n      issuer: 'white-cross-healthcare'\r\n    }) as TokenPayload;\r\n\r\n    // Verify token type\r\n    if (decoded.type && decoded.type !== 'refresh') {\r\n      throw new Error('Invalid token type');\r\n    }\r\n\r\n    return decoded;\r\n  } catch (error) {\r\n    if (error instanceof jwt.JsonWebTokenError) {\r\n      throw new Error('Invalid refresh token');\r\n    }\r\n    if (error instanceof jwt.TokenExpiredError) {\r\n      throw new Error('Refresh token has expired');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Authenticates a request and extracts user information from JWT token.\r\n *\r\n * Performs complete authentication flow:\r\n * 1. Extracts token from Authorization header\r\n * 2. Verifies token signature and expiration\r\n * 3. Returns authenticated user object\r\n *\r\n * Returns null if no token present, token is invalid, or verification fails.\r\n * Errors are logged but not thrown to allow graceful handling.\r\n *\r\n * @param {NextRequest} [request] - Next.js request object (optional for server components)\r\n * @returns {AuthenticatedUser | null} Authenticated user or null if authentication fails\r\n *\r\n * @example\r\n * ```typescript\r\n * // In API route\r\n * export async function GET(request: NextRequest) {\r\n *   const user = authenticateRequest(request);\r\n *\r\n *   if (!user) {\r\n *     return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n *   }\r\n *\r\n *   // User is authenticated\r\n *   console.log(`Request from: ${user.email}`);\r\n * }\r\n * ```\r\n *\r\n * @see {@link extractToken} for token extraction\r\n * @see {@link verifyAccessToken} for token verification\r\n */\r\nexport function authenticateRequest(request?: NextRequest): AuthenticatedUser | null {\r\n  if (!request) {\r\n    // Server component context - create mock authenticated user\r\n    // In production, this should use next-auth or similar\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const token = extractToken(request);\r\n\r\n    if (!token) {\r\n      return null;\r\n    }\r\n\r\n    const payload = verifyAccessToken(token);\r\n\r\n    const user = {\r\n      id: payload.id,\r\n      email: payload.email,\r\n      role: payload.role\r\n    };\r\n\r\n    return {\r\n      ...user,\r\n      user // Also expose as nested .user for compatibility\r\n    };\r\n  } catch (error) {\r\n    console.error('Authentication failed:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if user has one of the required roles.\r\n *\r\n * Performs exact role matching (case-sensitive).\r\n * Accepts either a single role or array of roles.\r\n *\r\n * @param {AuthenticatedUser} user - Authenticated user to check\r\n * @param {string | string[]} requiredRole - Required role(s) - user must have one\r\n * @returns {boolean} True if user has one of the required roles\r\n *\r\n * @example\r\n * ```typescript\r\n * // Single role check\r\n * if (hasRole(user, 'admin')) {\r\n *   // User is admin\r\n * }\r\n *\r\n * // Multiple roles check (user needs to be one of these)\r\n * if (hasRole(user, ['admin', 'nurse', 'doctor'])) {\r\n *   // User is admin, nurse, or doctor\r\n * }\r\n * ```\r\n *\r\n * @see {@link hasMinimumRole} for hierarchical role checking\r\n */\r\nexport function hasRole(user: AuthenticatedUser, requiredRole: string | string[]): boolean {\r\n  const roles = Array.isArray(requiredRole) ? requiredRole : [requiredRole];\r\n  return roles.includes(user.role);\r\n}\r\n\r\n/**\r\n * Role hierarchy for permission checking\r\n * @deprecated Import from @/identity-access/lib/config/roles instead\r\n *\r\n * This is maintained for backward compatibility only.\r\n * New code should use the centralized role configuration.\r\n */\r\nimport { ROLE_HIERARCHY as CENTRALIZED_ROLE_HIERARCHY, hasMinimumRole as hasMinimumRoleLevel } from '@/identity-access/lib/config/roles';\r\n\r\nconst ROLE_HIERARCHY = CENTRALIZED_ROLE_HIERARCHY;\r\n\r\n/**\r\n * Checks if user has minimum role level based on role hierarchy.\r\n *\r\n * Uses hierarchical role comparison where higher-level roles\r\n * automatically satisfy requirements for lower-level roles.\r\n * For example, 'admin' satisfies 'nurse' requirements.\r\n *\r\n * @deprecated Use hasMinimumRoleLevel from @/identity-access/lib/config/roles instead.\r\n *             This function is maintained for backward compatibility only.\r\n *\r\n * @param {AuthenticatedUser} user - Authenticated user to check\r\n * @param {string} minimumRole - Minimum required role level\r\n * @returns {boolean} True if user's role meets or exceeds minimum role\r\n *\r\n * @example\r\n * ```typescript\r\n * // Admin checking nurse requirement\r\n * hasMinimumRole(adminUser, 'nurse') // true (admin > nurse in hierarchy)\r\n *\r\n * // Nurse checking admin requirement\r\n * hasMinimumRole(nurseUser, 'admin') // false (nurse < admin in hierarchy)\r\n * ```\r\n *\r\n * @see {@link hasRole} for exact role matching\r\n */\r\nexport function hasMinimumRole(user: AuthenticatedUser, minimumRole: string): boolean {\r\n  return hasMinimumRoleLevel(user.role, minimumRole);\r\n}\r\n\r\n/**\r\n * Auth function - alias for authenticateRequest.\r\n *\r\n * Provided for backward compatibility and convenience.\r\n * Identical to authenticateRequest in functionality.\r\n *\r\n * @function auth\r\n * @type {typeof authenticateRequest}\r\n *\r\n * @example\r\n * ```typescript\r\n * // Can use either name\r\n * const user1 = auth(request);\r\n * const user2 = authenticateRequest(request);\r\n * // Both do the same thing\r\n * ```\r\n *\r\n * @see {@link authenticateRequest} for full documentation\r\n */\r\nexport const auth = authenticateRequest;\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;CAcC;;;;;;;;;;;;;;;;AAGD;AA4SA;;;;;;CAMC,GACD;;AAjTA,qDAAqD;AACrD,4EAA4E;AAC5E,IAAI,CAAC,QAAQ,GAAG,CAAC,UAAU,EAAE;IAC3B,MAAM,IAAI,MACR,wDACA,uFACA;AAEJ;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,kBAAkB,EAAE;IACnC,QAAQ,IAAI,CACV,sEACA;AAEJ;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU;AACzC,MAAM,qBAAqB,QAAQ,GAAG,CAAC,kBAAkB,IAAI,QAAQ,GAAG,CAAC,UAAU;AA0E5E,SAAS,aAAa,OAAoB;IAC/C,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEvC,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,sDAAsD;IACtD,IAAI,WAAW,UAAU,CAAC,YAAY;QACpC,OAAO,WAAW,SAAS,CAAC;IAC9B;IAEA,OAAO;AACT;AAyBO,SAAS,kBAAkB,KAAa;IAC7C,yEAAyE;IACzE,IAAI;QACF,MAAM,UAAU,gJAAG,CAAC,MAAM,CAAC,OAAO,YAAY;YAC5C,QAAQ;YACR,UAAU;QACZ;QAEA,oBAAoB;QACpB,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,KAAK,UAAU;YAC7C,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,IAAI,iBAAiB,gJAAG,CAAC,iBAAiB,EAAE;YAC1C,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,iBAAiB,gJAAG,CAAC,iBAAiB,EAAE;YAC1C,MAAM,IAAI,MAAM;QAClB;QACA,MAAM;IACR;AACF;AA2BO,SAAS,mBAAmB,KAAa;IAC9C,iFAAiF;IACjF,IAAI;QACF,MAAM,UAAU,gJAAG,CAAC,MAAM,CAAC,OAAO,oBAAoB;YACpD,QAAQ;QACV;QAEA,oBAAoB;QACpB,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,KAAK,WAAW;YAC9C,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,IAAI,iBAAiB,gJAAG,CAAC,iBAAiB,EAAE;YAC1C,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,iBAAiB,gJAAG,CAAC,iBAAiB,EAAE;YAC1C,MAAM,IAAI,MAAM;QAClB;QACA,MAAM;IACR;AACF;AAkCO,SAAS,oBAAoB,OAAqB;IACvD,IAAI,CAAC,SAAS;QACZ,4DAA4D;QAC5D,sDAAsD;QACtD,OAAO;IACT;IAEA,IAAI;QACF,MAAM,QAAQ,aAAa;QAE3B,IAAI,CAAC,OAAO;YACV,OAAO;QACT;QAEA,MAAM,UAAU,kBAAkB;QAElC,MAAM,OAAO;YACX,IAAI,QAAQ,EAAE;YACd,OAAO,QAAQ,KAAK;YACpB,MAAM,QAAQ,IAAI;QACpB;QAEA,OAAO;YACL,GAAG,IAAI;YACP;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;IACT;AACF;AA2BO,SAAS,QAAQ,IAAuB,EAAE,YAA+B;IAC9E,MAAM,QAAQ,MAAM,OAAO,CAAC,gBAAgB,eAAe;QAAC;KAAa;IACzE,OAAO,MAAM,QAAQ,CAAC,KAAK,IAAI;AACjC;;AAWA,MAAM,iBAAiB,qKAA0B;AA2B1C,SAAS,eAAe,IAAuB,EAAE,WAAmB;IACzE,OAAO,IAAA,qKAAmB,EAAC,KAAK,IAAI,EAAE;AACxC;AAqBO,MAAM,OAAO","debugId":null}},
    {"offset": {"line": 1749, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/appointments.cache.ts"],"sourcesContent":["/**\r\n * Appointments Cache Operations\r\n * Cached GET operations with React cache() for appointment data fetching\r\n *\r\n * Features:\r\n * - React cache() for request memoization\r\n * - Next.js cache integration with proper TTL\r\n * - PHI-compliant cache tags\r\n * - HIPAA audit logging for all PHI access\r\n * - Comprehensive error handling\r\n */\r\n\r\n'use server';\r\n\r\nimport { cache } from 'react';\r\nimport { serverGet } from '@/lib/server/api-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { CACHE_TAGS, CACHE_TTL } from '@/lib/cache/constants';\r\nimport { auditLog, AUDIT_ACTIONS } from '@/lib/audit';\r\nimport { auth } from '@/lib/auth';\r\nimport { headers } from 'next/headers';\r\nimport type { Appointment, AppointmentFilters } from './appointments.types';\r\n\r\n/**\r\n * Get appointments with optional filters\r\n * Uses React cache() for automatic request memoization\r\n * HIPAA: Logs all appointment list access\r\n *\r\n * @param filters - Optional filters for appointment list\r\n * @returns Promise with appointments array and total count\r\n */\r\nexport const getAppointments = cache(async (filters?: AppointmentFilters): Promise<{\r\n  appointments: Appointment[];\r\n  total: number;\r\n}> => {\r\n  const session = await auth();\r\n  const headersList = await headers();\r\n\r\n  try {\r\n    // Build query string from filters\r\n    const queryString = filters\r\n      ? '?' + new URLSearchParams(\r\n          Object.entries(filters).map(([k, v]) => [k, String(v)])\r\n        ).toString()\r\n      : '';\r\n\r\n    // serverGet returns ApiResponse<T>, so response itself is ApiResponse\r\n    const response = await serverGet<{ appointments: Appointment[]; total: number }>(\r\n      `${API_ENDPOINTS.APPOINTMENTS?.BASE || '/appointments'}${queryString}`,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL?.PHI_STANDARD || 300,\r\n          tags: [CACHE_TAGS?.APPOINTMENTS || 'appointments', CACHE_TAGS?.PHI || 'phi'],\r\n        },\r\n      }\r\n    );\r\n\r\n    // HIPAA Audit Log: Track appointment list access\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.LIST_APPOINTMENTS,\r\n      resource: 'appointments',\r\n      details: filters ? `Filters: ${JSON.stringify(filters)}` : 'No filters',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: response?.success || false,\r\n    });\r\n\r\n    // response.data has type { appointments: Appointment[]; total: number }\r\n    const result = response?.data;\r\n    return {\r\n      appointments: result?.appointments || [],\r\n      total: result?.total || 0,\r\n    };\r\n  } catch (error) {\r\n    // HIPAA Audit Log: Track failed access\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.LIST_APPOINTMENTS,\r\n      resource: 'appointments',\r\n      details: filters ? `Filters: ${JSON.stringify(filters)}` : 'No filters',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error',\r\n    });\r\n\r\n    console.error('Failed to fetch appointments:', error);\r\n    return { appointments: [], total: 0 };\r\n  }\r\n});\r\n\r\n/**\r\n * Get a single appointment by ID\r\n * Uses React cache() for automatic request memoization\r\n * HIPAA: Logs all individual appointment access\r\n *\r\n * @param id - Appointment ID\r\n * @returns Promise with appointment data or null if not found\r\n */\r\nexport const getAppointment = cache(async (id: string): Promise<Appointment | null> => {\r\n  const session = await auth();\r\n  const headersList = await headers();\r\n\r\n  try {\r\n    // serverGet returns ApiResponse<T>, so response itself is ApiResponse\r\n    const response = await serverGet<Appointment>(\r\n      API_ENDPOINTS.APPOINTMENTS?.BY_ID?.(id) || `/appointments/${id}`,\r\n      {\r\n        cache: 'force-cache',\r\n        next: {\r\n          revalidate: CACHE_TTL?.PHI_STANDARD || 300,\r\n          tags: [`appointment-${id}`, CACHE_TAGS?.APPOINTMENTS || 'appointments', CACHE_TAGS?.PHI || 'phi'],\r\n        },\r\n      }\r\n    );\r\n\r\n    // HIPAA Audit Log: Track appointment access\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.VIEW_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: response?.success || false,\r\n    });\r\n\r\n    // response.data has type Appointment\r\n    if (!response?.success || !response?.data) {\r\n      return null;\r\n    }\r\n    return response.data;\r\n  } catch (error) {\r\n    // HIPAA Audit Log: Track failed access\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.VIEW_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error',\r\n    });\r\n\r\n    console.error(`Failed to fetch appointment ${id}:`, error);\r\n    return null;\r\n  }\r\n});\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1895, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/src/lib/actions/appointments.crud.ts"],"sourcesContent":["/**\r\n * Appointments CRUD Operations\r\n * Create, update, and delete operations with cache invalidation\r\n *\r\n * Features:\r\n * - Full CRUD operations for appointments\r\n * - HIPAA audit logging for all PHI modifications\r\n * - Automatic cache invalidation with revalidateTag/revalidatePath\r\n * - Comprehensive error handling\r\n * - Type-safe return values\r\n */\r\n\r\n'use server';\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache';\r\nimport { serverPost, serverPut, serverDelete } from '@/lib/server/api-client';\r\nimport { API_ENDPOINTS } from '@/constants/api';\r\nimport { CACHE_TAGS } from '@/lib/cache/constants';\r\nimport { auditLog, AUDIT_ACTIONS } from '@/lib/audit';\r\nimport { auth } from '@/lib/auth';\r\nimport { headers } from 'next/headers';\r\nimport type { Appointment, CreateAppointmentData, UpdateAppointmentData } from './appointments.types';\r\n\r\n/**\r\n * Create a new appointment\r\n * HIPAA: Logs all appointment creation with audit trail\r\n *\r\n * @param data - Appointment creation data\r\n * @returns Promise with success status, appointment ID, and optional error\r\n */\r\nexport async function createAppointment(data: CreateAppointmentData): Promise<{\r\n  success: boolean;\r\n  id?: string;\r\n  error?: string;\r\n}> {\r\n  const session = await auth();\r\n  const headersList = await headers();\r\n\r\n  try {\r\n    // serverPost returns ApiResponse<T>, so response itself is ApiResponse\r\n    const response = await serverPost<Appointment>(\r\n      API_ENDPOINTS.APPOINTMENTS?.BASE || '/appointments',\r\n      data,\r\n      {\r\n        cache: 'no-store',\r\n      }\r\n    );\r\n\r\n    if (!response.success || !response.data) {\r\n      throw new Error(response.message || 'Failed to create appointment');\r\n    }\r\n\r\n    // HIPAA Audit Log: Track appointment creation\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.CREATE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: response.data.id,\r\n      details: `Created appointment for student ${data.studentId}`,\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: true,\r\n      changes: { created: data },\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS?.APPOINTMENTS || 'appointments', 'default');\r\n    revalidatePath('/appointments');\r\n    revalidatePath('/dashboard');\r\n\r\n    // response.data has type Appointment\r\n    return {\r\n      success: true,\r\n      id: response.data.id,\r\n    };\r\n  } catch (error) {\r\n    // HIPAA Audit Log: Track failed creation\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.CREATE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      details: `Failed to create appointment for student ${data.studentId}`,\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error',\r\n    });\r\n\r\n    console.error('Failed to create appointment:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to create appointment',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Update an existing appointment\r\n * HIPAA: Logs all appointment modifications with change tracking\r\n *\r\n * @param id - Appointment ID to update\r\n * @param data - Updated appointment data\r\n * @returns Promise with success status and optional error\r\n */\r\nexport async function updateAppointment(\r\n  id: string,\r\n  data: UpdateAppointmentData\r\n): Promise<{\r\n  success: boolean;\r\n  error?: string;\r\n}> {\r\n  const session = await auth();\r\n  const headersList = await headers();\r\n\r\n  try {\r\n    // serverPut returns ApiResponse<T>, so response itself is ApiResponse\r\n    const response = await serverPut<Appointment>(\r\n      API_ENDPOINTS.APPOINTMENTS?.BY_ID?.(id) || `/appointments/${id}`,\r\n      data,\r\n      {\r\n        cache: 'no-store',\r\n      }\r\n    );\r\n\r\n    if (!response.success) {\r\n      throw new Error(response.message || 'Failed to update appointment');\r\n    }\r\n\r\n    // HIPAA Audit Log: Track appointment update\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.UPDATE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      details: 'Updated appointment details',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: true,\r\n      changes: { updated: data },\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS?.APPOINTMENTS || 'appointments', 'default');\r\n    revalidateTag(`appointment-${id}`, 'default');\r\n    revalidatePath('/appointments');\r\n    revalidatePath(`/appointments/${id}`);\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    // HIPAA Audit Log: Track failed update\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.UPDATE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      details: 'Failed to update appointment',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error',\r\n    });\r\n\r\n    console.error(`Failed to update appointment ${id}:`, error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to update appointment',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Delete an appointment\r\n * HIPAA: Logs all appointment deletions for compliance\r\n *\r\n * @param id - Appointment ID to delete\r\n * @returns Promise with success status and optional error\r\n */\r\nexport async function deleteAppointment(id: string): Promise<{\r\n  success: boolean;\r\n  error?: string;\r\n}> {\r\n  const session = await auth();\r\n  const headersList = await headers();\r\n\r\n  try {\r\n    // serverDelete returns ApiResponse<T>, so response itself is ApiResponse\r\n    const response = await serverDelete<void>(\r\n      API_ENDPOINTS.APPOINTMENTS?.BY_ID?.(id) || `/appointments/${id}`,\r\n      {\r\n        cache: 'no-store',\r\n      }\r\n    );\r\n\r\n    if (!response.success) {\r\n      throw new Error(response.message || 'Failed to delete appointment');\r\n    }\r\n\r\n    // HIPAA Audit Log: Track appointment deletion\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.DELETE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      details: 'Deleted appointment',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: true,\r\n    });\r\n\r\n    // Cache invalidation\r\n    revalidateTag(CACHE_TAGS?.APPOINTMENTS || 'appointments', 'default');\r\n    revalidateTag(`appointment-${id}`, 'default');\r\n    revalidatePath('/appointments');\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    // HIPAA Audit Log: Track failed deletion\r\n    await auditLog({\r\n      userId: session?.user?.id,\r\n      action: AUDIT_ACTIONS.DELETE_APPOINTMENT,\r\n      resource: 'appointment',\r\n      resourceId: id,\r\n      details: 'Failed to delete appointment',\r\n      ipAddress: headersList.get('x-forwarded-for') || headersList.get('x-real-ip') || undefined,\r\n      userAgent: headersList.get('user-agent') || undefined,\r\n      success: false,\r\n      errorMessage: error instanceof Error ? error.message : 'Unknown error',\r\n    });\r\n\r\n    console.error(`Failed to delete appointment ${id}:`, error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to delete appointment',\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2098, "column": 0}, "map": {"version":3,"sources":["file:///F:/temp/white-cross/frontend/.next-internal/server/app/%28dashboard%29/appointments/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getAppointments as '7fa116af0736d6034e1d56926441256eda17534051'} from 'ACTIONS_MODULE0'\nexport {deleteAppointment as '4054d0ed2fc0691098fcc94d488e5746cb87a2b5ec'} from 'ACTIONS_MODULE1'\nexport {getAppointments as '7fa116af0736d6034e1d56926441256eda17534051'} from 'ACTIONS_MODULE0'\nexport {deleteAppointment as '4054d0ed2fc0691098fcc94d488e5746cb87a2b5ec'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}}]
}