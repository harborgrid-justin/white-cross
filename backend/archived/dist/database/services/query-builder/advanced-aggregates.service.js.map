{"version":3,"file":"advanced-aggregates.service.js","sourceRoot":"","sources":["../../../../src/database/services/query-builder/advanced-aggregates.service.ts"],"names":[],"mappings":"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"}