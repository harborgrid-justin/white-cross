# ================================================================================
# WHITE CROSS - PRODUCTION ENVIRONMENT
# ================================================================================
# This file serves as a template for production environment variables
# NEVER commit actual production secrets to version control
# Use AWS Secrets Manager, Azure Key Vault, or similar for production secrets
# ================================================================================

# ================================================================================
# APPLICATION CONFIGURATION
# ================================================================================
NODE_ENV=production
PORT=3000

# ================================================================================
# DATABASE CONFIGURATION
# ================================================================================
# SECURITY: Use environment variables or secrets manager for production
DB_HOST=${PRODUCTION_DB_HOST}
DB_PORT=5432
DB_USERNAME=${PRODUCTION_DB_USERNAME}
DB_PASSWORD=${PRODUCTION_DB_PASSWORD}
DB_NAME=white_cross_production
DB_SSL=true
DB_SYNC=false
DB_LOGGING=false

# Database pool configuration (higher for production)
DB_POOL_MIN=5
DB_POOL_MAX=30
DB_ACQUIRE_TIMEOUT=30000
DB_IDLE_TIMEOUT=30000

# ================================================================================
# JWT & AUTHENTICATION
# ================================================================================
# CRITICAL: Load from AWS Secrets Manager or similar in production
# NEVER hardcode production secrets
JWT_SECRET=${PRODUCTION_JWT_SECRET}
JWT_REFRESH_SECRET=${PRODUCTION_JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ================================================================================
# SECURITY CONFIGURATION
# ================================================================================
# CRITICAL: Load from secrets manager in production
CSRF_SECRET=${PRODUCTION_CSRF_SECRET}
CONFIG_ENCRYPTION_KEY=${PRODUCTION_CONFIG_ENCRYPTION_KEY}
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY_SIZE=32
ENCRYPTION_IV_SIZE=16
RSA_KEY_SIZE=4096
KEY_ROTATION_ENABLED=true
KEY_ROTATION_INTERVAL_DAYS=90

# ================================================================================
# CORS & NETWORKING
# ================================================================================
# CRITICAL: Set to exact production domain(s), NEVER use wildcard
CORS_ORIGIN=${PRODUCTION_CORS_ORIGIN}

# ================================================================================
# REDIS CONFIGURATION
# ================================================================================
REDIS_HOST=${PRODUCTION_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${PRODUCTION_REDIS_PASSWORD}
REDIS_USERNAME=${PRODUCTION_REDIS_USERNAME}
REDIS_DB=0
REDIS_QUEUE_DB=1
REDIS_TTL_DEFAULT=300
REDIS_CONNECTION_TIMEOUT=5000
REDIS_MAX_RETRIES=10
REDIS_RETRY_DELAY=1000

# ================================================================================
# CACHE CONFIGURATION
# ================================================================================
CACHE_KEY_PREFIX=prod:cache
CACHE_ENABLE_COMPRESSION=true
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_ENABLE_L1=true
CACHE_L1_MAX_SIZE=5000
CACHE_L1_TTL=60
CACHE_ENABLE_LOGGING=false
CACHE_WARMING_ENABLED=true
CACHE_MAX_SIZE=10000
CACHE_DEFAULT_TTL=300000

# ================================================================================
# QUEUE CONFIGURATION
# ================================================================================
QUEUE_CONCURRENCY_DELIVERY=20
QUEUE_CONCURRENCY_NOTIFICATION=30
QUEUE_CONCURRENCY_ENCRYPTION=10
QUEUE_CONCURRENCY_INDEXING=5
QUEUE_CONCURRENCY_BATCH=3
QUEUE_CONCURRENCY_CLEANUP=2

# ================================================================================
# WEBSOCKET CONFIGURATION
# ================================================================================
WS_PORT=3002
WS_PATH=/socket.io
WS_CORS_ORIGIN=${PRODUCTION_CORS_ORIGIN}
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000
ENABLE_REDIS_ADAPTER=true

# ================================================================================
# LOGGING & MONITORING
# ================================================================================
LOG_LEVEL=info
SENTRY_DSN=${PRODUCTION_SENTRY_DSN}
REQUEST_TIMEOUT=30000

# ================================================================================
# AWS CONFIGURATION
# ================================================================================
AWS_REGION=us-east-1
# SECURITY: Use IAM roles instead of access keys when possible
AWS_ACCESS_KEY_ID=${PRODUCTION_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${PRODUCTION_AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=${PRODUCTION_AWS_S3_BUCKET}
AWS_SECRET_NAME=white-cross/production

# ================================================================================
# FEATURE FLAGS
# ================================================================================
FEATURES_ENABLE_AI_SEARCH=true
FEATURES_ENABLE_ANALYTICS=true
FEATURES_ENABLE_WEBSOCKET=true

# ================================================================================
# PRODUCTION FLAGS
# ================================================================================
DOCKER=true
GRAPHQL_PLAYGROUND=false
SWAGGER_ENABLED=false

# ================================================================================
# PRODUCTION CHECKLIST
# ================================================================================
# Before deploying to production:
# ✓ All secrets loaded from AWS Secrets Manager or similar
# ✓ CORS_ORIGIN set to exact production domain
# ✓ DB_SSL=true
# ✓ DB_SYNC=false
# ✓ CSRF_SECRET set with minimum 32 characters
# ✓ All JWT secrets minimum 32 characters
# ✓ SENTRY_DSN configured for error tracking
# ✓ Redis password configured
# ✓ GRAPHQL_PLAYGROUND=false
# ✓ SWAGGER_ENABLED=false (or secured with authentication)
# ================================================================================

# ==============================================================================
# ERROR TRACKING & LOGGING (REQUIRED FOR PRODUCTION)
# ==============================================================================
# Sentry Error Tracking - GET DSN from https://sentry.io
SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/YOUR_PROJECT_ID

# Logging Configuration
LOG_LEVEL=info
ENABLE_DETAILED_ERRORS=false
